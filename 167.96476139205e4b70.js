(self.webpackChunkmerch_store=self.webpackChunkmerch_store||[]).push([[167],{4167:(m,b,r)=>{"use strict";r.r(b),r.d(b,{default:()=>D,getSrcSet:()=>T});var n=r(1635);var c=r(7174),Q=r.n(c),t=r(4438),u=r(4710),i=r(5152),v=r(6878),p=r(2864),d=r(6354),I=r(9172),g=r(1716),W=r(177),o=r(9079),N=r(8834),A=r(5997),X=r(7514),y=r(5172),O=r(653),h=r(7673);let P=class{api=(0,t.WQX)(i.Gf);route=(0,t.WQX)(u.nX);brandId=(0,o.ot)(this.route.params.pipe((0,d.T)(e=>e.id)));getFilterOptions(){return{category:this.getBrandCategoriesOptions(this.brandId()),gender:this.getGenderOptions(),sortBy:this.getSortingOptions(),color:this.getColorOptions(),isAvailablePointsRange:this.getPointsOptions()}}getBrandCategoriesOptions(e){return this.api.get(`brands/${e}/categories`).pipe((0,d.T)(a=>a.map(s=>({label:s.Name,value:s.Id}))))}getGenderOptions(){return(0,h.of)(O.nL.map(e=>({label:e,value:e})))}getSortingOptions(){return(0,h.of)(O.JH)}getPointsOptions(){return(0,h.of)([{label:"point option 1",value:"1"}])}getColorOptions(){return(0,h.of)([{label:"Black",value:"1"},{label:"White",value:"2"}])}};P=(0,n.Cg)([(0,t._qm)({providedIn:"root"})],P);let f=class{productDataService=(0,t.WQX)(y.D);destroyRef=(0,t.WQX)(t.abz);route=(0,t.WQX)(u.nX);isTablet=(0,t.WQX)(i.RL).isTablet;api=(0,t.WQX)(i.Gf);brandId=(0,o.ot)(this.route.params.pipe((0,d.T)(e=>e.id)));brandPageData=(0,t.vPA)(null);featuredSection=(0,t.EWP)(()=>(this.brandPageData()?.sections||[]).find(e=>"FeaturedProducts"===e.type)||{});allProductsSection=(0,t.EWP)(()=>(this.brandPageData()?.sections||[]).find(e=>"AllProducts"===e.type)||{});title=(0,t.EWP)(()=>this.allProductsSection()?.title);subtitle=(0,t.EWP)(()=>this.allProductsSection()?.subtitle);filters=(0,t.vPA)(["sortBy","isAvailablePointsRange","category"]);products=(0,t.vPA)([]);isLoading=(0,t.vPA)(!1);totalCount=(0,t.vPA)(0);cachedFilter={};productsPerPage=(0,t.EWP)(()=>this.isTablet()?6:8);productsOffset=(0,t.vPA)(this.productsPerPage());filterState=(0,t.vPA)({});lastReceivedPageNumber=(0,t.vPA)(0);brand=(0,o.ot)(this.route.queryParams.pipe((0,d.T)(e=>e.data?JSON.parse(e.data):{})));constructor(){(0,t.QZP)(()=>{this.brandId(),this.getProducts({})},{allowSignalWrites:!0})}getProducts(e){if(!Object.keys(e).length)return;this.isLoading.set(!0);const a=JSON.stringify(this.cachedFilter)!==JSON.stringify(e);a&&(this.lastReceivedPageNumber.set(0),this.cachedFilter=e),this.productDataService.getProducts({...e,brandIds:[this.brandId()],page:a?1:Math.min(this.lastReceivedPageNumber()+1,this.totalCount()),pageSize:this.productsPerPage()}).pipe((0,o.pQ)(this.destroyRef)).subscribe(s=>{this.products.update(R=>{const E=s.items[0]?.brandName!==R[0]?.brandName;return a?s.items:[...E?[]:R,...s.items]}),this.totalCount.set(s.totalCount),this.lastReceivedPageNumber.set(s.currentPage),this.isLoading.set(!1)})}seeMoreProducts(){this.getProducts(this.cachedFilter||{})}loadBrandPageData(){this.api.get(`brands/${this.brandId()}/page`).subscribe(e=>this.brandPageData.set(e))}static ctorParameters=()=>[]};f=(0,n.Cg)([(0,t._qm)({providedIn:"root"}),(0,n.Sn)("design:paramtypes",[])],f);let x=class{};x=(0,n.Cg)([(0,t.uAl)({selector:"app-editorial-section-wrapper",standalone:!0,imports:[W.MD],template:"<ng-content></ng-content> ",changeDetection:t.Ngq.OnPush,providers:[{provide:g.YE,useValue:g.v.EditorialSection}],styles:[""]})],x);let C=class{SectionName=g.v;skeletonService=(0,t.WQX)(X.Rm);cartService=(0,t.WQX)(i.mx);productService=(0,t.WQX)(i.bk);api=(0,t.WQX)(i.Gf);route=(0,t.WQX)(u.nX);router=(0,t.WQX)(u.Ix);specialService=(0,t.WQX)(i.Fp);destroyRef=(0,t.WQX)(t.abz);breadcrumbsService=(0,t.WQX)(p.EH);wishlistService=(0,t.WQX)(i.FQ);dataService=(0,t.WQX)(v.I);brandId=(0,o.ot)(this.route.params.pipe((0,d.T)(e=>e.id)));brandName=(0,t.EWP)(()=>this.dataService.brandPageData()?.brand?.name);featuredSection=this.dataService.featuredSection;carouselSlides=(0,t.vPA)([]);featuredProducts=(0,o.ot)(this.specialService.featuredSubject.asObservable().pipe((0,I.Z)(null)));constructor(){(0,t.QZP)(()=>{this.carouselSlides()&&this.breadcrumbsService.set([this.brandName()])},{allowSignalWrites:!0}),(0,t.QZP)(()=>{this.brandId(),this.fetchCarouselSlides(),this.dataService.loadBrandPageData()})}ngOnInit(){this.detectRouteChange(),this.fetchCarouselSlides()}fetchCarouselSlides(){this.getCarouselSlidesRequest().subscribe(e=>this.carouselSlides.set(e))}goToProduct(e){e.id&&this.router.navigate([i.K_.PRODUCTS,e.id])}toggleWishlist(e){this.wishlistService.toggleWishlist(e)}addToCart(e){this.cartService.addCartProduct(e)}onShowProduct(e){this.productService.goToProductDetails(e)}getCarouselSlidesRequest(){return this.api.get(`brands/${this.brandId()}/page`).pipe((0,d.T)(e=>[e?.image].map(a=>({id:a.productId,title:a.title,brandName:e.brand.name,description:e.brand.name,imgUrl:a.sourceSet,...T(a.sourceSet)}))))}detectRouteChange(){this.route.params.pipe((0,o.pQ)(this.destroyRef)).subscribe(()=>{this.getFeaturedProducts()})}getFeaturedProducts(){this.specialService.getFeatured({count:8,brandIds:[this.brandId()]},()=>{})}static ctorParameters=()=>[]};C=(0,n.Cg)([(0,t.uAl)({selector:"app-brand-store",standalone:!0,imports:[W.MD,v.t,p.Qo,A.g,N.Hl,p.m6,g.nj,x],template:'@if (!carouselSlides()?.length) {\n  <section class="skeleton--carousel">\n    <ng-container *ngTemplateOutlet="skeletonService.rectangleTemplate()" />\n  </section>\n} @else {\n  <lib-carousel\n    class="carousel"\n    [displayNavigationControls]="false"\n    [slides]="carouselSlides()"\n    [textTemplate]="carouselSlideText"\n    [isStatic]="true"\n    [overlayGradient]="\'center\'"\n  ></lib-carousel>\n  <ng-template #carouselSlideText>\n    <div class="carousel-text-wrapper box-container" style="z-index: 100">\n      <app-breadcrumbs [dumb]="true" [dumbLabel]="brandName()"></app-breadcrumbs>\n      <h1 class="carousel-text__heading heading-1">{{ carouselSlides()[0].title }}</h1>\n      @if (carouselSlides()[0].description) {\n        <p class="carousel-text__sub-heading body-1">\n          {{ carouselSlides()[0].description }}\n        </p>\n      }\n      <button\n        style="width: auto"\n        mat-stroked-button\n        (click)="goToProduct(carouselSlides()[0])"\n        trackClick\n        [trackClick]="{ component: SectionName.Hero, item: \'cta\', linkName: \'Shop \' + carouselSlides()[0].brandName }"\n      >\n        Shop {{ carouselSlides()[0].brandName }}\n      </button>\n    </div>\n  </ng-template>\n}\n\n<section class="content-wrapper box-container">\n  <app-editorial-section-wrapper>\n    <lib-product-card-slider\n      [title]="featuredSection().title"\n      [subTitle]="featuredSection().subTitle"\n      [products]="featuredProducts()"\n      [withAction]="false"\n    ></lib-product-card-slider>\n  </app-editorial-section-wrapper>\n\n  <app-product-list\n    (onShowProduct)="onShowProduct($event)"\n    (toggleWishlist)="toggleWishlist($event)"\n    (addToCart)="addToCart($event)"\n    [emptyListTemplate]="emptyWishlistTemplate"\n  ></app-product-list>\n</section>\n\n<ng-template #emptyWishlistTemplate>\n  <div class="pb-4">\n    <p class="body-0 text-center">No products found according to applied filters</p>\n  </div>\n</ng-template>\n',changeDetection:t.Ngq.OnPush,providers:[{provide:p.xs,useClass:P},{provide:v.I,useClass:f},y.D],styles:[Q()]}),(0,n.Sn)("design:paramtypes",[])],C);const D=C,T=l=>{const e=a=>l.find(s=>s.includes(`--${a}.`));return{imgUrlMobile:e("mobile")||"",imgUrlMedium:e("medium")||"",imgUrlBig:e("big")||"",imgUrlCard:e("card")||""}}},7174:(m,b,r)=>{var n=r(8564),c=r(8557)(n);c.push([m.id,":host {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n}\n\n.skeleton--carousel,\n.carousel {\n  width: 100%;\n}\n\napp-breadcrumbs {\n  margin-block-end: 8px;\n}\n\nskeleton--carousel {\n  height: 790px;\n  width: 100%;\n}\n\n.content-wrapper {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 24px;\n}\n@media (min-width: 0) and (max-width: 480px) {\n  .content-wrapper {\n    padding: 0 16px;\n  }\n}\n.content-wrapper > * {\n  width: 100%;\n}\n\n.carousel-text__sub-heading {\n  margin-block-end: 32px;\n}\n.carousel-text__heading {\n  margin-block-end: 16px;\n  text-align: center;\n}\n.carousel-text-wrapper {\n  display: flex;\n  flex-direction: column;\n  height: 700px;\n  align-items: center;\n  justify-content: flex-end;\n  width: 100%;\n}\n@media (min-width: 0) and (max-width: 480px) {\n  .carousel-text-wrapper {\n    justify-content: center;\n  }\n}\n.carousel-text-wrapper button {\n  width: 100px;\n  color: #ffffff;\n}\n\n.skeleton--carousel {\n  height: 700px;\n}",""]),m.exports=c.toString()}}]);