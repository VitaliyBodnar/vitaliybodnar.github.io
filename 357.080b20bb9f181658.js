(self.webpackChunkmerch_store=self.webpackChunkmerch_store||[]).push([[357],{3400:(I,te,h)=>{var A=h(8524),E=h(7445)(A);E.push([I.id,":host {\n  width: 100%;\n}\n:host ::ng-deep lib-cart-summary-item .wrapper {\n  padding-block: 10px;\n}\n\n.wrapper.checkout {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  width: 100%;\n  padding: 24px 16px;\n}\n@media (min-width: 481px) and (max-width: 1024px) {\n  .wrapper.checkout {\n    padding: 28px 24px;\n    padding-top: 48px;\n  }\n}\n@media (min-width: 1200px) and (max-width: 19000px) {\n  .wrapper.checkout {\n    padding: 48px 24px;\n  }\n}\n\n.checkout-title .user-points-balance--skeleton {\n  max-width: 150px;\n}\n\n.checkout-content {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n@media (min-width: 1200px) and (max-width: 19000px) {\n  .checkout-content {\n    gap: 24px;\n    flex-direction: row;\n    align-items: start;\n    justify-content: space-between;\n  }\n}\n\n.checkout-sections {\n  flex: 1;\n}\n\n.cart-summary {\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n  display: none;\n}\n.cart-summary.visible {\n  opacity: 1;\n  visibility: visible;\n}\n@media (min-width: 1200px) and (max-width: 19000px) {\n  .cart-summary {\n    width: 30%;\n    display: block;\n  }\n}\n\n.accordion {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: 100%;\n  border-radius: 8px;\n}\n@media (min-width: 1024px) and (max-width: 19000px) {\n  .accordion {\n    gap: 24px;\n  }\n}\n\n.accordion-item {\n  display: block;\n  border-radius: 8px;\n}\n.accordion-item.expanded .accordion-item-header {\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.accordion-item.expanded .accordion-item-body {\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2) !important;\n}\n\n.accordion-item-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: #ffffff;\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2) !important;\n  padding: 16px 24px;\n  border-radius: 8px;\n}\n.accordion-item-header:hover {\n  cursor: pointer;\n  background-color: #ffffff;\n}\n.accordion-item-header .mat-icon {\n  display: block;\n}\n\n.accordion-item-body {\n  padding: 24px;\n}\n\n.summary-box {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  width: 100%;\n  min-height: 150px;\n}\n.summary-box .items {\n  display: flex;\n  flex-direction: column;\n}\n\n.summary-box--skeleton {\n  width: 100%;\n  height: 300px;\n}",""]),I.exports=E.toString()},960:(I,te,h)=>{var A=h(8524),E=h(7445)(A);E.push([I.id,'.checkout-order-review {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.checkout-order-review .label {\n  font-weight: bold;\n}\n.checkout-order-review .items {\n  padding-block-end: 24px;\n}\n.checkout-order-review__payment {\n  gap: 4px;\n}\n.checkout-order-review__row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 4px;\n}\n.checkout-order-review__row--billed-card {\n  margin-block-start: 20px;\n}\n.checkout-order-review__row--fit {\n  max-width: -moz-fit-content;\n  max-width: fit-content;\n}\n.checkout-order-review__row--points {\n  color: #398100;\n}\n.checkout-order-review__title {\n  display: block;\n  margin-block-end: 24px;\n}\n.checkout-order-review__line {\n  border: 1px solid #ccced0;\n  margin: 24px 0;\n}\n.checkout-order-review__purchase {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 5px;\n  margin-block-start: 20px;\n}\n.checkout-order-review__purchase-link {\n  position: relative;\n  width: -moz-fit-content;\n  width: fit-content;\n  cursor: pointer;\n}\n.checkout-order-review__purchase-link::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 1px;\n  width: 0;\n  background-color: #000000;\n  transition: width 0.25s ease-in-out;\n}\n.checkout-order-review__purchase-link:hover::after, .checkout-order-review__purchase-link.active::after {\n  width: 100%;\n}\n.checkout-order-review__action {\n  display: flex;\n  justify-content: flex-end;\n  margin-block-start: 40px;\n}\n.checkout-order-review__action button {\n  width: 280px;\n}\n.checkout-order-review ::ng-deep .carousel-slide img {\n  max-height: 158px;\n}',""]),I.exports=E.toString()},9694:(I,te,h)=>{var A=h(8524),E=h(7445)(A);E.push([I.id,":host ::ng-deep .mdc-notched-outline__leading {\n  border-top-left-radius: 8px !important;\n  border-bottom-left-radius: 8px !important;\n}\n:host ::ng-deep .mdc-notched-outline__trailing {\n  border-top-right-radius: 8px !important;\n  border-bottom-right-radius: 8px !important;\n}\n\n.checkout-payment-options {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n.checkout-payment-options__order {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.checkout-payment-options__order-row {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n.checkout-payment-options__order-row ::ng-deep mat-icon {\n  width: 15px !important;\n  height: 15px !important;\n}\n.checkout-payment-options__order-row ::ng-deep mat-icon svg {\n  width: 15px;\n  height: 15px;\n}\n.checkout-payment-options__order-line {\n  border: 1px solid #ccced0;\n}\n.checkout-payment-options__order--points {\n  color: #398100;\n}\n.checkout-payment-options__form {\n  display: flex;\n  flex-direction: column;\n  max-width: 343px;\n}\n.checkout-payment-options__form-field {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.checkout-payment-options__form-row {\n  display: flex;\n  gap: 16px;\n  align-items: flex-end;\n}\n.checkout-payment-options__form-expiration {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.checkout-payment-options__form-expiration-fields {\n  display: flex;\n  gap: 16px;\n}\n.checkout-payment-options__form-submit {\n  display: flex;\n  justify-content: flex-end;\n}\n.checkout-payment-options__form-submit button {\n  width: 280px;\n}",""]),I.exports=E.toString()},1392:(I,te,h)=>{var A=h(8524),E=h(7445)(A);E.push([I.id,".checkout-shipping-info {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.checkout-shipping-info .action-buttons {\n  display: flex;\n  flex-direction: row-reverse;\n}\n.checkout-shipping-info .action-buttons .proceed-to-payment-btn {\n  width: 100%;\n}\n@media (min-width: 1024px) and (max-width: 19000px) {\n  .checkout-shipping-info .action-buttons .proceed-to-payment-btn {\n    max-width: 280px;\n  }\n}\n.checkout-shipping-info .link-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n}\n.checkout-shipping-info .link-item:hover {\n  text-decoration: underline;\n}\n.checkout-shipping-info .link-item span,\n.checkout-shipping-info .link-item mat-icon {\n  display: block;\n}\n.checkout-shipping-info__section {\n  display: grid;\n  grid-template-columns: 1fr 3fr;\n  row-gap: 24px;\n  column-gap: 20px;\n  align-items: start;\n}\n.checkout-shipping-info__section > .label {\n  font-weight: bold;\n}\n.checkout-shipping-info__section > .body-1 {\n  grid-column: 2/3;\n}\n.checkout-shipping-info__update .body-1 {\n  display: flex;\n  flex-wrap: nowrap;\n  gap: 0.5rem;\n}\n.checkout-shipping-info__update .body-1 .link-item {\n  font-weight: 600;\n}",""]),I.exports=E.toString()},2357:(I,te,h)=>{"use strict";h.r(te),h.d(te,{CheckoutModule:()=>We,routes:()=>gt});var A=h(1635),C=h(6206),E=h(6661),_t=h(9529);var z,c,St=h(3400),yt=h.n(St),Te=h(2504),i=h(4438),x=h(32),Oe=h(4421),bt=h(1235),y=h(9417),ze=h(5351),Ee=h(8728),Be=h(5006),me=h(9090),kt=h(3921),Ct=h(2789),Je=h(9996),et=h(345),xt=h(9079);(c=z||(z={}))[c.Shipping=0]="Shipping",c[c.PaymentOptions=1]="PaymentOptions",c[c.OrderReview=2]="OrderReview";let Ae=class{dataService;formBuilder;cartService;router;checkoutService;utilityService;rewardsService;apiService;dialog;titleService;mainContentService;lStorage;shippingSectionTemplate=(0,i.ebz)("shippingSectionTemplate");paymentOptionsTemplate=(0,i.ebz)("paymentOptionsTemplate");orderReviewTemplate=(0,i.ebz)("orderReviewTemplate");cartDataService=(0,i.WQX)(x.Wv);authService=(0,i.WQX)(x.kX);userService=(0,i.WQX)(x.DL);skeletonService=(0,i.WQX)(Je.Rm);checkoutSections=(0,i.EWP)(()=>[{title:"Shipping",template:this.shippingSectionTemplate(),step:z.Shipping},{title:"Payment options",template:this.paymentOptionsTemplate(),step:z.PaymentOptions},{title:"Order review",template:this.orderReviewTemplate(),step:z.OrderReview}]);balance=this.userService.balance;expandedActiveStep=(0,i.vPA)(z.Shipping);updatedPointsRedeem=(0,i.vPA)(null);pointsRedeem=(0,i.EWP)(()=>null!==this.updatedPointsRedeem()?this.updatedPointsRedeem():this.productCard()?.subtotalPoints);checkoutStepEnum=z;productCard=this.cartDataService.productDetailsCart;alreadyExpanded=new Set;shippingInfo=(0,xt.ot)(this.userService.getUser());horizontalStepper;verticalStepper;main;shippingForm;states=Te.Ky;countries=Te.FS;deliveryForm;paymentForm;finalForm;months=new Array;years=new Array;selectedCountry=this.countries[0].value;userSubscription;user;cardData=new Te.bE;cardDataMK=new Te.Xk;shopcart;useBilling=!0;optionText;rewardsDeatilSubscription;rewardsDetail;externalRedemptionOrders;accountHistory;isLoading=!1;postFailed;isMiles;showAddrDisclaimer;msg;showSkipToContent;appSettings=(0,i.WQX)(Ct.uu);constructor(t,e,a,r,n,d,l,p,u,_,k,S){this.dataService=t,this.formBuilder=e,this.cartService=a,this.router=r,this.checkoutService=n,this.utilityService=d,this.rewardsService=l,this.apiService=p,this.dialog=u,this.titleService=_,this.mainContentService=k,this.lStorage=S}ngOnInit(){this.cartDataService.fetchProductCart(),this.utilityService.setSpinnerState(!1),this.showSkipToContent=!0,this.mainContentService.setCurrentPage("checkout"),this.mainContentService.getNavigationState().subscribe(t=>{"checkout"===t.page&&t.isFocus&&this.goToMain()}),this.msg=C.YM.poBoxDisclaimer,this.userSubscription=this.authService.currentUser.pipe((0,Ee.p)(t=>!!t)).subscribe(t=>{this.user=t,this.cardData=this.checkoutService.mapCardDataToLoginUser(this.cardData,t),this.cardDataMK=this.checkoutService.mapCardDataToLastShipped(this.cardDataMK,t),this.showAddrDisclaimer=C.YM.boxValues.some(e=>this.user.address.includes(e))}),this.months=this.dataService.getMonths(),this.years=this.dataService.getYears(),this.shippingForm=this.formBuilder.group({firstName:[{value:null,disabled:!0},y.k0.required],lastName:[{value:null,disabled:!0},y.k0.required],middleName:"",company:"",email:[{value:null,disabled:!0},y.k0.required],phone:[{value:null,disabled:!0}],city:[{value:null,disabled:!0},y.k0.required],state:[{value:null,disabled:!0},y.k0.required],zip:[{value:null,disabled:!0},y.k0.required],address:[{value:null,disabled:!0},y.k0.required],address1:[{value:null,disabled:!0}],address2:[{value:null,disabled:!0}],country:[{value:null,disabled:!0},y.k0.required],shipAndBillSame:!0}),this.rewardsDeatilSubscription=this.rewardsService.rewardDetails.subscribe(t=>{t&&t?.profileReferenceId&&(this.rewardsDetail=t,this.isMiles="miles"==this.rewardsDetail.associatedAccounts[0].rewardsBalance.rewardsCurrency.toLowerCase(),this.setShippingFormData())}),this.setCartData(),this.checkoutService.completeCustomerAddress(this.cardDataMK,this.showAddrDisclaimer),this.getPointHistory()}ngAfterViewInit(){}setExpandedActiveStep(t){this.expandedActiveStep.set(t),this.alreadyExpanded.add(t)}onSubmitPaymentOptions({pointsRedeem:t}){this.updatedPointsRedeem.set(t),this.setExpandedActiveStep(z.OrderReview)}updateStepperContent(t){t.forEach(e=>{e.removeAttribute("role"),e.removeAttribute("aria-labelledby"),"true"===e.getAttribute("aria-expanded")&&e.removeAttribute("aria-expanded")})}updateStepperHeaders(t){t.forEach(e=>{this.updateStepperHeader(e)})}updateStepperHeader(t){t.removeAttribute("role"),t.removeAttribute("aria-posinset"),t.removeAttribute("aria-setsize"),t.removeAttribute("aria-selected")}onTabEventUp(t){if("Tab"===t.key&&this.showSkipToContent)return t.preventDefault(),document.getElementById("skip-to-content-btn")?.focus(),void(this.showSkipToContent=!1)}goToMain(){document.getElementsByClassName("checkout-wrapper")[0].getElementsByClassName("only-screenreader")[0].setAttribute("tabindex","0"),this.main.nativeElement.focus()}setCartData(){this.cardDataMK.firstName=this.rewardsDetail.customerDetails.firstName,this.cardDataMK.lastName=this.rewardsDetail.customerDetails.lastName,this.cardDataMK.email=this.rewardsDetail.customerDetails.emailAddress?this.rewardsDetail.customerDetails.emailAddress:"",this.cardDataMK.city=this.rewardsDetail.customerDetails.address.city,this.cardDataMK.state=this.rewardsDetail.customerDetails.address.stateCode,this.cardDataMK.zip=this.rewardsDetail.customerDetails.address.postalCode,this.cardDataMK.address=this.rewardsDetail.customerDetails.address.addressLine1,this.cardDataMK.address1=this.rewardsDetail.customerDetails.address.addressLine2?this.rewardsDetail.customerDetails.address.addressLine2:"",this.cardDataMK.country=this.rewardsDetail.customerDetails.address.countryCode,this.cardDataMK.phone=this.rewardsDetail.customerDetails.telephoneNumber?this.rewardsDetail.customerDetails.telephoneNumber:"",this.cardDataMK.token=this.user.access_token,this.cardDataMK.UserID=this.user.userID,this.cardDataMK.total=this.cartService.shopcartValue.Total||""}setShippingFormData(){this.shippingForm.get("firstName")?.patchValue(this.rewardsDetail.customerDetails.firstName),this.shippingForm.get("lastName")?.patchValue(this.rewardsDetail.customerDetails.lastName),this.shippingForm.get("email")?.patchValue(this.rewardsDetail.customerDetails.emailAddress??""),this.shippingForm.get("city")?.patchValue(this.rewardsDetail.customerDetails.address.city??""),this.shippingForm.get("state")?.patchValue(this.rewardsDetail.customerDetails.address.stateCode??""),this.shippingForm.get("zip")?.patchValue(this.rewardsDetail.customerDetails.address.postalCode??""),this.shippingForm.get("address")?.patchValue(this.rewardsDetail.customerDetails.address.addressLine1??""),this.shippingForm.get("address2")?.patchValue(this.rewardsDetail.customerDetails.address.addressLine1??""),this.shippingForm.get("country")?.patchValue(this.rewardsDetail.customerDetails.address.countryCode??""),this.shippingForm.get("phone")?.patchValue(this.rewardsDetail.customerDetails.telephoneNumber??"")}selectionChange(t){switch(t.selectedIndex){case 0:case 1:case 2:break;case 3:this.shippingForm.controls.country.value&&(this.cardDataMK.country=this.shippingForm.controls.country.value)}}onChange(t){t.source.selected.viewValue}shipNext(){this.checkCart(!1),this.shippingForm.invalid&&this.utilityService.alertError("Sorry please correct your shipping values")}payNext(){this.checkCart(!1)}placeOrder(){this.setCartData(),this.checkoutService.setOrderZ(this.cardDataMK),this.checkCart(!0)}checkCart(t=!1){if(!this.user||null==this.user.userID||null==this.user.userID||null==this.user)return;this.apiService.post("Cart/GetCartWish",{}).subscribe(a=>{a?null!=this.cartService.cutCart(this.user.userID,a).shopcartlst&&t&&(this.postExternalRedemptionOrders(),this.cleanUp()):this.cartService.setEmptyShopCart()},a=>{console.log("error",a)})}mapCardDataMK(){const t=this.shippingForm.value;this.cardDataMK.UserID=this.user.userID,this.cardDataMK.total=this.cartService.shopcartValue.Total||"",this.cardDataMK.email=t.email,this.cardDataMK.phone=t.phone,this.cardDataMK.firstName=t.firstName,this.cardDataMK.lastName=t.lastName,this.cardDataMK.address=t.address,this.cardDataMK.address1=t.address1,this.cardDataMK.city=t.city,this.cardDataMK.state=t.state,this.cardDataMK.zip=t.zip,this.cardDataMK.country=t.country,this.cardDataMK.token=this.user.access_token}mapCardData(){const t=this.shippingForm.value;if(this.cardData.UserID=this.user.userID,this.cardData.total=this.cartService.shopcartValue.Total||"",this.cardData.email=t.email,this.cardData.firstName=t.firstName,this.cardData.lastName=t.lastName,this.cardData.address=t.address,this.cardData.city=t.city,this.cardData.zip=t.zip,this.paymentForm){const e=this.paymentForm.value;this.cardData.name=e.cardHolderName,this.cardData.number=e.cardNumber,this.cardData.cw=e.cvv,this.cardData.xpm=e.expiredMonth,this.cardData.xpy=e.expiredYear,this.cardData.amt=this.cartService.shopcartValue.AmountDue||""}}cleanUp(){this.horizontalStepper?._steps.forEach(t=>t.editable=!1),this.verticalStepper?._steps.forEach(t=>t.editable=!1)}reset(){this.horizontalStepper.reset(),this.verticalStepper.reset()}ngOnDestroy(){this.userSubscription.unsubscribe()}postExternalRedemptionOrders(){var t=this.rewardsDetail?this.rewardsDetail.associatedAccounts[0]?.associatedAccountReferenceId:"",e=this.rewardsDetail?this.rewardsDetail.associatedAccounts[0]?.rewardsBalance?.rewardsCurrency:"",a=this.rewardsDetail?this.rewardsDetail.associatedAccounts[0]?.redemptionOpportunities[0]?.redemptionCategory:"",n=(this.rewardsDetail&&this.rewardsDetail.associatedAccounts[0]?.redemptionOpportunities[0],{}),d=this.cartService.shopcartValue;n.redemptionCategory=a,n.redemptionSubcategory="GENERICMERCH",n.requestedRedemptionCurrency=e?.toUpperCase(),n.redemptionOrderItems=new Array,"MILES"==n.requestedRedemptionCurrency?d&&d?.shopcartlst&&d.shopcartlst.forEach(l=>{var p={redemptionAmount:+l.points*l.qty,redemptionOrderItemCashAmount:Math.round(100*(Number(+l.points*l.qty*.008)+Number.EPSILON))/100,redemptionOrderItemProperties:{}};n.redemptionOrderItems.push(p)}):d&&d?.shopcartlst&&d.shopcartlst.forEach(l=>{var p={redemptionAmount:+l.points*l.qty,redemptionOrderItemCashAmount:+l.points*l.qty*1,redemptionOrderItemProperties:{}};n.redemptionOrderItems.push(p)}),this.authService.sendLogMessage("pages","JN - posted to COF "+JSON.stringify(n)),this.authService.sendLogMessage("pages","JN - posted to COF(2) "+n.toString()),this.rewardsService.postExternalRedemptionOrders(t,this.rewardsDetail?this.rewardsDetail.profileReferenceId:"",n).pipe((0,Be.T)(l=>{if(l.errorDetails||"Failed"==l.redemptionOrderStatus){this.postFailed=!0,this.cartService.resetOrderItemIds();const p=new ze.ru;if(p.hasBackdrop=!0,p.disableClose=!0,p.autoFocus=!0,p.panelClass="custom-modalbox",p.height="fit-content",p.width="40%",l.errorDetails||"Failed"==l.redemptionOrderStatus)return p.data={message:l.errorDetails?"We were unable to complete your order at this time.":"Redemption Order Failed: "+l.redemptionOrderStatusCause},this.dialog.open(C.LD,p).afterClosed()}if(this.externalRedemptionOrders=l,l.hasOwnProperty("errorDetails")){if(l.errorDetails)return this.cartService.resetOrderItemIds(),void this.router.navigate(["/sys-error"])}else if("Failed"==l.redemptionOrderStatus)return this.cartService.resetOrderItemIds(),void this.router.navigate(["/sys-error"]);if("Success"!=this.externalRedemptionOrders?.redemptionOrderStatus&&(this.postFailed=!0,this.cartService.resetOrderItemIds()),this.externalRedemptionOrders.redemptionOrderItemResponses&&!this.postFailed)return this.externalRedemptionOrders.redemptionOrderItemResponses.forEach(p=>{var u={externalRedemptionOrderId:this.externalRedemptionOrders.externalRedemptionOrderId,redemptionOrderStatus:this.externalRedemptionOrders.redemptionOrderStatus,redemptionOrderStatusCause:this.externalRedemptionOrders.redemptionOrderStatusCause,lineOfBusiness:this.externalRedemptionOrders.lineOfBusinessCode,redemptionOrderItemId:p.redemptionOrderItemId,customerOrderNumber:p.customerOrderNumber,clientRedemptionOrderItemId:p.clientRedemptionOrderItemId.toLowerCase(),token:this.user.access_token};this.checkoutService.addOrderItemResponse(u),this.authService.sendLogMessage("pages","JN - check oir "+u)}),(0,Oe.of)([])}),(0,me.n)(()=>(this.checkoutService.completeCheckoutMK(this.cardDataMK,this.showAddrDisclaimer),(0,Oe.of)([]))),(0,kt.W)(l=>bt.w)).subscribe()}getPointHistory(){this.isLoading=!0;this.user&&this.user.access_token&&this.apiService.post("Recognition/AccountHistory",{}).subscribe(a=>{this.accountHistory=a,this.isLoading=!1},a=>{this.isLoading=!1})}static ctorParameters=()=>[{type:x.uS},{type:y.ok},{type:x.mx},{type:E.Ix},{type:x._o},{type:x.QY},{type:x.O1},{type:x.Gf},{type:ze.bZ},{type:et.hE},{type:x.oP},{type:x.n$}];static propDecorators={shippingSectionTemplate:[{type:i.Uct,args:["shippingSectionTemplate",{isSignal:!0}]}],paymentOptionsTemplate:[{type:i.Uct,args:["paymentOptionsTemplate",{isSignal:!0}]}],orderReviewTemplate:[{type:i.Uct,args:["orderReviewTemplate",{isSignal:!0}]}],horizontalStepper:[{type:i.Uct,args:["horizontalStepper"]}],verticalStepper:[{type:i.Uct,args:["verticalStepper"]}],main:[{type:i.Uct,args:["main"]}],onTabEventUp:[{type:i.Z$l,args:["window:keyup",["$event"]]}]}};Ae=(0,A.Cg)([(0,i.uAl)({selector:"app-checkout",template:'<div class="wrapper checkout">\n  <div class="checkout-title">\n    <div class="category-heading">Checkout</div>\n    @if (balance()) {\n      <div class="user-points-balance body-0">\n        {{ balance().points | number }} available pts | worth\n        {{ balance().points * balance().conversionRate | currency }}\n      </div>\n    } @else {\n      <div class="user-points-balance--skeleton">\n        <ng-container *ngTemplateOutlet="skeletonService.rectangleTemplate()"></ng-container>\n      </div>\n    }\n  </div>\n  <div class="checkout-content">\n    <div class="checkout-sections">\n      <cdk-accordion class="accordion">\n        @for (section of checkoutSections(); track section.title; let index = $index) {\n          <cdk-accordion-item\n            class="accordion-item"\n            role="button"\n            tabindex="0"\n            [expanded]="index === expandedActiveStep()"\n            [ngClass]="{ expanded: expandedActiveStep() === index }"\n          >\n            <div class="accordion-item-header" (click)="setExpandedActiveStep(section.step)">\n              <div class="subheading-2">{{ section.title }}</div>\n              @if ((expandedActiveStep() - 1 >= index || alreadyExpanded.has(index)) && expandedActiveStep() != index) {\n                <mat-icon svgIcon="ico_edit"></mat-icon>\n              }\n            </div>\n            <div\n              class="accordion-item-body"\n              role="region"\n              [style.display]="section.step === expandedActiveStep() ? \'\' : \'none\'"\n            >\n              <ng-container *ngTemplateOutlet="section.template"></ng-container>\n            </div>\n          </cdk-accordion-item>\n        }\n      </cdk-accordion>\n    </div>\n    <div class="cart-summary" [class.visible]="expandedActiveStep() !== checkoutStepEnum.OrderReview">\n      <cdk-accordion class="accordion">\n        <cdk-accordion-item\n          #accordionItem2="cdkAccordionItem"\n          class="accordion-item expanded"\n          role="button"\n          tabindex="0"\n        >\n          <div class="accordion-item-header">\n            <div class="subheading-2">Cart summary</div>\n          </div>\n          <div class="accordion-item-body" role="region" [style.display]="true">\n            <ng-container *ngTemplateOutlet="summaryBox"></ng-container>\n          </div>\n        </cdk-accordion-item>\n      </cdk-accordion>\n    </div>\n  </div>\n</div>\n\n<ng-template #summaryBox>\n  <div class="summary-box">\n    @if (productCard()) {\n      <div class="items">\n        @for (product of productCard()?.products; track product.productId) {\n          <lib-cart-summary-item [product]="product"></lib-cart-summary-item>\n        }\n      </div>\n      <app-cart-total-info [data]="productCard()" />\n    } @else {\n      <div class="summary-box--skeleton">\n        <ng-container *ngTemplateOutlet="skeletonService.rectangleTemplate()"></ng-container>\n      </div>\n    }\n  </div>\n</ng-template>\n\n<ng-template #shippingSectionTemplate>\n  <app-checkout-shipping-information\n    [hasSubmit]="true"\n    [hasUpdate]="true"\n    [shippingInfo]="shippingInfo()"\n    (submitAction)="setExpandedActiveStep(checkoutStepEnum.PaymentOptions)"\n  />\n</ng-template>\n\n<ng-template #paymentOptionsTemplate>\n  <app-checkout-payment-options\n    [productCard]="productCard()"\n    [pointsAvailable]="balance()?.points"\n    [conversionRate]="balance()?.conversionRate"\n    (submitAction)="onSubmitPaymentOptions($event)"\n  />\n</ng-template>\n\n<ng-template #orderReviewTemplate>\n  <app-checkout-order-review\n    [productCard]="productCard()"\n    [shippingInfo]="shippingInfo()"\n    [pointsRedeem]="pointsRedeem()"\n    [pointsAvailable]="balance()?.points"\n    [conversionRate]="balance()?.conversionRate"\n  />\n</ng-template>\n',styles:[yt()]}),(0,A.Sn)("design:paramtypes",[x.uS,y.ok,x.mx,E.Ix,x._o,x.QY,x.O1,x.Gf,ze.bZ,et.hE,x.oP,x.n$])],Ae);var R=h(177),Re=h(8834),W=h(9217),tt=h(9631),fe=h(6939),B=h(8617),ge=h(8203),w=h(7336),we=h(6860),Ie=h(5286),_e=h(3176),ve=h(7605);const Mt=["*"];function Tt(c,t){1&c&&i.SdG(0)}class Q{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}static{this.\u0275fac=function(e){return new(e||Q)(i.rXU(i.aKT))}}static{this.\u0275dir=i.FsC({type:Q,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}}class q{constructor(t){this.template=t}static{this.\u0275fac=function(e){return new(e||q)(i.rXU(i.C4Q))}}static{this.\u0275dir=i.FsC({type:q,selectors:[["","cdkStepLabel",""]],standalone:!0})}}let Ot=0;const F_NUMBER="number",F_EDIT="edit",F_DONE="done",F_ERROR="error",it=new i.nKC("STEPPER_GLOBAL_OPTIONS");class G{get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=t}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=t}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(t,e){this._stepper=t,this.interacted=!1,this.interactedStream=new i.bkB,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=e||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??null!=this._customError}static{this.\u0275fac=function(e){return new(e||G)(i.rXU((0,i.Rfq)(()=>N)),i.rXU(it,8))}}static{this.\u0275cmp=i.VBU({type:G,selectors:[["cdk-step"]],contentQueries:function(e,a,r){if(1&e&&i.wni(r,q,5),2&e){let n;i.mGM(n=i.lsd())&&(a.stepLabel=n.first)}},viewQuery:function(e,a){if(1&e&&i.GBs(i.C4Q,7),2&e){let r;i.mGM(r=i.lsd())&&(a.content=r.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[i.Mj6.None,"aria-label","ariaLabel"],ariaLabelledby:[i.Mj6.None,"aria-labelledby","ariaLabelledby"],state:"state",editable:[i.Mj6.HasDecoratorInputTransform,"editable","editable",i.L39],optional:[i.Mj6.HasDecoratorInputTransform,"optional","optional",i.L39],completed:[i.Mj6.HasDecoratorInputTransform,"completed","completed",i.L39],hasError:[i.Mj6.HasDecoratorInputTransform,"hasError","hasError",i.L39]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[i.GFd,i.OA$,i.aNF],ngContentSelectors:Mt,decls:1,vars:0,template:function(e,a){1&e&&(i.NAR(),i.DNE(0,Tt,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}}class N{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this.steps&&this._steps?(this._isValidIndex(t),this.selected?._markAsInteracted(),this._selectedIndex!==t&&!this._anyControlsInvalidOrPending(t)&&(t>=this._selectedIndex||this.steps.toArray()[t].editable)&&this._updateSelectedItemIndex(t)):this._selectedIndex=t}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}constructor(t,e,a){this._dir=t,this._changeDetectorRef=e,this._elementRef=a,this._destroyed=new Ie.B7,this.steps=new i.rOR,this._sortedHeaders=new i.rOR,this.linear=!1,this._selectedIndex=0,this.selectionChange=new i.bkB,this.selectedIndexChange=new i.bkB,this._orientation="horizontal",this._groupId=Ot++}ngAfterContentInit(){this._steps.changes.pipe((0,_e.Z)(this._steps),(0,ve.Q)(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(e=>e._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe((0,_e.Z)(this._stepHeader),(0,ve.Q)(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((e,a)=>e._elementRef.nativeElement.compareDocumentPosition(a._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new B.Bu(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:(0,Oe.of)()).pipe((0,_e.Z)(this._layoutDirection()),(0,ve.Q)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const e=t-this._selectedIndex;return e<0?"rtl"===this._layoutDirection()?"next":"previous":e>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,e=F_NUMBER){const a=this.steps.toArray()[t],r=this._isCurrentStep(t);return a._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(a,r):this._getGuidelineLogic(a,r,e)}_getDefaultIndicatorLogic(t,e){return t._showError()&&t.hasError&&!e?F_ERROR:!t.completed||e?F_NUMBER:t.editable?F_EDIT:F_DONE}_getGuidelineLogic(t,e,a=F_NUMBER){return t._showError()&&t.hasError&&!e?F_ERROR:t.completed&&!e?F_DONE:t.completed&&e?a:t.editable&&e?F_EDIT:a}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const e=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:e[t],previouslySelectedStep:e[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(t){const e=(0,w.rp)(t),a=t.keyCode,r=this._keyManager;null==r.activeItemIndex||e||a!==w.t6&&a!==w.Fm?r.setFocusOrigin("keyboard").onKeydown(t):(this.selectedIndex=r.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this.linear&&t>=0)&&this.steps.toArray().slice(0,t).some(e=>{const a=e.stepControl;return(a?a.invalid||a.pending||!e.interacted:!e.completed)&&!e.optional&&!e._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,e=(0,we.vc)();return t===e||t.contains(e)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}static{this.\u0275fac=function(e){return new(e||N)(i.rXU(ge.dS,8),i.rXU(i.gRc),i.rXU(i.aKT))}}static{this.\u0275dir=i.FsC({type:N,selectors:[["","cdkStepper",""]],contentQueries:function(e,a,r){if(1&e&&(i.wni(r,G,5),i.wni(r,Q,5)),2&e){let n;i.mGM(n=i.lsd())&&(a._steps=n),i.mGM(n=i.lsd())&&(a._stepHeader=n)}},inputs:{linear:[i.Mj6.HasDecoratorInputTransform,"linear","linear",i.L39],selectedIndex:[i.Mj6.HasDecoratorInputTransform,"selectedIndex","selectedIndex",i.Udg],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[i.GFd]})}}class ie{constructor(t){this._stepper=t,this.type="submit"}static{this.\u0275fac=function(e){return new(e||ie)(i.rXU(N))}}static{this.\u0275dir=i.FsC({type:ie,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(e,a){1&e&&i.bIt("click",function(){return a._stepper.next()}),2&e&&i.Mr5("type",a.type)},inputs:{type:"type"},standalone:!0})}}class ae{constructor(t){this._stepper=t,this.type="button"}static{this.\u0275fac=function(e){return new(e||ae)(i.rXU(N))}}static{this.\u0275dir=i.FsC({type:ae,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(e,a){1&e&&i.bIt("click",function(){return a._stepper.previous()}),2&e&&i.Mr5("type",a.type)},inputs:{type:"type"},standalone:!0})}}class Se{static{this.\u0275fac=function(e){return new(e||Se)}}static{this.\u0275mod=i.$C({type:Se,imports:[ge.jI,G,N,Q,q,ie,ae],exports:[G,N,Q,q,ie,ae]})}static{this.\u0275inj=i.G2t({imports:[ge.jI]})}}var b=h(6600),Ge=h(4337),Et=h(522),g=h(9969);function At(c,t){if(1&c&&i.eu8(0,2),2&c){const e=i.XpG();i.Y8G("ngTemplateOutlet",e.iconOverrides[e.state])("ngTemplateOutletContext",e._getIconContext())}}function Rt(c,t){if(1&c&&(i.j41(0,"span",7),i.EFF(1),i.k0s()),2&c){const e=i.XpG(2);i.R7$(),i.JRh(e._getDefaultTextForState(e.state))}}function wt(c,t){if(1&c&&(i.j41(0,"span",8),i.EFF(1),i.k0s()),2&c){const e=i.XpG(3);i.R7$(),i.JRh(e._intl.completedLabel)}}function It(c,t){if(1&c&&(i.j41(0,"span",8),i.EFF(1),i.k0s()),2&c){const e=i.XpG(3);i.R7$(),i.JRh(e._intl.editableLabel)}}function Dt(c,t){if(1&c&&(i.DNE(0,wt,2,1,"span",8)(1,It,2,1),i.j41(2,"mat-icon",7),i.EFF(3),i.k0s()),2&c){const e=i.XpG(2);i.vxM(0,"done"===e.state?0:"edit"===e.state?1:-1),i.R7$(3),i.JRh(e._getDefaultTextForState(e.state))}}function Nt(c,t){if(1&c&&i.DNE(0,Rt,2,1)(1,Dt,4,2),2&c){let e;const a=i.XpG();i.vxM(0,"number"===(e=a.state)?0:1)}}function Pt(c,t){1&c&&(i.j41(0,"div",4),i.eu8(1,9),i.k0s()),2&c&&(i.R7$(),i.Y8G("ngTemplateOutlet",t.template))}function Lt(c,t){if(1&c&&(i.j41(0,"div",4),i.EFF(1),i.k0s()),2&c){const e=i.XpG();i.R7$(),i.JRh(e.label)}}function Ft(c,t){if(1&c&&(i.j41(0,"div",5),i.EFF(1),i.k0s()),2&c){const e=i.XpG();i.R7$(),i.JRh(e._intl.optionalLabel)}}function Vt(c,t){if(1&c&&(i.j41(0,"div",6),i.EFF(1),i.k0s()),2&c){const e=i.XpG();i.R7$(),i.JRh(e.errorMessage)}}const at=["*"];function Ht(c,t){}function $t(c,t){if(1&c&&(i.SdG(0),i.DNE(1,Ht,0,0,"ng-template",0)),2&c){const e=i.XpG();i.R7$(),i.Y8G("cdkPortalOutlet",e._portal)}}const rt=(c,t)=>({step:c,i:t}),st=c=>({animationDuration:c}),nt=(c,t)=>({value:c,params:t});function Ut(c,t){1&c&&i.SdG(0)}function zt(c,t){1&c&&i.nrm(0,"div",6)}function Bt(c,t){if(1&c&&(i.eu8(0,5),i.DNE(1,zt,1,0,"div",6)),2&c){const e=t.$implicit,a=t.$index,r=t.$index,n=t.$count;i.XpG(2);const d=i.sdS(4);i.Y8G("ngTemplateOutlet",d)("ngTemplateOutletContext",i.l_i(3,rt,e,a)),i.R7$(),i.vxM(1,r!==n-1?1:-1)}}function Gt(c,t){if(1&c){const e=i.RV6();i.j41(0,"div",7),i.bIt("@horizontalStepTransition.done",function(r){i.eBV(e);const n=i.XpG(2);return i.Njj(n._animationDone.next(r))}),i.eu8(1,8),i.k0s()}if(2&c){const e=t.$implicit,a=t.$index,r=i.XpG(2);i.AVh("mat-horizontal-stepper-content-inactive",r.selectedIndex!==a),i.Y8G("@horizontalStepTransition",i.l_i(8,nt,r._getAnimationDirection(a),i.eq3(6,st,r._getAnimationDuration())))("id",r._getStepContentId(a)),i.BMQ("aria-labelledby",r._getStepLabelId(a)),i.R7$(),i.Y8G("ngTemplateOutlet",e.content)}}function Yt(c,t){if(1&c&&(i.j41(0,"div",1)(1,"div",2),i.Z7z(2,Bt,2,6,null,null,i.fX1),i.k0s(),i.j41(4,"div",3),i.Z7z(5,Gt,2,11,"div",4,i.fX1),i.k0s()()),2&c){const e=i.XpG();i.R7$(2),i.Dyx(e.steps),i.R7$(3),i.Dyx(e.steps)}}function Kt(c,t){if(1&c){const e=i.RV6();i.j41(0,"div",9),i.eu8(1,5),i.j41(2,"div",10)(3,"div",11),i.bIt("@verticalStepTransition.done",function(r){i.eBV(e);const n=i.XpG(2);return i.Njj(n._animationDone.next(r))}),i.j41(4,"div",12),i.eu8(5,8),i.k0s()()()()}if(2&c){const e=t.$implicit,a=t.$index,r=t.$index,n=t.$count,d=i.XpG(2),l=i.sdS(4);i.R7$(),i.Y8G("ngTemplateOutlet",l)("ngTemplateOutletContext",i.l_i(10,rt,e,a)),i.R7$(),i.AVh("mat-stepper-vertical-line",r!==n-1),i.R7$(),i.AVh("mat-vertical-stepper-content-inactive",d.selectedIndex!==a),i.Y8G("@verticalStepTransition",i.l_i(15,nt,d._getAnimationDirection(a),i.eq3(13,st,d._getAnimationDuration())))("id",d._getStepContentId(a)),i.BMQ("aria-labelledby",d._getStepLabelId(a)),i.R7$(2),i.Y8G("ngTemplateOutlet",e.content)}}function Xt(c,t){if(1&c&&i.Z7z(0,Kt,6,18,"div",9,i.fX1),2&c){const e=i.XpG();i.Dyx(e.steps)}}function jt(c,t){if(1&c){const e=i.RV6();i.j41(0,"mat-step-header",13),i.bIt("click",function(){const r=i.eBV(e).step;return i.Njj(r.select())})("keydown",function(r){i.eBV(e);const n=i.XpG();return i.Njj(n._onKeydown(r))}),i.k0s()}if(2&c){const e=t.step,a=t.i,r=i.XpG();i.AVh("mat-horizontal-stepper-header","horizontal"===r.orientation)("mat-vertical-stepper-header","vertical"===r.orientation),i.Y8G("tabIndex",r._getFocusIndex()===a?0:-1)("id",r._getStepLabelId(a))("index",a)("state",r._getIndicatorType(a,e.state))("label",e.stepLabel||e.label)("selected",r.selectedIndex===a)("active",r._stepIsNavigable(a,e))("optional",e.optional)("errorMessage",e.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple||!r._stepIsNavigable(a,e))("color",e.color||r.color),i.BMQ("aria-posinset",a+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(a))("aria-selected",r.selectedIndex==a)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null)("aria-disabled",!r._stepIsNavigable(a,e)||null)}}class V extends q{static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=i.xGo(V)))(a||V)}})()}static{this.\u0275dir=i.FsC({type:V,selectors:[["","matStepLabel",""]],standalone:!0,features:[i.Vt3]})}}class Y{constructor(){this.changes=new Ie.B7,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static{this.\u0275fac=function(e){return new(e||Y)}}static{this.\u0275prov=i.jDH({token:Y,factory:Y.\u0275fac,providedIn:"root"})}}const Wt={provide:Y,deps:[[new i.Xx1,new i.kdw,Y]],useFactory:function Zt(c){return c||new Y}};class K extends Q{constructor(t,e,a,r){super(a),this._intl=t,this._focusMonitor=e,this._intlSubscription=t.changes.subscribe(()=>r.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._elementRef,t,e):this._elementRef.nativeElement.focus(e)}_stringLabel(){return this.label instanceof V?null:this.label}_templateLabel(){return this.label instanceof V?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}static{this.\u0275fac=function(e){return new(e||K)(i.rXU(Y),i.rXU(B.FN),i.rXU(i.aKT),i.rXU(i.gRc))}}static{this.\u0275cmp=i.VBU({type:K,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(e,a){2&e&&i.HbH("mat-"+(a.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[i.Vt3,i.aNF],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(e,a){if(1&e&&(i.nrm(0,"div",0),i.j41(1,"div")(2,"div",1),i.DNE(3,At,1,2,"ng-container",2)(4,Nt,2,1),i.k0s()(),i.j41(5,"div",3),i.DNE(6,Pt,2,1,"div",4)(7,Lt,2,1)(8,Ft,2,1,"div",5)(9,Vt,2,1,"div",6),i.k0s()),2&e){let r;i.Y8G("matRippleTrigger",a._getHostElement())("matRippleDisabled",a.disableRipple),i.R7$(),i.ZvI("mat-step-icon-state-",a.state," mat-step-icon"),i.AVh("mat-step-icon-selected",a.selected),i.R7$(2),i.vxM(3,a.iconOverrides&&a.iconOverrides[a.state]?3:4),i.R7$(2),i.AVh("mat-step-label-active",a.active)("mat-step-label-selected",a.selected)("mat-step-label-error","error"==a.state),i.R7$(),i.vxM(6,(r=a._templateLabel())?6:a._stringLabel()?7:-1,r),i.R7$(2),i.vxM(8,a.optional&&"error"!=a.state?8:-1),i.R7$(),i.vxM(9,"error"===a.state?9:-1)}},dependencies:[b.r6,R.T3,W.An],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color);border-radius:var(--mat-stepper-header-hover-state-layer-shape)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color);border-radius:var(--mat-stepper-header-focus-state-layer-shape)}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color)}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color);background-color:var(--mat-stepper-header-icon-background-color)}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color)}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font);font-size:var(--mat-stepper-header-label-text-size);font-weight:var(--mat-stepper-header-label-text-weight);color:var(--mat-stepper-header-label-text-color)}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color)}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color);font-size:var(--mat-stepper-header-error-state-label-text-size)}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size);font-weight:var(--mat-stepper-header-selected-state-label-text-weight)}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color);color:var(--mat-stepper-header-selected-state-icon-foreground-color)}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color);color:var(--mat-stepper-header-edit-state-icon-foreground-color)}'],encapsulation:2,changeDetection:0})}}const ct={horizontalStepTransition:(0,g.hZ)("horizontalStepTransition",[(0,g.wk)("previous",(0,g.iF)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),(0,g.wk)("current",(0,g.iF)({transform:"none",visibility:"inherit"})),(0,g.wk)("next",(0,g.iF)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),(0,g.kY)("* => *",(0,g.Os)([(0,g.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),(0,g.P)("@*",(0,g.MA)(),{optional:!0})]),{params:{animationDuration:"500ms"}})]),verticalStepTransition:(0,g.hZ)("verticalStepTransition",[(0,g.wk)("previous",(0,g.iF)({height:"0px",visibility:"hidden"})),(0,g.wk)("next",(0,g.iF)({height:"0px",visibility:"hidden"})),(0,g.wk)("current",(0,g.iF)({height:"*",visibility:"inherit"})),(0,g.kY)("* <=> current",(0,g.Os)([(0,g.i0)("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),(0,g.P)("@*",(0,g.MA)(),{optional:!0})]),{params:{animationDuration:"225ms"}})])};class re{constructor(t){this.templateRef=t}static{this.\u0275fac=function(e){return new(e||re)(i.rXU(i.C4Q))}}static{this.\u0275dir=i.FsC({type:re,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[i.Mj6.None,"matStepperIcon","name"]},standalone:!0})}}class se{constructor(t){this._template=t}static{this.\u0275fac=function(e){return new(e||se)(i.rXU(i.C4Q))}}static{this.\u0275dir=i.FsC({type:se,selectors:[["ng-template","matStepContent",""]],standalone:!0})}}class X extends G{constructor(t,e,a,r){super(t,r),this._errorStateMatcher=e,this._viewContainerRef=a,this._isSelected=Ge.y.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe((0,me.n)(()=>this._stepper.selectionChange.pipe((0,Be.T)(t=>t.selectedStep===this),(0,_e.Z)(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new fe.VA(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,e){const a=this._errorStateMatcher.isErrorState(t,e),r=!!(t&&t.invalid&&this.interacted);return a||r}static{this.\u0275fac=function(e){return new(e||X)(i.rXU((0,i.Rfq)(()=>j)),i.rXU(b.es,4),i.rXU(i.c1b),i.rXU(it,8))}}static{this.\u0275cmp=i.VBU({type:X,selectors:[["mat-step"]],contentQueries:function(e,a,r){if(1&e&&(i.wni(r,V,5),i.wni(r,se,5)),2&e){let n;i.mGM(n=i.lsd())&&(a.stepLabel=n.first),i.mGM(n=i.lsd())&&(a._lazyContent=n.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[i.Jv_([{provide:b.es,useExisting:X},{provide:G,useExisting:X}]),i.Vt3,i.aNF],ngContentSelectors:at,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(e,a){1&e&&(i.NAR(),i.DNE(0,$t,2,1,"ng-template"))},dependencies:[fe.I3],encapsulation:2,changeDetection:0})}}class j extends N{get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}constructor(t,e,a){super(t,e,a),this._stepHeader=void 0,this._steps=void 0,this.steps=new i.rOR,this.animationDone=new i.bkB,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new Ie.B7,this._animationDuration="",this._isServer=!(0,i.WQX)(we.OD).isBrowser;const r=a.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===r?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:e})=>this._iconOverrides[t]=e),this.steps.changes.pipe((0,ve.Q)(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe((0,Et.F)((t,e)=>t.fromState===e.fromState&&t.toState===e.toState),(0,ve.Q)(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,e){return e.completed||this.selectedIndex===t||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:"horizontal"===this.orientation?"500ms":"225ms"}static{this.\u0275fac=function(e){return new(e||j)(i.rXU(ge.dS,8),i.rXU(i.gRc),i.rXU(i.aKT))}}static{this.\u0275cmp=i.VBU({type:j,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(e,a,r){if(1&e&&(i.wni(r,X,5),i.wni(r,re,5)),2&e){let n;i.mGM(n=i.lsd())&&(a._steps=n),i.mGM(n=i.lsd())&&(a._icons=n)}},viewQuery:function(e,a){if(1&e&&i.GBs(K,5),2&e){let r;i.mGM(r=i.lsd())&&(a._stepHeader=r)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(e,a){2&e&&(i.BMQ("aria-orientation",a.orientation),i.AVh("mat-stepper-horizontal","horizontal"===a.orientation)("mat-stepper-vertical","vertical"===a.orientation)("mat-stepper-label-position-end","horizontal"===a.orientation&&"end"==a.labelPosition)("mat-stepper-label-position-bottom","horizontal"===a.orientation&&"bottom"==a.labelPosition)("mat-stepper-header-position-bottom","bottom"===a.headerPosition))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[i.Jv_([{provide:N,useExisting:j}]),i.Vt3,i.aNF],ngContentSelectors:at,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","mat-horizontal-stepper-content-inactive"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(e,a){if(1&e&&(i.NAR(),i.DNE(0,Ut,1,0)(1,Yt,7,0)(2,Xt,2,0)(3,jt,1,23,"ng-template",null,0,i.C5r)),2&e){let r;i.vxM(0,a._isServer?0:-1),i.R7$(),i.vxM(1,"horizontal"===(r=a.orientation)?1:"vertical"===r?2:-1)}},dependencies:[R.T3,K],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font);background:var(--mat-stepper-container-color)}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color);top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[ct.horizontalStepTransition,ct.verticalStepTransition]},changeDetection:0})}}class ne extends ie{static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=i.xGo(ne)))(a||ne)}})()}static{this.\u0275dir=i.FsC({type:ne,selectors:[["button","matStepperNext",""]],hostAttrs:[1,"mat-stepper-next"],hostVars:1,hostBindings:function(e,a){2&e&&i.Mr5("type",a.type)},standalone:!0,features:[i.Vt3]})}}class oe extends ae{static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=i.xGo(oe)))(a||oe)}})()}static{this.\u0275dir=i.FsC({type:oe,selectors:[["button","matStepperPrevious",""]],hostAttrs:[1,"mat-stepper-previous"],hostVars:1,hostBindings:function(e,a){2&e&&i.Mr5("type",a.type)},standalone:!0,features:[i.Vt3]})}}class De{static{this.\u0275fac=function(e){return new(e||De)}}static{this.\u0275mod=i.$C({type:De,imports:[b.yE,R.MD,fe.jc,Se,W.m_,b.pZ,X,V,j,ne,oe,K,re,se],exports:[b.yE,X,V,j,ne,oe,K,re,se]})}static{this.\u0275inj=i.G2t({providers:[Wt,b.es],imports:[b.yE,R.MD,fe.jc,Se,W.m_,b.pZ,j,K,b.yE]})}}var qt=h(9694),Jt=h.n(qt),Ye=h(6577),le=h(2753),ei=h(9418),Ne=h(4670),Ke=h(3586),pt=h(2102),Pe=h(9493),ti=h(8841),ii=h(8002);const ai=["panel"],ri=["*"];function si(c,t){if(1&c){const e=i.RV6();i.j41(0,"div",1,0),i.bIt("@panelAnimation.done",function(r){i.eBV(e);const n=i.XpG();return i.Njj(n._animationDone.next(r))}),i.SdG(2),i.k0s()}if(2&c){const e=t.id,a=i.XpG();i.HbH(a._classList),i.AVh("mat-mdc-autocomplete-visible",a.showPanel)("mat-mdc-autocomplete-hidden",!a.showPanel)("mat-primary","primary"===a._color)("mat-accent","accent"===a._color)("mat-warn","warn"===a._color),i.Y8G("id",a.id)("@panelAnimation",a.isOpen?"visible":"hidden"),i.BMQ("aria-label",a.ariaLabel||null)("aria-labelledby",a._getPanelAriaLabelledby(e))}}const ni=(0,g.hZ)("panelAnimation",[(0,g.wk)("void, hidden",(0,g.iF)({opacity:0,transform:"scaleY(0.8)"})),(0,g.kY)(":enter, hidden => visible",[(0,g.Os)([(0,g.i0)("0.03s linear",(0,g.iF)({opacity:1})),(0,g.i0)("0.12s cubic-bezier(0, 0, 0.2, 1)",(0,g.iF)({transform:"scaleY(1)"}))])]),(0,g.kY)(":leave, visible => hidden",[(0,g.i0)("0.075s linear",(0,g.iF)({opacity:0}))])]);let oi=0;class li{constructor(t,e){this.source=t,this.option=e}}const ht=new i.nKC("mat-autocomplete-default-options",{providedIn:"root",factory:function ci(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});class ce{get isOpen(){return this._isOpen&&this.showPanel}_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}constructor(t,e,a,r){this._changeDetectorRef=t,this._elementRef=e,this._defaults=a,this._activeOptionChanges=Ge.y.EMPTY,this._animationDone=new i.bkB,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new i.bkB,this.opened=new i.bkB,this.closed=new i.bkB,this.optionActivated=new i.bkB,this.id="mat-autocomplete-"+oi++,this.inertGroups=r?.SAFARI||!1,this.autoActiveFirstOption=!!a.autoActiveFirstOption,this.autoSelectActiveOption=!!a.autoSelectActiveOption,this.requireSelection=!!a.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new B.Au(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const e=new li(this,t);this.optionSelected.emit(e)}_getPanelAriaLabelledby(t){if(this.ariaLabel)return null;const e=t?t+" ":"";return this.ariaLabelledby?e+this.ariaLabelledby:t}_skipPredicate(){return!1}static{this.\u0275fac=function(e){return new(e||ce)(i.rXU(i.gRc),i.rXU(i.aKT),i.rXU(ht),i.rXU(we.OD))}}static{this.\u0275cmp=i.VBU({type:ce,selectors:[["mat-autocomplete"]],contentQueries:function(e,a,r){if(1&e&&(i.wni(r,b.wT,5),i.wni(r,b.QC,5)),2&e){let n;i.mGM(n=i.lsd())&&(a.options=n),i.mGM(n=i.lsd())&&(a.optionGroups=n)}},viewQuery:function(e,a){if(1&e&&(i.GBs(i.C4Q,7),i.GBs(ai,5)),2&e){let r;i.mGM(r=i.lsd())&&(a.template=r.first),i.mGM(r=i.lsd())&&(a.panel=r.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[i.Mj6.None,"aria-label","ariaLabel"],ariaLabelledby:[i.Mj6.None,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[i.Mj6.HasDecoratorInputTransform,"autoActiveFirstOption","autoActiveFirstOption",i.L39],autoSelectActiveOption:[i.Mj6.HasDecoratorInputTransform,"autoSelectActiveOption","autoSelectActiveOption",i.L39],requireSelection:[i.Mj6.HasDecoratorInputTransform,"requireSelection","requireSelection",i.L39],panelWidth:"panelWidth",disableRipple:[i.Mj6.HasDecoratorInputTransform,"disableRipple","disableRipple",i.L39],classList:[i.Mj6.None,"class","classList"],hideSingleSelectionIndicator:[i.Mj6.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",i.L39]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[i.Jv_([{provide:b.is,useExisting:ce}]),i.GFd,i.aNF],ngContentSelectors:ri,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(e,a){1&e&&(i.NAR(),i.DNE(0,si,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape);box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[ni]},changeDetection:0})}}class ye{constructor(t){this.elementRef=t}static{this.\u0275fac=function(e){return new(e||ye)(i.rXU(i.aKT))}}static{this.\u0275dir=i.FsC({type:ye,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],standalone:!0})}}const pi={provide:y.kq,useExisting:(0,i.Rfq)(()=>pe),multi:!0};const dt=new i.nKC("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const c=(0,i.WQX)(le.hJ);return()=>c.scrollStrategies.reposition()}});const di={provide:dt,deps:[le.hJ],useFactory:function hi(c){return()=>c.scrollStrategies.reposition()}};class pe{constructor(t,e,a,r,n,d,l,p,u,_,k){this._element=t,this._overlay=e,this._viewContainerRef=a,this._zone=r,this._changeDetectorRef=n,this._dir=l,this._formField=p,this._document=u,this._viewportRuler=_,this._defaults=k,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Ge.y.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Ie.B7,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=(0,ei.v)(()=>{const S=this.autocomplete?this.autocomplete.options:null;return S?S.changes.pipe((0,_e.Z)(S),(0,me.n)(()=>(0,Ne.h)(...S.map(o=>o.onSelectionChange)))):this._zone.onStable.pipe((0,Pe.s)(1),(0,me.n)(()=>this.optionSelections))}),this._handlePanelKeydown=S=>{(S.keyCode===w._f&&!(0,w.rp)(S)||S.keyCode===w.i7&&(0,w.rp)(S,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),S.stopPropagation(),S.preventDefault())},this._trackedModal=null,this._scrollStrategy=d}ngAfterViewInit(){const t=this._getWindow();typeof t<"u"&&this._zone.runOutsideAngular(()=>t.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const t=this._getWindow();typeof t<"u"&&t.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&(0,B.Ae)(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,Ne.h)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Ee.p)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Ee.p)(()=>this._overlayAttached)):(0,Oe.of)()).pipe((0,Be.T)(t=>t instanceof b.MI?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,Ne.h)((0,Ke.R)(this._document,"click"),(0,Ke.R)(this._document,"auxclick"),(0,Ke.R)(this._document,"touchend")).pipe((0,Ee.p)(t=>{const e=(0,we.Fb)(t),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,r=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&e!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(e))&&(!r||!r.contains(e))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(e)}))}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const e=t.keyCode,a=(0,w.rp)(t);if(e===w._f&&!a&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&e===w.Fm&&this.panelOpen&&!a)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const r=this.autocomplete._keyManager.activeItem,n=e===w.i7||e===w.n6;e===w.wn||n&&!a&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):n&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(n||this.autocomplete._keyManager.activeItem!==r)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let e=t.target,a=e.value;if("number"===e.type&&(a=""==a?null:parseFloat(a)),this._previousValue!==a){if(this._previousValue=a,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(a),a){if(this.panelOpen&&!this.autocomplete.requireSelection){const r=this.autocomplete.options?.find(n=>n.selected);if(r){a!==this._getDisplayValue(r.value)&&r.deselect(!1)}}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===t.target){const r=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(r)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=this._zone.onStable.pipe((0,Pe.s)(1)),e=this.autocomplete.options.changes.pipe((0,ti.M)(()=>this._positionStrategy.reapplyLastPosition()),(0,ii.c)(0));return(0,Ne.h)(t,e).pipe((0,me.n)(()=>(this._zone.run(()=>{const a=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),a!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,Pe.s)(1)).subscribe(a=>this._setValueAndClose(a))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){const e=this.autocomplete;return e&&e.displayWith?e.displayWith(t):t}_assignOptionValue(t){const e=this._getDisplayValue(t);null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(e??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const e=this.autocomplete,a=t?t.source:this._pendingAutoselectedOption;a?(this._clearPreviousSelectedOption(a),this._assignOptionValue(a.value),this._onChange(a.value),e._emitSelectEvent(a),this._element.nativeElement.focus()):e.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),e._animationDone?e._animationDone.pipe((0,Pe.s)(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,e){this.autocomplete?.options?.forEach(a=>{a!==t&&a.selected&&a.deselect(e)})}_openPanelInternal(t=this._element.nativeElement.value){if(this._attachOverlay(t),this._floatLabel(),this._trackedModal){const e=this.autocomplete.id;(0,B.px)(this._trackedModal,"aria-owns",e)}}_attachOverlay(t){this.autocomplete;let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new fe.VA(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const a=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&a!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new le.rR({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],a=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:a},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:a}];let n;n="above"===this.position?r:"below"===this.position?e:[...e,...r],t.withPositions(n)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let e=-1;for(let a=0;a<t.options.length;a++)if(!t.options.get(a).disabled){e=a;break}t._keyManager.setActiveItem(e)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(t){const e=this.autocomplete,a=(0,b.jb)(t,e.options,e.optionGroups);if(0===t&&1===a)e._setScrollTop(0);else if(e.panel){const r=e.options.toArray()[t];if(r){const n=r._getHostElement(),d=(0,b.TL)(n.offsetTop,n.offsetHeight,e._getScrollTop(),e.panel.nativeElement.offsetHeight);e._setScrollTop(d)}}}_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const e=this.autocomplete.id;this._trackedModal&&(0,B.Ae)(this._trackedModal,"aria-owns",e),(0,B.px)(t,"aria-owns",e),this._trackedModal=t}_clearFromModal(){if(this._trackedModal){const t=this.autocomplete.id;(0,B.Ae)(this._trackedModal,"aria-owns",t),this._trackedModal=null}}static{this.\u0275fac=function(e){return new(e||pe)(i.rXU(i.aKT),i.rXU(le.hJ),i.rXU(i.c1b),i.rXU(i.SKi),i.rXU(i.gRc),i.rXU(dt),i.rXU(ge.dS,8),i.rXU(pt.xb,9),i.rXU(R.qQ,8),i.rXU(Ye.Xj),i.rXU(ht,8))}}static{this.\u0275dir=i.FsC({type:pe,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(e,a){1&e&&i.bIt("focusin",function(){return a._handleFocus()})("blur",function(){return a._onTouched()})("input",function(n){return a._handleInput(n)})("keydown",function(n){return a._handleKeydown(n)})("click",function(){return a._handleClick()}),2&e&&i.BMQ("autocomplete",a.autocompleteAttribute)("role",a.autocompleteDisabled?null:"combobox")("aria-autocomplete",a.autocompleteDisabled?null:"list")("aria-activedescendant",a.panelOpen&&a.activeOption?a.activeOption.id:null)("aria-expanded",a.autocompleteDisabled?null:a.panelOpen.toString())("aria-controls",a.autocompleteDisabled||!a.panelOpen||null==a.autocomplete?null:a.autocomplete.id)("aria-haspopup",a.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[i.Mj6.None,"matAutocomplete","autocomplete"],position:[i.Mj6.None,"matAutocompletePosition","position"],connectedTo:[i.Mj6.None,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[i.Mj6.None,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[i.Mj6.HasDecoratorInputTransform,"matAutocompleteDisabled","autocompleteDisabled",i.L39]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[i.Jv_([pi]),i.GFd,i.OA$]})}}class Le{static{this.\u0275fac=function(e){return new(e||Le)}}static{this.\u0275mod=i.$C({type:Le,imports:[le.z_,b.Sy,b.yE,R.MD,ce,pe,ye],exports:[Ye.Gj,ce,b.Sy,b.yE,pe,ye]})}static{this.\u0275inj=i.G2t({providers:[di],imports:[le.z_,b.Sy,b.yE,R.MD,Ye.Gj,b.Sy,b.yE]})}}var s,ui=h(5596),mi=h(4823),fi=h(4523);!function(c){c.SEPARATOR="separator",c.PERCENT="percent",c.IP="IP",c.CPF_CNPJ="CPF_CNPJ",c.MONTH="M",c.MONTHS="M0",c.MINUTE="m",c.HOUR="h",c.HOURS="H",c.MINUTES="m0",c.HOURS_HOUR="Hh",c.SECONDS="s0",c.HOURS_MINUTES_SECONDS="Hh:m0:s0",c.EMAIL_MASK="A*@A*.A*",c.HOURS_MINUTES="Hh:m0",c.MINUTES_SECONDS="m0:s0",c.DAYS_MONTHS_YEARS="d0/M0/0000",c.DAYS_MONTHS="d0/M0",c.DAYS="d0",c.DAY="d",c.SECOND="s",c.LETTER_S="S",c.DOT=".",c.COMMA=",",c.CURLY_BRACKETS_LEFT="{",c.CURLY_BRACKETS_RIGHT="}",c.MINUS="-",c.OR="||",c.HASH="#",c.EMPTY_STRING="",c.SYMBOL_STAR="*",c.SYMBOL_QUESTION="?",c.SLASH="/",c.WHITE_SPACE=" ",c.NUMBER_ZERO="0",c.NUMBER_NINE="9",c.BACKSPACE="Backspace",c.DELETE="Delete",c.ARROW_LEFT="ArrowLeft",c.ARROW_UP="ArrowUp",c.DOUBLE_ZERO="00"}(s||(s={}));const be=new i.nKC("ngx-mask config"),ut=new i.nKC("new ngx-mask config"),mt=new i.nKC("initial ngx-mask config"),gi={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:null,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:c=>c,outputTransformFn:c=>c,maskFilled:new i.bkB,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},_i=[s.HOURS_MINUTES_SECONDS,s.HOURS_MINUTES,s.MINUTES_SECONDS],vi=[s.PERCENT,s.HOURS_HOUR,s.SECONDS,s.MINUTES,s.SEPARATOR,s.DAYS_MONTHS_YEARS,s.DAYS_MONTHS,s.DAYS,s.MONTHS];class ke{_config=(0,i.WQX)(be);dropSpecialCharacters=this._config.dropSpecialCharacters;hiddenInput=this._config.hiddenInput;showTemplate;clearIfNotMatch=this._config.clearIfNotMatch;specialCharacters=this._config.specialCharacters;patterns=this._config.patterns;prefix=this._config.prefix;suffix=this._config.suffix;thousandSeparator=this._config.thousandSeparator;decimalMarker=this._config.decimalMarker;customPattern;showMaskTyped=this._config.showMaskTyped;placeHolderCharacter=this._config.placeHolderCharacter;validation=this._config.validation;separatorLimit=this._config.separatorLimit;allowNegativeNumbers=this._config.allowNegativeNumbers;leadZeroDateTime=this._config.leadZeroDateTime;leadZero=this._config.leadZero;apm=this._config.apm;inputTransformFn=this._config.inputTransformFn;outputTransformFn=this._config.outputTransformFn;keepCharacterPositions=this._config.keepCharacterPositions;_shift=new Set;plusOnePosition=!1;maskExpression="";actualValue="";showKeepCharacterExp="";shownMaskExpression="";deletedSpecialCharacter=!1;ipError;cpfCnpjError;applyMaskWithPattern(t,e){const[a,r]=e;return this.customPattern=r,this.applyMask(t,a)}applyMask(t,e,a=0,r=!1,n=!1,d=(()=>{})){if(!e||"string"!=typeof t)return s.EMPTY_STRING;let l=0,p="",u=!1,_=!1,k=1,S=!1,o=t,f=a;o.slice(0,this.prefix.length)===this.prefix&&(o=o.slice(this.prefix.length,o.length)),this.suffix&&o.length>0&&(o=this.checkAndRemoveSuffix(o)),"("===o&&this.prefix&&(o="");const T=o.toString().split(s.EMPTY_STRING);if(this.allowNegativeNumbers&&o.slice(l,l+1)===s.MINUS&&(p+=o.slice(l,l+1)),e===s.IP){const v=o.split(s.DOT);this.ipError=this._validIP(v),e="099.099.099.099"}const $=[];for(let v=0;v<o.length;v++)o[v]?.match("\\d")&&$.push(o[v]??s.EMPTY_STRING);if(e===s.CPF_CNPJ&&(this.cpfCnpjError=11!==$.length&&14!==$.length,e=$.length>11?"00.000.000/0000-00":"000.000.000-00"),e.startsWith(s.PERCENT)){if(o.match("[a-z]|[A-Z]")||o.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!n){o=this._stripToDecimal(o);const D=this.getPrecision(e);o=this.checkInputPrecision(o,D,this.decimalMarker)}const v="string"==typeof this.decimalMarker?this.decimalMarker:s.DOT;if(o.indexOf(v)>0&&!this.percentage(o.substring(0,o.indexOf(v)))){let D=o.substring(0,o.indexOf(v)-1);this.allowNegativeNumbers&&o.slice(l,l+1)===s.MINUS&&!n&&(D=o.substring(0,o.indexOf(v))),o=`${D}${o.substring(o.indexOf(v),o.length)}`}let m="";m=this.allowNegativeNumbers&&o.slice(l,l+1)===s.MINUS?`${s.MINUS}${o.slice(l+1,l+o.length)}`:o,p=this.percentage(m)?this._splitPercentZero(o):this._splitPercentZero(o.substring(0,o.length-1))}else if(e.startsWith(s.SEPARATOR)){(o.match("[w\u0430-\u044f\u0410-\u042f]")||o.match("[\u0401\u0451\u0410-\u044f]")||o.match("[a-z]|[A-Z]")||o.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||o.match("[^A-Za-z0-9,]"))&&(o=this._stripToDecimal(o));const v=this.getPrecision(e),m=Array.isArray(this.decimalMarker)?this.thousandSeparator===s.DOT?s.COMMA:s.DOT:this.decimalMarker;if(0===v?o=this.allowNegativeNumbers?o.length>2&&o[0]===s.MINUS&&o[1]===s.NUMBER_ZERO&&o[2]!==this.thousandSeparator&&o[2]!==s.COMMA&&o[2]!==s.DOT?"-"+o.slice(2,o.length):o[0]===s.NUMBER_ZERO&&o.length>1&&o[1]!==this.thousandSeparator&&o[1]!==s.COMMA&&o[1]!==s.DOT?o.slice(1,o.length):o:o.length>1&&o[0]===s.NUMBER_ZERO&&o[1]!==this.thousandSeparator&&o[1]!==s.COMMA&&o[1]!==s.DOT?o.slice(1,o.length):o:(o[0]===m&&o.length>1&&(o=s.NUMBER_ZERO+o.slice(0,o.length+1),this.plusOnePosition=!0),o[0]===s.NUMBER_ZERO&&o[1]!==m&&o[1]!==this.thousandSeparator&&(o=o.length>1?o.slice(0,1)+m+o.slice(1,o.length+1):o,this.plusOnePosition=!0),this.allowNegativeNumbers&&o[0]===s.MINUS&&(o[1]===m||o[1]===s.NUMBER_ZERO)&&(o=o[1]===m&&o.length>2?o.slice(0,1)+s.NUMBER_ZERO+o.slice(1,o.length):o[1]===s.NUMBER_ZERO&&o.length>2&&o[2]!==m?o.slice(0,2)+m+o.slice(2,o.length):o,this.plusOnePosition=!0)),n){const M=o.slice(this._findFirstNonZeroDigitIndex(o),o.length),ee=o[f]===s.NUMBER_ZERO||o[f]===m,Z=o[0]===s.NUMBER_ZERO,ue=o[0]===s.MINUS,$e=o[0]===this.thousandSeparator,Me=o[1]===m,Ue=o[1]===s.NUMBER_ZERO,qe=o[2]===m;Z&&Me&&ee&&f<2&&(o=M),ue&&Ue&&qe&&ee&&f<3&&(o=s.MINUS+M),M!==s.MINUS&&(0===f&&(Z||$e)||this.allowNegativeNumbers&&1===f&&ue&&!Ue)&&(o=ue?s.MINUS+M:M)}const D=this._charToRegExpExpression(this.thousandSeparator);let O='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(D,"");if(Array.isArray(this.decimalMarker))for(const M of this.decimalMarker)O=O.replace(this._charToRegExpExpression(M),s.EMPTY_STRING);else O=O.replace(this._charToRegExpExpression(this.decimalMarker),"");const P=new RegExp("["+O+"]");o.match(P)&&(o=o.substring(0,o.length-1)),o=this.checkInputPrecision(o,v,this.decimalMarker);const U=o.replace(new RegExp(D,"g"),"");p=this._formatWithSeparators(U,this.thousandSeparator,this.decimalMarker,v);const Qe=p.indexOf(s.COMMA)-o.indexOf(s.COMMA),L=p.length-o.length,He=n&&p.length<t.length&&this.separatorLimit;if((p[f-1]===this.thousandSeparator||p[f-this.prefix.length])&&this.prefix&&n)f-=1;else if(L>0&&p[f]!==this.thousandSeparator||He){_=!0;let M=0;do{this._shift.add(f+M),M++}while(M<L)}else p[f-1]===this.thousandSeparator||-4===L||-3===L||p[f]===this.thousandSeparator?(this._shift.clear(),this._shift.add(f-1)):0!==Qe&&f>0&&!(p.indexOf(s.COMMA)>=f&&f>3)||!(p.indexOf(s.DOT)>=f&&f>3)&&L<=0?(this._shift.clear(),_=!0,k=L,f+=L,this._shift.add(f)):this._shift.clear()}else for(let v=0,m=T[0];v<T.length&&l!==e.length;v++,m=T[v]??s.EMPTY_STRING){const D=s.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(m,e[l]??s.EMPTY_STRING)&&e[l+1]===s.SYMBOL_QUESTION)p+=m,l+=2;else if(e[l+1]===s.SYMBOL_STAR&&u&&this._checkSymbolMask(m,e[l+2]??s.EMPTY_STRING))p+=m,l+=3,u=!1;else if(this._checkSymbolMask(m,e[l]??s.EMPTY_STRING)&&e[l+1]===s.SYMBOL_STAR&&!D)p+=m,u=!0;else if(e[l+1]===s.SYMBOL_QUESTION&&this._checkSymbolMask(m,e[l+2]??s.EMPTY_STRING))p+=m,l+=3;else if(this._checkSymbolMask(m,e[l]??s.EMPTY_STRING)){if(e[l]===s.HOURS&&(this.apm?Number(m)>9:Number(m)>2)){f=this.leadZeroDateTime?f:f+1,l+=1,this._shiftStep(e,l,T.length),v--,this.leadZeroDateTime&&(p+="0");continue}if(e[l]===s.HOUR&&(this.apm?1===p.length&&Number(p)>1||"1"===p&&Number(m)>2||1===o.slice(l-1,l).length&&Number(o.slice(l-1,l))>2||"1"===o.slice(l-1,l)&&Number(m)>2:"2"===p&&Number(m)>3||("2"===p.slice(l-2,l)||"2"===p.slice(l-3,l)||"2"===p.slice(l-4,l)||"2"===p.slice(l-1,l))&&Number(m)>3&&l>10)){f+=1,l+=1,v--;continue}if((e[l]===s.MINUTE||e[l]===s.SECOND)&&Number(m)>5){f=this.leadZeroDateTime?f:f+1,l+=1,this._shiftStep(e,l,T.length),v--,this.leadZeroDateTime&&(p+="0");continue}const O=31,P=o[l],U=o[l+1],Qe=o[l+2],L=o[l-1],He=o[l-2],M=o.slice(l-3,l-1),ee=o.slice(l-1,l+1),Z=o.slice(l,l+2),ue=o.slice(l-2,l);if(e[l]===s.DAY){const $e=e.slice(0,2)===s.MONTHS,Me=e.slice(0,2)===s.MONTHS&&this.specialCharacters.includes(He);if(Number(m)>3&&this.leadZeroDateTime||!$e&&(Number(Z)>O||Number(ee)>O||this.specialCharacters.includes(U))||(Me?Number(ee)>O||!this.specialCharacters.includes(P)&&this.specialCharacters.includes(Qe)||this.specialCharacters.includes(P):Number(Z)>O||this.specialCharacters.includes(U)&&!n)){f=this.leadZeroDateTime?f:f+1,l+=1,this._shiftStep(e,l,T.length),v--,this.leadZeroDateTime&&(p+="0");continue}}if(e[l]===s.MONTH){const Me=0===l&&(Number(m)>2||Number(Z)>12||this.specialCharacters.includes(U)&&!n),Ue=e.slice(l+2,l+3),qe=M.includes(Ue)&&e.includes("d0")&&(this.specialCharacters.includes(He)&&Number(ee)>12&&!this.specialCharacters.includes(P)||this.specialCharacters.includes(P)),Ti=Number(M)<=O&&!this.specialCharacters.includes(M)&&this.specialCharacters.includes(L)&&(Number(Z)>12||this.specialCharacters.includes(U)),Oi=Number(Z)>12&&5===l||this.specialCharacters.includes(U)&&5===l,Ei=Number(M)>O&&!this.specialCharacters.includes(M)&&!this.specialCharacters.includes(ue)&&Number(ue)>12&&e.includes("d0"),Ai=Number(M)<=O&&!this.specialCharacters.includes(M)&&!this.specialCharacters.includes(L)&&Number(ee)>12;if(Number(m)>1&&this.leadZeroDateTime||Me||qe||Ai||Ei||Ti||Oi&&!this.leadZeroDateTime){f=this.leadZeroDateTime?f:f+1,l+=1,this._shiftStep(e,l,T.length),v--,this.leadZeroDateTime&&(p+="0");continue}}p+=m,l++}else this.specialCharacters.includes(m)&&e[l]===m?(p+=m,l++):-1!==this.specialCharacters.indexOf(e[l]??s.EMPTY_STRING)?(p+=e[l],l++,this._shiftStep(e,l,T.length),v--):e[l]===s.NUMBER_NINE&&this.showMaskTyped?this._shiftStep(e,l,T.length):this.patterns[e[l]??s.EMPTY_STRING]&&this.patterns[e[l]??s.EMPTY_STRING]?.optional?(T[l]&&"099.099.099.099"!==e&&"000.000.000-00"!==e&&"00.000.000/0000-00"!==e&&!e.match(/^9+\.0+$/)&&!this.patterns[e[l]??s.EMPTY_STRING]?.optional&&(p+=T[l]),e.includes(s.NUMBER_NINE+s.SYMBOL_STAR)&&e.includes(s.NUMBER_ZERO+s.SYMBOL_STAR)&&l++,l++,v--):this.maskExpression[l+1]===s.SYMBOL_STAR&&this._findSpecialChar(this.maskExpression[l+2]??s.EMPTY_STRING)&&this._findSpecialChar(m)===this.maskExpression[l+2]&&u||this.maskExpression[l+1]===s.SYMBOL_QUESTION&&this._findSpecialChar(this.maskExpression[l+2]??s.EMPTY_STRING)&&this._findSpecialChar(m)===this.maskExpression[l+2]&&u?(l+=3,p+=m):this.showMaskTyped&&this.specialCharacters.indexOf(m)<0&&m!==this.placeHolderCharacter&&1===this.placeHolderCharacter.length&&(S=!0)}p.length+1===e.length&&-1!==this.specialCharacters.indexOf(e[e.length-1]??s.EMPTY_STRING)&&(p+=e[e.length-1]);let J=f+1;for(;this._shift.has(J);)k++,J++;let Ce=r&&!e.startsWith(s.SEPARATOR)?l:this._shift.has(f)?k:0;S&&Ce--,d(Ce,_),k<0&&this._shift.clear();let xe=!1;n&&(xe=T.every(v=>this.specialCharacters.includes(v)));let de=`${this.prefix}${xe?s.EMPTY_STRING:p}${this.showMaskTyped?"":this.suffix}`;0===p.length&&(de=this.dropSpecialCharacters?`${p}`:`${this.prefix}${p}`);const Ve=1===o.length&&this.specialCharacters.includes(e[0])&&o!==e[0];if(!this._checkSymbolMask(o,e[1])&&Ve)return"";if(p.includes(s.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(n&&p===s.MINUS)return"";de=`${s.MINUS}${this.prefix}${p.split(s.MINUS).join(s.EMPTY_STRING)}${this.suffix}`}return de}_findDropSpecialChar(t){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(e=>e===t):this._findSpecialChar(t)}_findSpecialChar(t){return this.specialCharacters.find(e=>e===t)}_checkSymbolMask(t,e){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[e]?.pattern&&this.patterns[e]?.pattern.test(t))??!1}_formatWithSeparators=(t,e,a,r)=>{let n=[],d="";if(Array.isArray(a)){const k=new RegExp(a.map(S=>"[\\^$.|?*+()".indexOf(S)>=0?`\\${S}`:S).join("|"));n=t.split(k),d=t.match(k)?.[0]??s.EMPTY_STRING}else n=t.split(a),d=a;const l=n.length>1?`${d}${n[1]}`:s.EMPTY_STRING;let p=n[0]??s.EMPTY_STRING;const u=this.separatorLimit.replace(/\s/g,s.EMPTY_STRING);u&&+u&&(p=p[0]===s.MINUS?`-${p.slice(1,p.length).slice(0,u.length)}`:p.slice(0,u.length));const _=/(\d+)(\d{3})/;for(;e&&_.test(p);)p=p.replace(_,"$1"+e+"$2");return typeof r>"u"?p+l:0===r?p:p+l.substring(0,r+1)};percentage=t=>{const e=t.replace(",","."),a=Number(this.allowNegativeNumbers&&t.includes(s.MINUS)?e.slice(1,t.length):e);return!isNaN(a)&&a>=0&&a<=100};getPrecision=t=>{const e=t.split(s.DOT);return e.length>1?Number(e[e.length-1]):1/0};checkAndRemoveSuffix=t=>{for(let e=this.suffix?.length-1;e>=0;e--){const a=this.suffix.substring(e,this.suffix?.length);if(t.includes(a)&&e!==this.suffix?.length-1&&(e-1<0||!t.includes(this.suffix.substring(e-1,this.suffix?.length))))return t.replace(a,s.EMPTY_STRING)}return t};checkInputPrecision=(t,e,a)=>{let r=t,n=a;if(e<1/0){if(Array.isArray(n)){const u=n.find(_=>_!==this.thousandSeparator);n=u||n[0]}const d=new RegExp(this._charToRegExpExpression(n)+`\\d{${e}}.*$`),l=r.match(d),p=(l&&l[0]?.length)??0;if(p-1>e){const u=p-1-e;r=r.substring(0,r.length-u)}0===e&&this._compareOrIncludes(r[r.length-1],n,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r};_stripToDecimal(t){return t.split(s.EMPTY_STRING).filter((e,a)=>{const r="string"==typeof this.decimalMarker?e===this.decimalMarker:this.decimalMarker.includes(e);return e.match("^-?\\d")||e===this.thousandSeparator||r||e===s.MINUS&&0===a&&this.allowNegativeNumbers}).join(s.EMPTY_STRING)}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,e,a){const r=/[*?]/g.test(t.slice(0,e))?a:e;this._shift.add(r+this.prefix.length||0)}_compareOrIncludes(t,e,a){return Array.isArray(e)?e.filter(r=>r!==a).includes(t):t===e}_validIP(t){return!(4===t.length&&!t.some((e,a)=>t.length!==a+1?e===s.EMPTY_STRING||Number(e)>255:e===s.EMPTY_STRING||Number(e.substring(0,3))>255))}_splitPercentZero(t){if(t===s.MINUS&&this.allowNegativeNumbers)return t;const e="string"==typeof this.decimalMarker?t.indexOf(this.decimalMarker):t.indexOf(s.DOT),a=this.allowNegativeNumbers&&t.includes(s.MINUS)?"-":"";if(-1===e){const r=parseInt(a?t.slice(1,t.length):t,10);return isNaN(r)?s.EMPTY_STRING:`${a}${r}`}{const r=parseInt(t.replace("-","").substring(0,e),10),n=t.substring(e+1),d=isNaN(r)?"":r.toString(),l="string"==typeof this.decimalMarker?this.decimalMarker:s.DOT;return d===s.EMPTY_STRING?s.EMPTY_STRING:`${a}${d}${l}${n}`}}_findFirstNonZeroDigitIndex(t){for(let e=0;e<t.length;e++){const a=t[e];if(a&&a>="1"&&a<="9")return e}return-1}static \u0275fac=function(e){return new(e||ke)};static \u0275prov=i.jDH({token:ke,factory:ke.\u0275fac})}class H extends ke{isNumberValue=!1;maskIsShown="";selStart=null;selEnd=null;writingValue=!1;maskChanged=!1;_maskExpressionArray=[];triggerOnMaskChange=!1;_previousValue="";_currentValue="";_emitValue=!1;_start;_end;onChange=t=>{};_elementRef=(0,i.WQX)(i.aKT,{optional:!0});document=(0,i.WQX)(R.qQ);_config=(0,i.WQX)(be);_renderer=(0,i.WQX)(i.sFG,{optional:!0});applyMask(t,e,a=0,r=!1,n=!1,d=(()=>{})){if(!e)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():s.EMPTY_STRING,this.maskExpression===s.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||s.HASH)),this.maskExpression===s.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||s.HASH)),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;const l=t&&"number"==typeof this.selStart?t[this.selStart]??s.EMPTY_STRING:s.EMPTY_STRING;let p="",u=a;if(null!==this.hiddenInput&&!this.writingValue){let o=t&&1===t.length?t.split(s.EMPTY_STRING):this.actualValue.split(s.EMPTY_STRING);"object"==typeof this.selStart&&"object"==typeof this.selEnd?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):t!==s.EMPTY_STRING&&o.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>o.length?o.splice(this.selStart,0,l):t.length<o.length&&(o.length-t.length==1?n?o.splice(this.selStart-1,1):o.splice(t.length-1,1):o.splice(this.selStart,this.selEnd-this.selStart))):o=[],this.showMaskTyped&&!this.hiddenInput&&(p=this.removeMask(t)),p=this.actualValue.length&&o.length<=t.length?this.shiftTypedSymbols(o.join(s.EMPTY_STRING)):t}if(r&&(this.hiddenInput||!this.hiddenInput)&&(p=t),n&&-1!==this.specialCharacters.indexOf(this.maskExpression[u]??s.EMPTY_STRING)&&this.showMaskTyped&&!this.prefix&&(p=this._currentValue),this.deletedSpecialCharacter&&u&&(this.specialCharacters.includes(this.actualValue.slice(u,u+1))?u+=1:e.slice(u-1,u+1)!==s.MONTHS&&(u-=2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&1===this.placeHolderCharacter.length&&!this.leadZeroDateTime&&(p=this.removeMask(t)),p=this.maskChanged?t:p&&p.length?p:t,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!r&&!this.writingValue){const o=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(o),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}const _=super.applyMask(p,e,u,r,n,d);if(this.actualValue=this.getActualValue(_),this.thousandSeparator===s.DOT&&this.decimalMarker===s.DOT&&(this.decimalMarker=s.COMMA),this.maskExpression.startsWith(s.SEPARATOR)&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter(o=>!this._compareOrIncludes(o,this.decimalMarker,this.thousandSeparator))),(_||""===_)&&(this._previousValue=this._currentValue,this._currentValue=_,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this.writingValue||this._previousValue===this._currentValue&&r),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(_)):this.formControlResult(_)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?n?this.hideInput(_,this.maskExpression):`${this.hideInput(_,this.maskExpression)}${this.maskIsShown.slice(_.length)}`:_;const k=_.length,S=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(s.HOURS)){const o=this._numberSkipedSymbols(_);return`${_}${S.slice(k+o)}`}return this.maskExpression===s.IP||this.maskExpression===s.CPF_CNPJ?`${_}${S}`:`${_}${S.slice(k)}`}_numberSkipedSymbols(t){const e=/(^|\D)(\d\D)/g;let a=e.exec(t),r=0;for(;null!=a;)r+=1,a=e.exec(t);return r}applyValueChanges(t,e,a,r=(()=>{})){const n=this._elementRef?.nativeElement;n&&(n.value=this.applyMask(n.value,this.maskExpression,t,e,a,r),n!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,e){return t.split(s.EMPTY_STRING).map((a,r)=>this.patterns&&this.patterns[e[r]??s.EMPTY_STRING]&&this.patterns[e[r]??s.EMPTY_STRING]?.symbol?this.patterns[e[r]??s.EMPTY_STRING]?.symbol:a).join(s.EMPTY_STRING)}getActualValue(t){const e=t.split(s.EMPTY_STRING).filter((a,r)=>{const n=this.maskExpression[r]??s.EMPTY_STRING;return this._checkSymbolMask(a,n)||this.specialCharacters.includes(n)&&a===n});return e.join(s.EMPTY_STRING)===t?e.join(s.EMPTY_STRING):t}shiftTypedSymbols(t){let e="";return(t&&t.split(s.EMPTY_STRING).map((r,n)=>{if(this.specialCharacters.includes(t[n+1]??s.EMPTY_STRING)&&t[n+1]!==this.maskExpression[n+1])return e=r,t[n+1];if(e.length){const d=e;return e=s.EMPTY_STRING,d}return r})||[]).join(s.EMPTY_STRING)}numberToString(t){return!t&&0!==t||this.maskExpression.startsWith(s.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(s.SEPARATOR)&&this.separatorLimit.length>14&&String(t).length>14?String(t):Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${s.MINUS}/`,s.MINUS)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if(this.maskExpression===s.IP)return this._checkForIp(t);if(this.maskExpression===s.CPF_CNPJ)return this._checkForCpfCnpj(t)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef?.nativeElement;t&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(this.placeHolderCharacter,s.EMPTY_STRING).length&&(this.formElementProperty=["value",s.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([t,e]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,t,e))}checkDropSpecialCharAmount(t){return t.split(s.EMPTY_STRING).filter(a=>this._findDropSpecialChar(a)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if(t===s.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const e=[];for(let a=0;a<t.length;a++){const r=t[a]??s.EMPTY_STRING;r&&r.match("\\d")&&e.push(r)}return e.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>3&&e.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>6&&e.length<=9?this.placeHolderCharacter:(e.length>9&&e.length,"")}_checkForCpfCnpj(t){const e=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,a=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(t===s.HASH)return e;const r=[];for(let n=0;n<t.length;n++){const d=t[n]??s.EMPTY_STRING;d&&d.match("\\d")&&r.push(d)}return r.length<=3?e.slice(r.length,e.length):r.length>3&&r.length<=6?e.slice(r.length+1,e.length):r.length>6&&r.length<=9?e.slice(r.length+2,e.length):r.length>9&&r.length<11?e.slice(r.length+3,e.length):11===r.length?"":12===r.length?17===t.length?a.slice(16,a.length):a.slice(15,a.length):r.length>12&&r.length<=14?a.slice(r.length+4,a.length):""}_getActiveElement(t=this.document){const e=t?.activeElement?.shadowRoot;return e?.activeElement?this._getActiveElement(e):t.activeElement}formControlResult(t){if(!this.writingValue||t)return this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?(this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))),void(this.maskChanged=!1)):void(Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===t?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))):this.onChange(this.outputTransformFn(this._toNumber(t))));this.onChange("")}_toNumber(t){if(!this.isNumberValue||t===s.EMPTY_STRING||this.maskExpression.startsWith(s.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return t;if(String(t).length>14&&this.maskExpression.startsWith(s.SEPARATOR))return String(t);const e=Number(t);if(this.maskExpression.startsWith(s.SEPARATOR)&&Number.isNaN(e)){const a=String(t).replace(",",".");return Number(a)}return Number.isNaN(e)?t:e}_removeMask(t,e){return this.maskExpression.startsWith(s.PERCENT)&&t.includes(s.DOT)?t:t&&t.replace(this._regExpForRemove(e),s.EMPTY_STRING)}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,s.EMPTY_STRING):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,s.EMPTY_STRING):t}_retrieveSeparatorValue(t){let e=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(a=>this.dropSpecialCharacters.includes(a)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&t.includes(s.WHITE_SPACE)&&this.maskExpression.includes(s.SYMBOL_STAR)&&(e=e.filter(a=>a!==s.WHITE_SPACE)),this._removeMask(t,e)}_regExpForRemove(t){return new RegExp(t.map(e=>`\\${e}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){const e=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(e),s.DOT)}_checkSymbols(t){let e=t;if(e===s.EMPTY_STRING)return e;this.maskExpression.startsWith(s.PERCENT)&&this.decimalMarker===s.COMMA&&(e=e.replace(s.COMMA,s.DOT));const a=this._retrieveSeparatorPrecision(this.maskExpression),r=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(e));return this.isNumberValue&&a?e===this.decimalMarker?null:r.length>14?String(r):this._checkPrecision(this.maskExpression,r):r}_checkPatternForSpace(){for(const t in this.patterns)if(this.patterns[t]&&this.patterns[t]?.hasOwnProperty("pattern")){const e=this.patterns[t]?.pattern.toString(),a=this.patterns[t]?.pattern;if(e?.includes(s.WHITE_SPACE)&&a?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(t){const e=t.match(new RegExp("^separator\\.([^d]*)"));return e?Number(e[1]):null}_checkPrecision(t,e){const a=this.getPrecision(t);let r=e;return t.indexOf("2")>0||this.leadZero&&Number(a)>0?(this.decimalMarker===s.COMMA&&this.leadZero&&(r=r.replace(",",".")),this.leadZero?Number(r).toFixed(Number(a)):Number(r).toFixed(2)):this.numberToString(r)}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split(s.EMPTY_STRING).reduce((e,a,r)=>{if(this._start=a===s.CURLY_BRACKETS_LEFT?r:this._start,a!==s.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(a)?e+a:e;this._end=r;const n=Number(t.slice(this._start+1,this._end)),d=new Array(n+1).join(t[this._start-1]);if(t.slice(0,this._start).length>1&&t.includes(s.LETTER_S)){const l=t.slice(0,this._start-1);return l.includes(s.CURLY_BRACKETS_LEFT)?e+d:l+e+d}return e+d},"")||t}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static \u0275fac=(()=>{let t;return function(a){return(t||(t=i.xGo(H)))(a||H)}})();static \u0275prov=i.jDH({token:H,factory:H.\u0275fac})}function Si(){const c=(0,i.WQX)(mt),t=(0,i.WQX)(ut);return t instanceof Function?{...c,...t()}:{...c,...t}}function ft(c){return[{provide:ut,useValue:c},{provide:mt,useValue:gi},{provide:be,useFactory:Si},H]}class he{maskExpression="";specialCharacters=[];patterns={};prefix="";suffix="";thousandSeparator=" ";decimalMarker=".";dropSpecialCharacters=null;hiddenInput=null;showMaskTyped=null;placeHolderCharacter=null;shownMaskExpression=null;showTemplate=null;clearIfNotMatch=null;validation=null;separatorLimit=null;allowNegativeNumbers=null;leadZeroDateTime=null;leadZero=null;triggerOnMaskChange=null;apm=null;inputTransformFn=null;outputTransformFn=null;keepCharacterPositions=null;maskFilled=new i.bkB;_maskValue="";_inputValue;_position=null;_code;_maskExpressionArray=[];_allowFewMaskChangeMask=!1;_justPasted=!1;_isFocused=!1;_isComposing=!1;document=(0,i.WQX)(R.qQ);_maskService=(0,i.WQX)(H,{self:!0});_config=(0,i.WQX)(be);onChange=t=>{};onTouch=()=>{};ngOnChanges(t){const{maskExpression:e,specialCharacters:a,patterns:r,prefix:n,suffix:d,thousandSeparator:l,decimalMarker:p,dropSpecialCharacters:u,hiddenInput:_,showMaskTyped:k,placeHolderCharacter:S,shownMaskExpression:o,showTemplate:f,clearIfNotMatch:T,validation:$,separatorLimit:J,allowNegativeNumbers:Ce,leadZeroDateTime:xe,leadZero:de,triggerOnMaskChange:Ve,apm:v,inputTransformFn:m,outputTransformFn:D,keepCharacterPositions:O}=t;if(e&&(e.currentValue!==e.previousValue&&!e.firstChange&&(this._maskService.maskChanged=!0),e.currentValue&&e.currentValue.split(s.OR).length>1?(this._maskExpressionArray=e.currentValue.split(s.OR).sort((P,U)=>P.length-U.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=e.currentValue||s.EMPTY_STRING,this._maskService.maskExpression=this._maskValue)),a){if(!a.currentValue||!Array.isArray(a.currentValue))return;this._maskService.specialCharacters=a.currentValue||[]}Ce&&(this._maskService.allowNegativeNumbers=Ce.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(P=>P!==s.MINUS))),r&&r.currentValue&&(this._maskService.patterns=r.currentValue),v&&v.currentValue&&(this._maskService.apm=v.currentValue),n&&(this._maskService.prefix=n.currentValue),d&&(this._maskService.suffix=d.currentValue),l&&(this._maskService.thousandSeparator=l.currentValue),p&&(this._maskService.decimalMarker=p.currentValue),u&&(this._maskService.dropSpecialCharacters=u.currentValue),_&&(this._maskService.hiddenInput=_.currentValue),k&&(this._maskService.showMaskTyped=k.currentValue,!1===k.previousValue&&!0===k.currentValue&&this._isFocused&&requestAnimationFrame(()=>{this._maskService._elementRef?.nativeElement.click()})),S&&(this._maskService.placeHolderCharacter=S.currentValue),o&&(this._maskService.shownMaskExpression=o.currentValue),f&&(this._maskService.showTemplate=f.currentValue),T&&(this._maskService.clearIfNotMatch=T.currentValue),$&&(this._maskService.validation=$.currentValue),J&&(this._maskService.separatorLimit=J.currentValue),xe&&(this._maskService.leadZeroDateTime=xe.currentValue),de&&(this._maskService.leadZero=de.currentValue),Ve&&(this._maskService.triggerOnMaskChange=Ve.currentValue),m&&(this._maskService.inputTransformFn=m.currentValue),D&&(this._maskService.outputTransformFn=D.currentValue),O&&(this._maskService.keepCharacterPositions=O.currentValue),this._applyMask()}validate({value:t}){const e="number"==typeof t?String(t):t;if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(e);if(this._maskService.cpfCnpjError)return this._createValidationError(e);if(this._maskValue.startsWith(s.SEPARATOR)||vi.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(_i.includes(this._maskValue))return this._validateTime(e);if(this._maskValue===s.EMAIL_MASK)return!/^[^@]+@[^@]+\.[^@]+$/.test(e)&&e?this._createValidationError(e):null;if(e&&e.length>=1){let a=0;if(this._maskValue.includes(s.CURLY_BRACKETS_LEFT)&&this._maskValue.includes(s.CURLY_BRACKETS_RIGHT))return this._maskValue.slice(this._maskValue.indexOf(s.CURLY_BRACKETS_LEFT)+1,this._maskValue.indexOf(s.CURLY_BRACKETS_RIGHT))===String(e.length)?null:this._createValidationError(e);if(this._maskValue.startsWith(s.PERCENT))return null;for(const r in this._maskService.patterns)if(this._maskService.patterns[r]?.optional){if(this._maskValue.indexOf(r)!==this._maskValue.lastIndexOf(r)){a+=this._maskValue.split(s.EMPTY_STRING).filter(d=>d===r).join(s.EMPTY_STRING).length}else-1!==this._maskValue.indexOf(r)&&a++;if(-1!==this._maskValue.indexOf(r)&&e.length>=this._maskValue.indexOf(r)||a===this._maskValue.length)return null}if(this._maskValue.indexOf(s.SYMBOL_STAR)>1&&e.length<this._maskValue.indexOf(s.SYMBOL_STAR)||this._maskValue.indexOf(s.SYMBOL_QUESTION)>1&&e.length<this._maskValue.indexOf(s.SYMBOL_QUESTION))return this._createValidationError(e);if(-1===this._maskValue.indexOf(s.SYMBOL_STAR)||-1===this._maskValue.indexOf(s.SYMBOL_QUESTION)){const r=this._maskValue.split("*"),n=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkDropSpecialCharAmount(this._maskValue)-a:this.prefix?this._maskValue.length+this.prefix.length-a:this._maskValue.length-a;if(1===r.length&&e.length<n)return this._createValidationError(e);if(r.length>1){const d=r[r.length-1];if(d&&this._maskService.specialCharacters.includes(d[0])&&String(e).includes(d[0]??"")&&!this.dropSpecialCharacters){const l=t.split(d[0]);return l[l.length-1].length===d.length-1?null:this._createValidationError(e)}return(d&&!this._maskService.specialCharacters.includes(d[0])||!d||this._maskService.dropSpecialCharacters)&&e.length>=n-1?null:this._createValidationError(e)}}if(1===this._maskValue.indexOf(s.SYMBOL_STAR)||1===this._maskValue.indexOf(s.SYMBOL_QUESTION))return null}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onFocus(){this._isFocused=!0}onModelChange(t){(t===s.EMPTY_STRING||null===t||typeof t>"u")&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(s.EMPTY_STRING))}onInput(t){if(this._isComposing)return;const e=t.target,a=this._maskService.inputTransformFn(e.value);if("number"!==e.type)if("string"==typeof a||"number"==typeof a){if(e.value=a.toString(),this._inputValue=e.value,this._setMask(),!this._maskValue)return void this.onChange(e.value);let r=1===e.selectionStart?e.selectionStart+this._maskService.prefix.length:e.selectionStart;if(this.showMaskTyped&&this.keepCharacterPositions&&1===this._maskService.placeHolderCharacter.length){const p=e.value.slice(r-1,r),u=this.prefix.length,_=this._maskService._checkSymbolMask(p,this._maskService.maskExpression[r-1-u]??s.EMPTY_STRING),k=this._maskService._checkSymbolMask(p,this._maskService.maskExpression[r+1-u]??s.EMPTY_STRING),S=this._maskService.selStart===this._maskService.selEnd,o=Number(this._maskService.selStart)-u,f=Number(this._maskService.selEnd)-u,T=this._code===s.BACKSPACE||this._code===s.DELETE;if(T){if(S){if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(r-this.prefix.length,r+1-this.prefix.length))&&S)if(1===o&&this.prefix)this._maskService.actualValue=`${this.prefix}${this._maskService.placeHolderCharacter}${e.value.split(this.prefix).join("").split(this.suffix).join("")}${this.suffix}`,r-=1;else{const $=e.value.substring(0,r),J=e.value.substring(r);this._maskService.actualValue=`${$}${this._maskService.placeHolderCharacter}${J}`}}else this._maskService.selStart===u?this._maskService.actualValue=`${this.prefix}${this._maskService.maskIsShown.slice(0,f)}${this._inputValue.split(this.prefix).join("")}`:this._maskService.selStart===this._maskService.maskIsShown.length+u?this._maskService.actualValue=`${this._inputValue}${this._maskService.maskIsShown.slice(o,f)}`:this._maskService.actualValue=`${this.prefix}${this._inputValue.split(this.prefix).join("").slice(0,o)}${this._maskService.maskIsShown.slice(o,f)}${this._maskService.actualValue.slice(f+u,this._maskService.maskIsShown.length+u)}${this.suffix}`;r=this._code===s.DELETE?r+1:r}T||(_||k||!S?this._maskService.specialCharacters.includes(e.value.slice(r,r+1))&&k&&!this._maskService.specialCharacters.includes(e.value.slice(r+1,r+2))?(this._maskService.actualValue=`${e.value.slice(0,r-1)}${e.value.slice(r,r+1)}${p}${e.value.slice(r+2)}`,r+=1):_?1===e.value.length&&1===r?this._maskService.actualValue=`${this.prefix}${p}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`:this._maskService.actualValue=`${e.value.slice(0,r-1)}${p}${e.value.slice(r+1).split(this.suffix).join("")}${this.suffix}`:this.prefix&&1===e.value.length&&r-u==1&&this._maskService._checkSymbolMask(e.value,this._maskService.maskExpression[r-1-u]??s.EMPTY_STRING)&&(this._maskService.actualValue=`${this.prefix}${e.value}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`):r=Number(e.selectionStart)-1)}let n=0,d=!1;if(this._code===s.DELETE&&s.SEPARATOR&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&this._code!==s.BACKSPACE&&this._maskService.maskExpression===s.DAYS_MONTHS_YEARS&&r<10){const p=this._inputValue.slice(r-1,r);e.value=this._inputValue.slice(0,r-1)+p+this._inputValue.slice(r+1)}if(this._maskService.maskExpression===s.DAYS_MONTHS_YEARS&&this.leadZeroDateTime&&(r<3&&Number(e.value)>31&&Number(e.value)<40||5===r&&Number(e.value.slice(3,5))>12)&&(r+=2),this._maskService.maskExpression===s.HOURS_MINUTES_SECONDS&&this.apm&&(this._justPasted&&e.value.slice(0,2)===s.DOUBLE_ZERO&&(e.value=e.value.slice(1,2)+e.value.slice(2,e.value.length)),e.value=e.value===s.DOUBLE_ZERO?s.NUMBER_ZERO:e.value),this._maskService.applyValueChanges(r,this._justPasted,this._code===s.BACKSPACE||this._code===s.DELETE,(p,u)=>{this._justPasted=!1,n=p,d=u}),this._getActiveElement()!==e)return;if(this._maskService.plusOnePosition&&(r+=1,this._maskService.plusOnePosition=!1),this._maskExpressionArray.length)if(this._code===s.BACKSPACE){const p=this.specialCharacters.includes(this._maskService.actualValue.slice(r-1,r)),u=this.specialCharacters.includes(this._maskService.actualValue.slice(r,r+1));this._allowFewMaskChangeMask&&!u?(r=e.selectionStart+1,this._allowFewMaskChangeMask=!1):r=p?r-1:r}else r=1===e.selectionStart?e.selectionStart+this._maskService.prefix.length:e.selectionStart;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let l=this._position?this._inputValue.length+r+n:r+(this._code!==s.BACKSPACE||d?n:0);l>this._getActualInputLength()&&(l=e.value===this._maskService.decimalMarker&&1===e.value.length?this._getActualInputLength()+1:this._getActualInputLength()),l<0&&(l=0),e.setSelectionRange(l,l),this._position=null}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof a);else{if(!this._maskValue)return void this.onChange(e.value);this._maskService.applyValueChanges(e.value.length,this._justPasted,this._code===s.BACKSPACE||this._code===s.DELETE)}}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,this._justPasted=!0,this.onInput(t)}onBlur(t){if(this._maskValue){const e=t.target;if(this._maskService.leadZero&&e.value.length>0&&"string"==typeof this._maskService.decimalMarker){const a=this._maskService.maskExpression,r=Number(this._maskService.maskExpression.slice(a.length-1,a.length));if(r>0){e.value=this._maskService.suffix?e.value.split(this._maskService.suffix).join(""):e.value;const n=e.value.split(this._maskService.decimalMarker)[1];e.value=e.value.includes(this._maskService.decimalMarker)?e.value+s.NUMBER_ZERO.repeat(r-n.length)+this._maskService.suffix:e.value+this._maskService.decimalMarker+s.NUMBER_ZERO.repeat(r)+this._maskService.suffix,this._maskService.actualValue=e.value}}this._maskService.clearIfNotMatchFn()}this._isFocused=!1,this.onTouch()}onClick(t){if(!this._maskValue)return;const e=t.target;null!==e&&null!==e.selectionStart&&e.selectionStart===e.selectionEnd&&e.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&!this.keepCharacterPositions&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),e.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===e.value?(e.focus(),e.setSelectionRange(0,0)):e.selectionStart>this._maskService.actualValue.length&&e.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const n=e&&(e.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:e.value);if(e&&e.value!==n&&(e.value=n),e&&"number"!==e.type&&(e.selectionStart||e.selectionEnd)<=this._maskService.prefix.length){const d=this._maskService.maskExpression.match(new RegExp(`^[${this._maskService.specialCharacters.map(l=>`\\${l}`).join("")}]+`))?.[0].length||0;e.selectionStart=this._maskService.prefix.length+d}else e&&e.selectionEnd>this._getActualInputLength()&&(e.selectionEnd=this._getActualInputLength())}onKeyDown(t){if(!this._maskValue)return;if(this._isComposing)return void("Enter"===t.key&&this.onCompositionEnd(t));this._code=t.code?t.code:t.key;const e=t.target;if(this._inputValue=e.value,this._setMask(),"number"!==e.type){if(t.key===s.ARROW_UP&&t.preventDefault(),t.key===s.ARROW_LEFT||t.key===s.BACKSPACE||t.key===s.DELETE){if(t.key===s.BACKSPACE&&0===e.value.length&&(e.selectionStart=e.selectionEnd),t.key===s.BACKSPACE&&0!==e.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&e.selectionStart<=this.prefix.length)e.setSelectionRange(this.prefix.length,e.selectionEnd);else if(this._inputValue.length!==e.selectionStart&&1!==e.selectionStart)for(;this.specialCharacters.includes((this._inputValue[e.selectionStart-1]??s.EMPTY_STRING).toString())&&(this.prefix.length>=1&&e.selectionStart>this.prefix.length||0===this.prefix.length);)e.setSelectionRange(e.selectionStart-1,e.selectionEnd);this.checkSelectionOnDeletion(e),this._maskService.prefix.length&&e.selectionStart<=this._maskService.prefix.length&&e.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const a=e.selectionStart;t.key===s.BACKSPACE&&!e.readOnly&&0===a&&e.selectionEnd===e.value.length&&0!==e.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<e.selectionStart?e.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):("KeyA"===t.code&&t.ctrlKey||"KeyA"===t.code&&t.metaKey)&&(e.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=e.selectionStart,this._maskService.selEnd=e.selectionEnd}}writeValue(t){var e=this;return(0,fi.A)(function*(){let a=t;if("object"==typeof a&&null!==a&&"value"in a&&("disable"in a&&e.setDisabledState(!!a.disable),a=a.value),null!==a&&(a=e.inputTransformFn?e.inputTransformFn(a):a),"string"==typeof a||"number"==typeof a||null===a||typeof a>"u"){(null===a||typeof a>"u"||""===a)&&(e._maskService._currentValue="",e._maskService._previousValue="");let r=a;if("number"==typeof r||e._maskValue.startsWith(s.SEPARATOR)){r=String(r);const n=e._maskService.currentLocaleDecimalMarker();Array.isArray(e._maskService.decimalMarker)||(r=e._maskService.decimalMarker!==n?r.replace(n,e._maskService.decimalMarker):r),e._maskService.leadZero&&r&&e.maskExpression&&!1!==e.dropSpecialCharacters&&(r=e._maskService._checkPrecision(e._maskService.maskExpression,r)),(e._maskService.decimalMarker===s.COMMA||Array.isArray(e._maskService.decimalMarker)&&e._maskService.thousandSeparator===s.DOT)&&(r=r.toString().replace(s.DOT,s.COMMA)),e.maskExpression?.startsWith(s.SEPARATOR)&&e.leadZero&&requestAnimationFrame(()=>{e._maskService.applyMask(r?.toString()??"",e._maskService.maskExpression)}),e._maskService.isNumberValue=!0}"string"!=typeof r&&(r=""),e._inputValue=r,e._setMask(),r&&e._maskService.maskExpression||e._maskService.maskExpression&&(e._maskService.prefix||e._maskService.showMaskTyped)?("function"!=typeof e.inputTransformFn&&(e._maskService.writingValue=!0),e._maskService.formElementProperty=["value",e._maskService.applyMask(r,e._maskService.maskExpression)],"function"!=typeof e.inputTransformFn&&(e._maskService.writingValue=!1)):e._maskService.formElementProperty=["value",r],e._inputValue=r}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof a)})()}registerOnChange(t){this._maskService.onChange=this.onChange=t}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){const e=t?.activeElement?.shadowRoot;return e?.activeElement?this._getActiveElement(e):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const e=this._maskValue.split(s.EMPTY_STRING).filter(a=>":"!==a).length;return t&&(0==+(t[t.length-1]??-1)&&t.length<e||t.length<=e-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.some(t=>{if(t.split(s.EMPTY_STRING).some(a=>this._maskService.specialCharacters.includes(a))&&this._inputValue&&this._areAllCharactersInEachStringSame(this._maskExpressionArray)||t.includes(s.CURLY_BRACKETS_LEFT)){const a=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(t)?.length;if(a)return this._maskValue=this.maskExpression=this._maskService.maskExpression=t.includes(s.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(t):t,a;{this._code===s.BACKSPACE&&(this._allowFewMaskChangeMask=!0);const r=this._maskExpressionArray[this._maskExpressionArray.length-1]??s.EMPTY_STRING;this._maskValue=this.maskExpression=this._maskService.maskExpression=r.includes(s.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(r):r}}else{const a=this._maskService.removeMask(this._inputValue)?.split(s.EMPTY_STRING).every((r,n)=>{const d=t.charAt(n);return this._maskService._checkSymbolMask(r,d)});if(a||this._justPasted)return this._maskValue=this.maskExpression=this._maskService.maskExpression=t,a}})}_areAllCharactersInEachStringSame(t){const e=this._maskService.specialCharacters;return t.map(function a(n){const d=new RegExp(`[${e.map(l=>`\\${l}`).join("")}]`,"g");return n.replace(d,"")}).every(n=>1===new Set(n).size)}static \u0275fac=function(e){return new(e||he)};static \u0275dir=i.FsC({type:he,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(e,a){1&e&&i.bIt("paste",function(){return a.onPaste()})("focus",function(n){return a.onFocus(n)})("ngModelChange",function(n){return a.onModelChange(n)})("input",function(n){return a.onInput(n)})("compositionstart",function(n){return a.onCompositionStart(n)})("compositionend",function(n){return a.onCompositionEnd(n)})("blur",function(n){return a.onBlur(n)})("click",function(n){return a.onClick(n)})("keydown",function(n){return a.onKeyDown(n)})},inputs:{maskExpression:[i.Mj6.None,"mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange",apm:"apm",inputTransformFn:"inputTransformFn",outputTransformFn:"outputTransformFn",keepCharacterPositions:"keepCharacterPositions"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[i.Jv_([{provide:y.kq,useExisting:he,multi:!0},{provide:y.cz,useExisting:he,multi:!0},H]),i.OA$]})}let je=class{productCard=i.hFB.required();pointsAvailable=i.hFB.required();conversionRate=i.hFB.required();submitAction=(0,i.CGW)();fb=(0,i.WQX)(y.ok);form=this.fb.group({points:this.fb.control(null,[y.k0.required]),cardName:this.fb.control(null,[y.k0.required,y.k0.minLength(3)]),cardNumber:this.fb.control(null,[y.k0.required]),expirationMonth:this.fb.control(null,[y.k0.required]),expirationYear:this.fb.control(null,[y.k0.required]),cvv:this.fb.control(null,[y.k0.required])});monthOptions=Array.from({length:12},(t,e)=>e+1<10?"0"+(e+1):e+1);yearOptions=Array.from({length:10},(t,e)=>(new Date).getFullYear()+e);ngOnChanges(){this.setFormDefaultValue(),this.setFormValidators()}get pointsControl(){return this.form.controls.points}get cardNameControl(){return this.form.controls.cardName}get cardNumberControl(){return this.form.controls.cardNumber}get expirationMonthControl(){return this.form.controls.expirationMonth}get expirationYearControl(){return this.form.controls.expirationYear}get cvvControl(){return this.form.controls.cvv}onSubmit(){this.pointsControl.value===this.productCard()?.subtotalPoints&&this.emitSubmitAction(),this.form.invalid?this.form.markAllAsTouched():this.emitSubmitAction()}emitSubmitAction(){this.submitAction.emit({pointsRedeem:this.pointsControl.value})}setFormDefaultValue(){this.form.patchValue({points:this.productCard()?.subtotalPoints})}setFormValidators(){this.pointsControl.setValidators([y.k0.max(this.productCard()?.subtotalPoints)])}static propDecorators={productCard:[{type:i.pde,args:[{isSignal:!0,alias:"productCard",required:!0,transform:void 0}]}],pointsAvailable:[{type:i.pde,args:[{isSignal:!0,alias:"pointsAvailable",required:!0,transform:void 0}]}],conversionRate:[{type:i.pde,args:[{isSignal:!0,alias:"conversionRate",required:!0,transform:void 0}]}],submitAction:[{type:i.k7i,args:["submitAction"]}]}};je=(0,A.Cg)([(0,i.uAl)({selector:"app-checkout-payment-options",template:'<form class="checkout-payment-options">\n  <span class="h1">Choose to pay with points, card or both.</span>\n\n  <div class="checkout-payment-options__order">\n    <div class="checkout-payment-options__order-row">\n      <span class="body-1">Order total:</span>\n      <b>{{ productCard()?.totalPrice | currency }}</b>\n      <span class="body-1">or {{ productCard()?.totalPoints | number }} pts</span>\n      <mat-icon matTooltip="This information has been provided by the retailer." svgIcon="ico_info" />\n    </div>\n\n    <div class="checkout-payment-options__order-row">\n      <span class="body-1">Points available:</span>\n      <span class="checkout-payment-options__order--points">{{ pointsAvailable() | number }} pts</span>\n    </div>\n  </div>\n\n  <div class="checkout-payment-options__form">\n    <div class="checkout-payment-options__form-field">\n      <span>Points to redeem</span>\n      <mat-form-field appearance="outline">\n        <input matInput placeholder="Points" [formControl]="pointsControl" mask="separator.0" thousandSeparator="," />\n\n        @if (pointsControl.errors?.required) {\n          <mat-error> Points is required </mat-error>\n        }\n        @if (pointsControl.errors?.max) {\n          <mat-error>Should not exceed {{ pointsControl.errors?.max.max | number }} pts</mat-error>\n        }\n      </mat-form-field>\n\n      <span class="body-2">Choose how many points you\u2019d like to use and we\u2019ll apply them to your oder. </span>\n    </div>\n  </div>\n\n  <div class="checkout-payment-options__order">\n    <div class="checkout-payment-options__order-row">\n      <span class="body-1">Balance due:</span>\n      @if (pointsControl.value) {\n        <b>{{ (productCard()?.totalPoints - pointsControl.value) * conversionRate() | currency }}</b>\n      } @else {\n        <b>{{ productCard()?.totalPrice | currency }}</b>\n      }\n    </div>\n\n    <div class="checkout-payment-options__order-row">\n      <span class="body-1">Remaining points:</span>\n      <b>{{ pointsAvailable() - pointsControl.value || 0 | number }} pts</b>\n    </div>\n  </div>\n\n  @if (pointsControl.value < productCard()?.totalPoints) {\n    <hr class="checkout-payment-options__order-line" />\n\n    <span class="h1">Payment information</span>\n\n    <span>\n      @if (pointsControl.value) {\n        {{ (productCard()?.totalPoints - pointsControl.value) * conversionRate() | currency }}\n      } @else {\n        {{ productCard()?.totalPrice | currency }}\n      }\n      will be billed to your card.\n    </span>\n\n    \x3c!-- ToDo: Waiting for new requirements --\x3e\n    \x3c!-- <div class="checkout-payment-options__order-row">\n      <mat-icon matTooltip="This information has been provided by the retailer." svgIcon="ico_info" />\n      <span class="body-1"\n        >Alert space - See edge & error cases in Content Page for more info. This is NOT for a default view.</span\n      >\n    </div> --\x3e\n\n    <div class="checkout-payment-options__form">\n      <div class="checkout-payment-options__form-field">\n        <span class="body-1">Name on card</span>\n\n        <mat-form-field appearance="outline">\n          <input matInput placeholder="Name" [formControl]="cardNameControl" />\n\n          @if (cardNameControl.errors?.required) {\n            <mat-error>Name is required</mat-error>\n          }\n          @if (cardNameControl.errors?.minlength) {\n            <mat-error>Name must be at least 3 characters</mat-error>\n          }\n        </mat-form-field>\n      </div>\n\n      <div class="checkout-payment-options__form-field">\n        <span class="body-1">Card number</span>\n        <mat-form-field appearance="outline">\n          <input\n            matInput\n            placeholder="0000-0000-0000-0000"\n            [formControl]="cardNumberControl"\n            mask="0000-0000-0000-0000"\n          />\n\n          @if (cardNumberControl.errors?.required) {\n            <mat-error>Card is required</mat-error>\n          }\n        </mat-form-field>\n      </div>\n\n      <div class="checkout-payment-options__form-row">\n        <div class="checkout-payment-options__form-expiration">\n          <span class="body-1">Expiration</span>\n          <div class="checkout-payment-options__form-expiration-fields">\n            <mat-form-field appearance="outline">\n              <input\n                placeholder="Month"\n                matInput\n                [formControl]="expirationMonthControl"\n                [matAutocomplete]="monthAuto"\n              />\n              <mat-autocomplete autoActiveFirstOption #monthAuto="matAutocomplete">\n                @for (option of monthOptions; track option) {\n                  <mat-option [value]="option">\n                    {{ option }}\n                  </mat-option>\n                }\n              </mat-autocomplete>\n\n              @if (expirationMonthControl.errors?.required) {\n                <mat-error>Month is required</mat-error>\n              }\n            </mat-form-field>\n\n            <mat-form-field appearance="outline">\n              <input placeholder="Year" matInput [formControl]="expirationYearControl" [matAutocomplete]="yearAuto" />\n              <mat-autocomplete autoActiveFirstOption #yearAuto="matAutocomplete">\n                @for (option of yearOptions; track option) {\n                  <mat-option [value]="option">{{ option }}</mat-option>\n                }\n              </mat-autocomplete>\n\n              @if (expirationYearControl.errors?.required) {\n                <mat-error>Year is required</mat-error>\n              }\n            </mat-form-field>\n          </div>\n        </div>\n\n        <div class="checkout-payment-options__form-field">\n          <span class="body-1">Security Code</span>\n          <mat-form-field appearance="outline" class="half-width">\n            <input matInput placeholder="000" [formControl]="cvvControl" mask="000" maxlength="3" />\n\n            @if (cvvControl.errors?.required) {\n              <mat-error>Security code is required</mat-error>\n            }\n          </mat-form-field>\n        </div>\n      </div>\n    </div>\n  }\n\n  <div class="checkout-payment-options__form-submit">\n    <button type="button" mat-raised-button color="primary" (click)="onSubmit()">Continue to order review</button>\n  </div>\n</form>\n',standalone:!0,changeDetection:i.Ngq.OnPush,imports:[R.MD,pt.RG,tt.fS,Re.Hl,ui.Hu,W.m_,mi.uc,Le,he,y.X1],providers:[ft()],styles:[Jt()]})],je);var bi=h(1392),ki=h.n(bi);let Fe=class{hasSubmit=(0,i.hFB)(!1);hasUpdate=(0,i.hFB)(!1);shippingInfo=i.hFB.required();submitAction=(0,i.CGW)();skeletonService=(0,i.WQX)(Je.Rm);static propDecorators={hasSubmit:[{type:i.pde,args:[{isSignal:!0,alias:"hasSubmit",required:!1,transform:void 0}]}],hasUpdate:[{type:i.pde,args:[{isSignal:!0,alias:"hasUpdate",required:!1,transform:void 0}]}],shippingInfo:[{type:i.pde,args:[{isSignal:!0,alias:"shippingInfo",required:!0,transform:void 0}]}],submitAction:[{type:i.k7i,args:["submitAction"]}]}};Fe=(0,A.Cg)([(0,i.uAl)({selector:"app-checkout-shipping-information",template:'<div class="checkout-shipping-info">\n  @if (shippingInfo()) {\n    <div class="checkout-shipping-info__section">\n      <div class="label">Address</div>\n      <div class="body-1">\n        {{ shippingInfo().firstName }} {{ shippingInfo().lastName }}<br />\n        @if (shippingInfo().address; as address) {\n          @if (address.city) {\n            <span>{{ address.city }}</span\n            >,\n          }\n          @if (address.state) {\n            <span>{{ address.state }}</span\n            >,\n          }\n          @if (address.countryCode) {\n            <span>{{ address.countryCode }}</span\n            ><br />\n          }\n          @if (address.addressLine1) {\n            <span>{{ address.addressLine1 }}</span\n            ><br />\n          }\n          @if (address.addressLine2) {\n            <span>{{ address.addressLine2 }}</span\n            ><br />\n          }\n          @if (address.postalCode) {\n            <span>{{ address.postalCode }}</span>\n          }\n        }\n      </div>\n\n      <div class="label">Email</div>\n      <div class="body-1">{{ shippingInfo().emailAddress }}</div>\n\n      <div class="label">Phone number</div>\n      <div class="body-1">{{ shippingInfo().telephoneNumber }}</div>\n    </div>\n  } @else {\n    <div class="checkout-shipping-info__section--skeleton">\n      <ng-container *ngTemplateOutlet="skeletonService.rectangleTemplate()"></ng-container>\n    </div>\n  }\n  @if (hasUpdate()) {\n    <div class="divider"></div>\n    <div class="checkout-shipping-info__update">\n      <div class="body-1">\n        <div>To update your shipping information,</div>\n        <div class="link-item">\n          <span>go to your Chase profile.</span>\n          <mat-icon svgIcon="ico_arrow_right"></mat-icon>\n        </div>\n      </div>\n    </div>\n    <div class="divider"></div>\n  }\n  <div class="checkout-shipping-info__section checkout-shipping-info__method">\n    <div class="label">Shipping method</div>\n    <div class="body-1">Free for Chase Ultimate Rewards cardmembers</div>\n  </div>\n  @if (hasSubmit()) {\n    <div class="action-buttons">\n      <button class="proceed-to-payment-btn" mat-raised-button color="primary" (click)="submitAction.emit()">\n        Continue to payment\n      </button>\n    </div>\n  }\n</div>\n',standalone:!0,changeDetection:i.Ngq.OnPush,imports:[R.MD,W.m_,Re.Hl],styles:[ki()]})],Fe);var xi=h(960),Mi=h.n(xi);let Ze=class{productCard=i.hFB.required();shippingInfo=i.hFB.required();pointsRedeem=i.hFB.required();pointsAvailable=i.hFB.required();conversionRate=i.hFB.required();static propDecorators={productCard:[{type:i.pde,args:[{isSignal:!0,alias:"productCard",required:!0,transform:void 0}]}],shippingInfo:[{type:i.pde,args:[{isSignal:!0,alias:"shippingInfo",required:!0,transform:void 0}]}],pointsRedeem:[{type:i.pde,args:[{isSignal:!0,alias:"pointsRedeem",required:!0,transform:void 0}]}],pointsAvailable:[{type:i.pde,args:[{isSignal:!0,alias:"pointsAvailable",required:!0,transform:void 0}]}],conversionRate:[{type:i.pde,args:[{isSignal:!0,alias:"conversionRate",required:!0,transform:void 0}]}]}};Ze=(0,A.Cg)([(0,i.uAl)({selector:"app-checkout-order-review",template:'<div class="checkout-order-review">\n  <div class="checkout-order-review__info">\n    <span class="checkout-order-review__title h1">Shipping information</span>\n    <app-checkout-shipping-information [shippingInfo]="shippingInfo()" />\n\n    <hr class="checkout-order-review__line" />\n  </div>\n\n  @if (productCard()) {\n    <div class="checkout-order-review__items">\n      <span class="checkout-order-review__title h1">Your items</span>\n\n      <div class="items">\n        @for (product of productCard()?.products; track product.productId) {\n          <lib-cart-summary-item [product]="product"></lib-cart-summary-item>\n        }\n      </div>\n      <span class="checkout-order-review__title h1">Amount due</span>\n      <app-cart-total-info [data]="productCard()" />\n    </div>\n\n    <div class="checkout-order-review__payment">\n      <hr class="checkout-order-review__line" />\n\n      <span class="checkout-order-review__title h1">Payment details</span>\n      @if (pointsRedeem()) {\n        <div class="checkout-order-review__row">\n          <span class="label">Points redeemed:</span>\n          <span class="checkout-order-review__row--points">{{ pointsRedeem() | number }} pts</span>\n        </div>\n        <div class="checkout-order-review__row checkout-order-review__row--fit">\n          <span class="body-1">Remaining points:</span>\n          <span class="body-1"> {{ pointsAvailable() - pointsRedeem() | number }} pts </span>\n        </div>\n      }\n      @if (productCard()?.subtotalPoints - pointsRedeem(); as subtotalPoints) {\n        <div class="checkout-order-review__row checkout-order-review__row--billed-card">\n          <span class="label">Billed to card:</span>\n          <span class="checkout-order-review__row">\n            @if (pointsRedeem() === 0) {\n              {{ productCard()?.totalPrice | currency }}\n            } @else {\n              {{ subtotalPoints * conversionRate() | currency }}\n            }\n          </span>\n        </div>\n      }\n      <div class="checkout-order-review__purchase">\n        <mat-icon matTooltip="This information has been provided by the retailer." svgIcon="ico_info" />\n        <span>\n          Orders are fulfilled by Rymax.\n          <a class="checkout-order-review__purchase-link">Learn more about store and product policy.</a>\n        </span>\n      </div>\n    </div>\n  }\n\n  <div class="checkout-order-review__action">\n    <button class="proceed-to-payment-btn" mat-raised-button color="primary">Place order</button>\n  </div>\n</div>\n',changeDetection:i.Ngq.OnPush,standalone:!0,imports:[R.MD,W.m_,Re.Hl,Fe,C.cK,C.X7],styles:[Mi()]})],Ze);const gt=[{path:"",component:Ae,pathMatch:"full"}];let We=class{};We=(0,A.Cg)([(0,i.UQu)({imports:[R.MD,E.iI.forChild(gt),y.X1,C.vE,C.Od,C.hF,C.X7,C._F,De,W.m_,tt.fS,_t.bU,C.cK,Re.Hl,Ze,je,Fe],declarations:[Ae]})],We)}}]);