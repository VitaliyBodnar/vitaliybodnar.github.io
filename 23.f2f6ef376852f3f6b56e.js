(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+BVY":function(e,t,n){"use strict";n.r(t),n.d(t,"PartnersLoanModule",(function(){return Ot}));var r,o=n("ofXK"),i=n("3Pt+"),a=n("904P"),c=n("0hV+"),p=n("oW1M"),s=n("eFDl"),l=n("PCNd"),d=n("tyNb"),u=n("fXoL"),m=function(){function e(){}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.c,i.FormsModule,i.ReactiveFormsModule,l.a,p.m.forRoot(),s.a.forRoot(),p.k.forRoot(),c.b,d.h]]}),e}(),g=n("LzQu"),h=n("tk/3"),f=n("ZF+8"),E=n("z6cu"),I=n("JIr8"),C=n("lJxs"),S=n("x2pC"),_="loanFormPartners",O=7200,b="otpFormPartners",v=18e4,R="deepLinkFormPartners",T="currentRouteIndexPartners",A=function(e){return e[e.APPLICATION_SUBMITTED=1]="APPLICATION_SUBMITTED",e[e.LIMIT_IS_AGREED=2]="LIMIT_IS_AGREED",e[e.LIMIT_IS_AGREED_CLIENT=3]="LIMIT_IS_AGREED_CLIENT",e[e.REFUSAL=4]="REFUSAL",e[e.PROCESSING=5]="PROCESSING",e[e.NOT_A_FOP=6]="NOT_A_FOP",e[e.TECHNICAL_ERROR=7]="TECHNICAL_ERROR",e[e.IDENT_DATE=8]="IDENT_DATE",e[e.AVAILABLE=9]="AVAILABLE",e[e.AVAILABLE_CLIENT=10]="AVAILABLE_CLIENT",e}({}),x=function(e){return e.VERIFIED_OTP="VERIFIED_OTP",e.GENERATE_DEEPLINK="GENERATE_DEEPLINK",e.ERROR_DIIA="ERROR_DIIA",e.DIIA_DOCUMENTS_SHARED_ID_CARD="DIIA_DOCUMENTS_SHARED_ID_CARD",e.DIIA_DOCUMENTS_SHARED_FOREIGN_PASSPORT="DIIA_DOCUMENTS_SHARED_FOREIGN_PASSPORT",e.NEGATIVE_LIMIT="NEGATIVE_LIMIT",e.PROCESSING_LIMIT="PROCESSING_LIMIT",e.AVAILABLE_LIMIT="AVAILABLE_LIMIT",e.AVAILABLE_LIMIT_BANK_CLIENT="AVAILABLE_LIMIT_BANK_CLIENT",e.IDENT_DATE="IDENT_DATE",e.CLIENT_IS_A_FOP="CLIENT_IS_A_FOP",e.CLIENT_IS_NOT_A_FOP="CLIENT_IS_NOT_A_FOP",e.NEGATIVE_CLIENT="NEGATIVE_CLIENT",e.TICKET_SENT="TICKET_SENT",e.CREATED="CREATED",e.RM="RM",e.APPROVED_S1_NOT_BANK_CLIENT="APPROVED_S1_NOT_BANK_CLIENT",e.APPROVED_S1_BANK_CLIENT="APPROVED_S1_BANK_CLIENT",e.REJ_S1="REJ_S1",e.ERROR="ERROR",e.REJ_BANK="REJ_BANK",e}({}),N=function(e){return e.CREDIT_REQUEST_FORM="CREDIT_REQUEST_FORM",e.OTP="OTP",e.SCAN_QR="SCAN_QR",e.RESULT_PAGE="RESULT_PAGE",e}({}),L=((r={})[A.APPLICATION_SUBMITTED]={icon:"icon-success-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.APPLICATION_SUBMITTED.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.APPLICATION_SUBMITTED.BODY",buttonCaption:"UNDERSTOOD",routeLink:"/credit"},r[A.LIMIT_IS_AGREED]={icon:"icon-success-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.LIMIT_IS_AGREED.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.LIMIT_IS_AGREED.BODY",buttonCaption:"BUTTONS.OPEN_ACCOUNT",routeLink:"/registration-choose"},r[A.LIMIT_IS_AGREED_CLIENT]={icon:"icon-success-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.LIMIT_IS_AGREED.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.LIMIT_IS_AGREED.BODY",buttonCaption:"BUTTONS.LOGIN",routeLink:"/login"},r[A.REFUSAL]={icon:"icon-error-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.REFUSAL.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.REFUSAL.BODY",buttonCaption:"UNDERSTOOD",routeLink:"/credit"},r[A.PROCESSING]={icon:"icon-error-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.PROCESSING.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.PROCESSING.BODY",buttonCaption:"UNDERSTOOD",routeLink:"/credit"},r[A.NOT_A_FOP]={icon:"icon-error-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.NOT_A_FOP.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.NOT_A_FOP.BODY",buttonCaption:"BUTTONS.CLOSE",routeLink:"/credit"},r[A.TECHNICAL_ERROR]={icon:"icon-error-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.TECHNICAL_ERROR.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.TECHNICAL_ERROR.BODY",buttonCaption:"BUTTONS.APPLY",routeLink:"/microcredit/partners-loan"},r[A.IDENT_DATE]={icon:"icon-repeat-orange",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.IDENT_DATE.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.IDENT_DATE.BODY",buttonCaption:"BUTTONS.OF_COURSE",routeLink:"/credit"},r[A.AVAILABLE]={icon:"icon-success-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.AVAILABLE.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.AVAILABLE.BODY",buttonCaption:"BUTTONS.OPEN_ACCOUNT",routeLink:"/registration-choose"},r[A.AVAILABLE_CLIENT]={icon:"icon-success-circle",caption:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.AVAILABLE_CLIENT.TITLE",body:"MICROCREDIT.PARTNERS_LOAN.RESULT_PAGE.AVAILABLE_CLIENT.BODY",buttonCaption:"BUTTONS.GO_TO_DIGITAL",routeLink:"/login"},r),y=function(){function e(e,t){this.http=e,this.cookiesService=t,this.phoneNumber="",this.identToken="",this.smsCountdown=v,this.qrImage="",this.currentRouteIndex=N.CREDIT_REQUEST_FORM;var n=this.cookiesService.get(_),r=n&&JSON.parse(n),o=this.cookiesService.get(T);this.currentRouteIndex=o||N.CREDIT_REQUEST_FORM,r&&(this.phoneNumber=r.phoneNumber,this.identToken=r.identToken);var i=this.cookiesService.get(b),a=i&&JSON.parse(i);if(a){var c=a.smsCountdownTimeEnd,p=a.otpAttemptsLeft,s=a.otpSmsAttemptsCount;this.smsCountdown=c&&new Date(c).getTime()-Date.now(),this.otpAttemptsLeft=p,this.otpSmsAttemptsCount=s}var l=this.cookiesService.get(R),d=l&&JSON.parse(l);d&&d.deepLinkCountdown&&(this.deepLinkCountdown=new Date(d.deepLinkCountdown).getTime()-Date.now(),this.qrImage=d.qrImage,this.routeIndex=N.SCAN_QR)}return Object.defineProperty(e.prototype,"routeIndex",{get:function(){return this.currentRouteIndex},set:function(e){this.currentRouteIndex=e,this.cookiesService.setWithMaxAge(T,e.toString(),O)},enumerable:!1,configurable:!0}),e.prototype.getScore=function(e){var t=this.getSpecialHeaders();return this.http.post(S.H,e,{headers:t}).pipe(Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService getScore() hasError !")})))},e.prototype.getCaptcha=function(){var e=this.getSpecialHeaders();return this.http.post(S.w,{},{headers:e}).pipe(Object(C.a)((function(e){var t=Object.assign({},e);return t.imageBytes="data:image/png;base64,"+e.imageBytes,t})),Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService getCaptcha() hasError !")})))},e.prototype.sendCaptchaToVerification=function(e){var t=this.getSpecialHeaders();return this.http.put(S.w,e,{headers:t}).pipe(Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService sendCaptchaToVerification() hasError !")})))},e.prototype.getOtp=function(e){var t=this.getSpecialHeaders();return this.http.post(S.D,e,{headers:t}).pipe(Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService getOtp() hasError !")})))},e.prototype.checkOtp=function(e){var t=this.getSpecialHeaders();return this.http.put(S.D,e,{headers:t}).pipe(Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService checkOtp() hasError !")})))},e.prototype.getDeeplink=function(){var e=this.getSpecialHeaders();return this.http.post(S.C,{},{headers:e}).pipe(Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService getDeeplink() hasError !")})))},e.prototype.getSteps=function(){var e=this.getSpecialHeaders();return this.http.get(S.Vb,{headers:e}).pipe(Object(I.a)((function(e){return Object(E.a)(e||"MicrocreditService getDeeplink() hasError !")})))},e.prototype.getSpecialHeaders=function(){var e=(new h.e).set("X-Systemcode","90");return this.identToken?e.set("X-Ident-Token",this.identToken):e},e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](h.b),u["\u0275\u0275inject"](f.c))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),P=function(){function e(e,t){this.router=e,this.partnersLoanService=t}return e.prototype.canActivate=function(e){return this.partnersLoanService.identToken&&e.data.routeIndex===this.partnersLoanService.routeIndex||this.router.navigate([g.c.PARTNERS_LOAN])},e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](d.d),u["\u0275\u0275inject"](y))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),M=n("Ur8i"),D=n("mrSG"),w=n("Xznm"),k=n("nYR2"),j=n("1G5W"),B=n("l+2V"),F=n("AytR"),V=n("Ql4B"),U=n("fcMp"),G=n("V1FT"),H=n("gtvE"),q=n("+N/F"),z=n("0KWV"),K=n("o05C"),Q=n("VHTt"),X=n("1ua0"),W=n("9YtQ"),Y=n("TMn8"),$=n("TLf8"),J=n("6fPx"),Z=n("sYmb");function ee(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",21),u["\u0275\u0275element"](1,"preloader-sm"),u["\u0275\u0275elementEnd"]())}function te(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",22),u["\u0275\u0275element"](1,"img",23),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("ngClass",n.zoom&&!n.isMobile?"zoomed":""),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("src",null==n.captchaResponse?null:n.captchaResponse.imageBytes,u["\u0275\u0275sanitizeUrl"])}}var ne=function(e){return{requiredLength:e}};function re(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ul",24),u["\u0275\u0275elementStart"](1,"li",25),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"li",25),u["\u0275\u0275text"](5),u["\u0275\u0275pipe"](6,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"li",25),u["\u0275\u0275text"](8),u["\u0275\u0275pipe"](9,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"li",25),u["\u0275\u0275text"](11),u["\u0275\u0275pipe"](12,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"li",25),u["\u0275\u0275text"](14),u["\u0275\u0275pipe"](15,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("hidden",!(null!=n.captchaControl.errors&&n.captchaControl.errors.required)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,10,"VALIDATIONS.REQUIRED")," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("hidden",!(null!=n.captchaControl.errors&&n.captchaControl.errors.minlength)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](6,12,"VALIDATIONS.REQUIRED_LENGTH_CHARACTERS",u["\u0275\u0275pureFunction1"](22,ne,null==n.captchaControl.errors||null==n.captchaControl.errors.minlength?null:n.captchaControl.errors.minlength.requiredLength))," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("hidden",!(null!=n.captchaControl.errors&&n.captchaControl.errors.maxlength)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](9,15,"VALIDATIONS.REQUIRED_LENGTH_CHARACTERS",u["\u0275\u0275pureFunction1"](24,ne,null==n.captchaControl.errors||null==n.captchaControl.errors.maxlength?null:n.captchaControl.errors.maxlength.requiredLength))," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("hidden",!(null!=n.captchaControl.errors&&n.captchaControl.errors.captchaInvalid)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](12,18,"VALIDATIONS.INVALID_CAPTCHA_PROVIDED")," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("hidden",!(null!=n.captchaControl.errors&&n.captchaControl.errors.captchaExpired)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](15,20,n.unexpectedErrorMessage)," ")}}function oe(e,t){1&e&&u["\u0275\u0275element"](0,"fuib-digital-preloader",26)}var ie=function(e){return{"filter-blur-3":e}},ae=function(e){return{"is-invalid":e}},ce=function(e){function t(t,n,r,o,a){var c=e.call(this)||this;return c.dialogRef=t,c.data=n,c.changeDetectorRef=r,c.popupService=o,c.deviceService=a,c.zoom=!1,c.isLoading=!1,c.formSubmitAttempt=!1,c.captchaControl=new i.FormControl("",{validators:i.Validators.compose([i.Validators.required,i.Validators.minLength(6),i.Validators.maxLength(6)]),updateOn:"blur"}),c}return Object(D.d)(t,e),t.prototype.ngOnInit=function(){this.getCaptcha()},t.prototype.ngOnDestroy=function(){e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"isMobile",{get:function(){var e=this.deviceService.getDeviceInfo().os;return e===Q.b.IOS||e===Q.b.ANDROID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isControlInvalid",{get:function(){return this.captchaControl.invalid&&this.captchaControl.touched||this.captchaControl.untouched&&this.formSubmitAttempt},enumerable:!1,configurable:!0}),t.prototype.onSubmitCaptcha=function(){this.formSubmitAttempt=!0,this.captchaControl.valid&&this.sendCaptchaToVerification()},t.prototype.getCaptcha=function(){var e=this;this.captchaResponse=null,this.data.getCaptcha().pipe(Object(I.a)(this.handleError.bind(this)),Object(j.a)(this.componentDestroyed$)).subscribe((function(t){e.captchaResponse=t,e.changeDetectorRef.detectChanges()}))},t.prototype.closeModal=function(e){void 0===e&&(e=!1),this.dialogRef.close(e)},t.prototype.zoomCaptcha=function(){this.zoom=!this.zoom},t.prototype.updateCaptcha=function(e){e.stopPropagation(),this.getCaptcha()},t.prototype.sendCaptchaToVerification=function(){var e=this;this.isLoading=!0,this.changeDetectorRef.detectChanges(),this.data.sendCaptchaToVerification({challenge:this.captchaControl.value,captchaId:this.captchaResponse.id}).pipe(Object(I.a)((function(t){return e.handleError(t.error),Object(E.a)(t)})),Object(j.a)(this.componentDestroyed$),Object(k.a)((function(){e.isLoading=!1,e.changeDetectorRef.detectChanges()}))).subscribe((function(t){t.result?e.closeModal(!0):0===t.attemptsLeft?(e.getCaptcha(),e.captchaControl.setValue(""),e.captchaControl.setErrors({captchaInvalid:!0})):(e.captchaControl.setValue(""),e.captchaControl.setErrors({captchaInvalid:!0}))}))},t.prototype.handleError=function(e){var t=this;switch(e&&e.error&&e.error.code){case K.a.CAPTCHA_EXPIRED:this.captchaControl.setValue(""),this.captchaControl.setErrors({captchaExpired:!0}),this.unexpectedErrorMessage=e.error.code,this.getCaptcha();break;case K.a.SESSION_EXPIRED:this.popupService.create({text:"MICROCREDIT.SESSION_EXPIRED",buttons:[U.d.OK]}).subscribe((function(){t.closeModal()}))}},t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](X.h),u["\u0275\u0275directiveInject"](g.eb),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](G.a),u["\u0275\u0275directiveInject"](W.b))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["fuib-captcha-dialog"]],features:[u["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:19,consts:[[1,"dialog"],[3,"ngClass"],[1,"title-container"],[1,"title"],[1,"button-close",3,"click"],[1,"form-group","d-flex","pb-1","align-items-start","flex-column","flex-md-row"],["tabindex","0",1,"d-flex","align-items-center","justify-content-between","border","border-grey-50","bg-grey-10","rounded","mr-1","captcha","mb-4","mb-md-0",3,"focusout","click"],["class","d-flex m-auto",4,"ngIf"],["class","d-flex captcha-img-wrapper justify-content-center","tabindex","1","draggable","true",3,"ngClass",4,"ngIf"],[1,"d-flex","px-0"],["container","body",1,"btn","input-group-text","input-group-icon",3,"disabled","tooltip","click"],[1,"i-refresh"],[1,"flex-fill"],[1,"input-group","ml-auto","rounded","captcha-control",3,"ngClass"],["type","text","autocomplete","off","fuibIsFocused","","maxlength","6",1,"form-control",3,"formControl","focus","blur"],[1,"input-message-container"],["class","error-list",4,"ngIf"],[1,"buttons-container"],["type","button",1,"btn","cancel",3,"click"],["type","button",1,"btn","submit",3,"click"],["class","loading loading-centered loading-sm",4,"ngIf"],[1,"d-flex","m-auto"],["tabindex","1","draggable","true",1,"d-flex","captcha-img-wrapper","justify-content-center",3,"ngClass"],["loading","lazy","alt","captcha",1,"d-flex",3,"src"],[1,"error-list"],[3,"hidden"],[1,"loading","loading-centered","loading-sm"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275text"](4),u["\u0275\u0275pipe"](5,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",4),u["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",5),u["\u0275\u0275elementStart"](8,"div",6),u["\u0275\u0275listener"]("focusout",(function(e){return t.zoom=!1,e.stopPropagation()}))("click",(function(){return t.zoomCaptcha()})),u["\u0275\u0275template"](9,ee,2,0,"div",7),u["\u0275\u0275template"](10,te,2,2,"div",8),u["\u0275\u0275elementStart"](11,"div",9),u["\u0275\u0275elementStart"](12,"button",10),u["\u0275\u0275listener"]("click",(function(e){return t.updateCaptcha(e)})),u["\u0275\u0275pipe"](13,"translate"),u["\u0275\u0275element"](14,"i",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",12),u["\u0275\u0275elementStart"](16,"div",13),u["\u0275\u0275elementStart"](17,"input",14),u["\u0275\u0275listener"]("focus",(function(){return t.zoom=!0}))("blur",(function(){return t.zoom=!1})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",15),u["\u0275\u0275template"](19,re,16,26,"ul",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",17),u["\u0275\u0275elementStart"](21,"button",18),u["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),u["\u0275\u0275text"](22,"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"button",19),u["\u0275\u0275listener"]("click",(function(){return t.onSubmitCaptcha()})),u["\u0275\u0275text"](24,"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](25,oe,1,0,"fuib-digital-preloader",20),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](15,ie,t.isLoading)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](5,11,"REGISTRATION_DIIA.ENTER_CODE_FROM_IMAGE")),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",!t.captchaResponse),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.captchaResponse),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",!t.captchaResponse)("tooltip",u["\u0275\u0275pipeBind1"](13,13,"REGISTRATION.TOOLTIPS.REFRESH_CAPTCHA")),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](17,ae,t.isControlInvalid)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formControl",t.captchaControl),u["\u0275\u0275attribute"]("data-fuib",t.captchaControl.value),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.isControlInvalid),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.isLoading))},directives:[o.q,o.t,p.l,i.DefaultValueAccessor,Y.a,i.MaxLengthValidator,i.NgControlStatus,i.FormControlDirective,$.a,J.a],pipes:[Z.d],styles:['.dropdown-menu[_ngcontent-%COMP%]{z-index:1080}[_nghost-%COMP%]{position:relative;width:100%;height:100%}@media (min-width:768px){[_nghost-%COMP%]{min-width:504px}}.dialog[_ngcontent-%COMP%]{position:relative}.input-message-container[_ngcontent-%COMP%]{transition:all .5s ease}.btn-link[_ngcontent-%COMP%]{cursor:pointer}.grey[_ngcontent-%COMP%]{color:#6d6d7a}.small[_ngcontent-%COMP%]{font-size:12px!important}.captcha[_ngcontent-%COMP%]{width:256px;height:48px;margin-right:8px!important;cursor:pointer;line-height:0}@media (min-width:768px){.captcha[_ngcontent-%COMP%]{width:150px}}.captcha-img-wrapper[_ngcontent-%COMP%]{overflow:hidden;height:100%;max-height:100%;transition:all .5s ease-in-out;width:100%}.captcha-img-wrapper.zoomed[_ngcontent-%COMP%]{transform:scale(2.02);z-index:9999;border-radius:4px!important;border:1px solid #93939e;background:#f5f5fa}.captcha-img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px 0 0 8px}.captcha-control[_ngcontent-%COMP%]{transition:all .5s ease-in-out}@media (max-width:768px){.captcha-control[_ngcontent-%COMP%]{width:256px}}.captcha-zoom-trigger[_ngcontent-%COMP%]{min-width:48px;height:100%;border-radius:0;border-top-right-radius:8px;border-bottom-right-radius:8px;justify-content:center;background:#fff;align-items:center}.captcha[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-width:1px!important;border:0;border-left:1px solid #93939e;border-top-left-radius:0;border-bottom-left-radius:0}.captcha[_ngcontent-%COMP%]   .i-search[_ngcontent-%COMP%]:before{color:#b6b6bf}.buttons-container[_ngcontent-%COMP%]{display:flex;min-height:40px;flex-wrap:wrap;justify-content:flex-end;padding:16px 24px;border-top:1px solid #e1e1e8}.buttons-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;min-height:40px;max-width:132px;border-radius:100px;font-family:gilroy;font-style:normal;font-weight:700;font-size:14px;line-height:20px;text-align:center;letter-spacing:.18px;color:#4d4d5c;margin:0 5px}.buttons-container[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]{border:2px solid #f91f2b;background:none}.buttons-container[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]:hover, .buttons-container[_ngcontent-%COMP%]   .btn.submit[_ngcontent-%COMP%]{background:#f91f2b;color:#fff}.buttons-container[_ngcontent-%COMP%]   .btn.submit[_ngcontent-%COMP%]:hover{background:#fc979d}.form-group[_ngcontent-%COMP%]{padding:0 24px;margin:30px 0}.title-container[_ngcontent-%COMP%]{height:64px;display:flex;align-items:center;position:relative;justify-content:space-between;border-bottom:1px solid #e1e1e8;padding:0 24px}.title-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:gilroy;font-style:normal;font-weight:700;font-size:20px;line-height:24px;letter-spacing:.4px;color:#4d4d5c}.button-close[_ngcontent-%COMP%]{position:relative;justify-content:center;display:flex;cursor:pointer;width:18px;height:18px;opacity:.7;transition:all .3s}.button-close[_ngcontent-%COMP%]:hover{opacity:1}.button-close[_ngcontent-%COMP%]:after, .button-close[_ngcontent-%COMP%]:before{position:absolute;content:" ";height:100%;margin:0 auto;width:2px;background:#93939e;border-radius:4px}.button-close[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.button-close[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}'],changeDetection:0}),t}(H.a),pe=n("SKBu"),se=n("ob5s"),le=n("Icvn");function de(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"VALIDATIONS.REQUIRED")," "))}function ue(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"VALIDATIONS.INVALID_PHONE")," "))}function me(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,null==n.phoneNumberControl.errors?null:n.phoneNumberControl.errors.phoneError)," ")}}function ge(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ul",30),u["\u0275\u0275template"](1,de,3,3,"li",31),u["\u0275\u0275template"](2,ue,3,3,"li",31),u["\u0275\u0275template"](3,me,3,3,"li",31),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.phoneNumberControl.errors?null:n.phoneNumberControl.errors.required),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.phoneNumberControl.errors?null:n.phoneNumberControl.errors.pattern),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.phoneNumberControl.errors?null:n.phoneNumberControl.errors.phoneError)}}function he(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"VALIDATIONS.REQUIRED")," "))}function fe(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"REGISTRATION_DIIA.ANKETA.EMAIL_INVALID")," "))}function Ee(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"VALIDATIONS.RESTRICTED_EMAIL")," "))}var Ie=function(e){return{requiredLength:e}};function Ce(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](2,1,"VALIDATIONS.EMAIL_MAX_LENGTH_CHARACTERS",u["\u0275\u0275pureFunction1"](4,Ie,n.availableEmailMaxLength))," ")}}function Se(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ul",30),u["\u0275\u0275template"](1,he,3,3,"li",31),u["\u0275\u0275template"](2,fe,3,3,"li",31),u["\u0275\u0275template"](3,Ee,3,3,"li",31),u["\u0275\u0275template"](4,Ce,3,6,"li",31),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.mailControl.errors?null:n.mailControl.errors.required),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==n.mailControl.errors?null:n.mailControl.errors.email)&&!(null!=n.mailControl.errors&&n.mailControl.errors.required)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.mailControl.errors?null:n.mailControl.errors.restrictedEmail),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.mailControl.errors?null:n.mailControl.errors.maxlength)}}function _e(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"li"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"VALIDATIONS.REQUIRED")," "))}function Oe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ul",30),u["\u0275\u0275template"](1,_e,3,3,"li",31),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.avgMonthlyEarningAmountControl.errors?null:n.avgMonthlyEarningAmountControl.errors.required)}}var be=function(e){return{"filter-blur-3":e}},ve=function(e){return{mask:e}};function Re(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",8),u["\u0275\u0275elementStart"](1,"div",9),u["\u0275\u0275element"](2,"fuib-input-with-slider",10),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",11),u["\u0275\u0275elementStart"](5,"label",12),u["\u0275\u0275text"](6),u["\u0275\u0275pipe"](7,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",13),u["\u0275\u0275elementStart"](9,"div",14),u["\u0275\u0275elementStart"](10,"span",15),u["\u0275\u0275text"](11,"+380"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](12,"input",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",17),u["\u0275\u0275template"](14,ge,4,3,"ul",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",11),u["\u0275\u0275elementStart"](16,"label",19),u["\u0275\u0275text"](17),u["\u0275\u0275pipe"](18,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",13),u["\u0275\u0275element"](20,"input",20),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",17),u["\u0275\u0275template"](22,Se,5,4,"ul",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"div",11),u["\u0275\u0275elementStart"](24,"label"),u["\u0275\u0275text"](25),u["\u0275\u0275pipe"](26,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",21),u["\u0275\u0275element"](28,"input",22),u["\u0275\u0275elementStart"](29,"div",23),u["\u0275\u0275text"](30,"UAH"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"div",17),u["\u0275\u0275template"](32,Oe,2,1,"ul",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"div",24),u["\u0275\u0275elementStart"](34,"label",25),u["\u0275\u0275elementStart"](35,"input",26),u["\u0275\u0275listener"]("change",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().applyShakeAnimationForPrivacyPolicy()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](36,"div",27),u["\u0275\u0275elementStart"](37,"span"),u["\u0275\u0275text"](38),u["\u0275\u0275pipe"](39,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"a",28),u["\u0275\u0275text"](41),u["\u0275\u0275pipe"](42,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](43,"button",29),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().onSubmit()})),u["\u0275\u0275text"](44),u["\u0275\u0275pipe"](45,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var r=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",r.form)("ngClass",u["\u0275\u0275pureFunction1"](41,be,r.isLoading)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("min",r.sumMin)("max",r.sumMax)("step",r.sumStep)("label",u["\u0275\u0275pipeBind1"](3,27,"MICROCREDIT.CREDIT_REQUEST_FORM.AMOUNT"))("valueMask",r.sumMask),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](7,29,"MICROCREDIT.CREDIT_REQUEST_FORM.PHONE")),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngClass",r.controlClass(r.phoneNumberControl)),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("textMask",u["\u0275\u0275pureFunction1"](43,ve,r.phoneMask)),u["\u0275\u0275attribute"]("data-fuib",r.phoneNumberControl.value),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",r.isControlInvalid(r.phoneNumberControl)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](18,31,"MICROCREDIT.CREDIT_REQUEST_FORM.EMAIL")),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngClass",r.controlClass(r.mailControl)),u["\u0275\u0275advance"](1),u["\u0275\u0275attribute"]("data-fuib",r.mailControl.value),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",r.isControlInvalid(r.mailControl)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](26,33,"MICROCREDIT.PARTNERS_LOAN.MONTHLY_NET_INCOME")),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngClass",r.controlClass(r.avgMonthlyEarningAmountControl)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formControlName","avgMonthlyEarningAmount")("textMask",u["\u0275\u0275pureFunction1"](45,ve,r.avgMonthlyEarningAmountMask))("placeholder","0"),u["\u0275\u0275attribute"]("data-fuib",r.avgMonthlyEarningAmountControl.value),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",r.isControlInvalid(r.avgMonthlyEarningAmountControl)),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("@shake",r.shakeAnimationState),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](39,35,"MICROCREDIT.PARTNERS_LOAN.PERSONAL_DATA")),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](42,37,"MICROCREDIT.PARTNERS_LOAN.PRIVACY_POLICY")," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](45,39,"MICROCREDIT.CREDIT_REQUEST_FORM.CONTINUE")," ")}}function Te(e,t){1&e&&u["\u0275\u0275element"](0,"fuib-digital-preloader",32)}var Ae=function(e){function t(t,n,r,o,i,a,c,p,s){var l=e.call(this)||this;return l.formBuilder=t,l.router=n,l.route=r,l.changeDetectorRef=o,l.partnersLoanService=i,l.dialog=a,l.popupService=c,l.cookiesService=p,l.deviceService=s,l.phoneMask=S.cb,l.sumMax=2e5,l.sumMin=1e4,l.sumStep=1e3,l.sumMask=z.i,l.avgMonthlyEarningAmountMask=Object(B.createNumberMask)({prefix:"",thousandsSeparatorSymbol:" ",decimalLimit:0,requireDecimal:!1}),l.siteKey=F.a.recaptcha.siteKeyMicrocredit,l.availableEmailMaxLength=q.o,l}return Object(D.d)(t,e),Object.defineProperty(t.prototype,"mailControl",{get:function(){return this.form.controls.mail},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"phoneNumberControl",{get:function(){return this.form.controls.phoneNumber},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"avgMonthlyEarningAmountControl",{get:function(){return this.form.controls.avgMonthlyEarningAmount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"privacyPolicyControl",{get:function(){return this.form.controls.clientPermission},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.createForm(),this.partnersLoanService.routeIndex=N.CREDIT_REQUEST_FORM,this.partnersLoanService.smsCountdown=v,this.partnersLoanService.qrImage="",this.partnersLoanService.deepLinkCountdown=-1,this.cookiesService.delete(R)},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.applyShakeAnimationForPrivacyPolicy=function(){this.shakeAnimationState=this.privacyPolicyControl.value?V.a.still:V.a.shaking},t.prototype.onSubmit=function(){var e=this;if(this.form.markAllAsTouched(),this.form.updateValueAndValidity(),this.form.valid){this.isLoading=!0;var t=this.form.getRawValue(),n=t.phoneNumber,r=t.clientPermission,o=t.partnerName,i=t.orderId,a=t.customerId,c=t.fullName,p=t.process,s=t.avgMonthlyEarningAmount,l={sum:t.sum,mail:t.mail.trim(),phoneNumber:"+380"+n.replace("(","").replace(")","").replace("-","").replace(" ",""),action:"microcredit",clientPermission:r,datePermission:new Date(Date.now()).toISOString(),partnerName:o,orderId:i,customerId:a,fullName:c,process:p,avgMonthlyEarningAmount:s.replace(/\s+/g,""),supplyChannel:this.deviceService.isDesktop()?"WEB_DESKTOP":"WEB_"+this.deviceService.os.toUpperCase()};try{grecaptcha&&grecaptcha.ready?grecaptcha.ready((function(){grecaptcha.execute(e.siteKey,{action:"microcredit"}).then((function(t){l.recaptchaToken=t,e.getScore(l)}))})):this.getScore(l)}catch(d){this.getScore(l)}}else!1===this.form.getRawValue().clientPermission&&(this.shakeAnimationState=V.a.still,setTimeout((function(){e.shakeAnimationState=V.a.shaking,e.changeDetectorRef.detectChanges()})))},t.prototype.isControlInvalid=function(e){return e.invalid&&e.touched},t.prototype.controlClass=function(e){return this.isControlInvalid(e)?"is-invalid":""},t.prototype.getScore=function(e){var t=this;this.partnersLoanService.getScore(e).pipe(Object(I.a)((function(e){return t.unexpectedErrorMessage=K.a.UNKNOWN,Object(E.a)(e)})),Object(k.a)((function(){t.isLoading=!1,t.changeDetectorRef.detectChanges()})),Object(j.a)(this.componentDestroyed$)).subscribe((function(n){if(t.partnersLoanService.identToken=n.identToken,t.partnersLoanService.phoneNumber=e.phoneNumber,n.result)t.goToNextStep();else{var r={getCaptcha:t.partnersLoanService.getCaptcha.bind(t.partnersLoanService),sendCaptchaToVerification:t.partnersLoanService.sendCaptchaToVerification.bind(t.partnersLoanService)};t.dialogRef=t.dialog.open(ce,{data:r}),t.dialogRef.afterClosed().pipe(Object(j.a)(t.componentDestroyed$)).subscribe((function(e){e&&t.goToNextStep()}))}var o=JSON.stringify(Object(D.a)(Object(D.a)({},e),{identToken:n.identToken}));t.cookiesService.setWithMaxAge(_,o,O)}))},t.prototype.goToNextStep=function(){var e=this;this.partnersLoanService.getOtp({phoneNumber:this.partnersLoanService.phoneNumber}).pipe(Object(I.a)((function(t){return e.handleError(t),Object(E.a)(t)})),Object(j.a)(this.componentDestroyed$)).subscribe((function(t){e.updateOtpFormStatus(1e3*t.otpTtl,t.attemptsCount),e.partnersLoanService.routeIndex=N.OTP,e.router.navigate([g.c.PARTNERS_LOAN_OTP])}))},t.prototype.createForm=function(){var e=this.cookiesService.get(_),t=e&&JSON.parse(e),n=this.route.snapshot.queryParams,r=!!(n&&n.partner_name&&n.order_id&&n.customer_id);if(r&&t&&n.order_id===t.orderId||!r&&t){var o=this.getPhoneNumber(t.phoneNumber,4,6);this.form=this.formBuilder.group(this.formValues(t.mail,o,t.partnerName,t.orderId,t.customerId,t.fullName,t.avgMonthlyEarningAmount))}else r?(o=n.phone?this.getPhoneNumber(n.phone,4,6):"",this.form=this.formBuilder.group(this.formValues(n.email,o,n.partner_name,n.order_id,n.customer_id,n.full_name))):(this.form=this.formBuilder.group(this.formValues()),this.showUnknownErrorPopup())},t.prototype.getPhoneNumber=function(e,t,n){return"("+e.substring(t,n)+") "+e.substring(n,n+3)+"-"+e.substring(n+3)},t.prototype.formValues=function(e,t,n,r,o,a,c){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a=""),void 0===c&&(c=""),{sum:[1e5],phoneNumber:[t,i.Validators.compose([i.Validators.required,i.Validators.pattern(S.eb)])],mail:[e,i.Validators.compose([i.Validators.required,w.e,w.j,i.Validators.maxLength(q.o)])],clientPermission:[!1,i.Validators.requiredTrue],partnerName:[n,i.Validators.required],orderId:[r,i.Validators.required],customerId:[o,i.Validators.required],fullName:[a],action:["microcredit"],process:["epicentr"],avgMonthlyEarningAmount:[c,i.Validators.required]}},t.prototype.handleError=function(e){var t=e.error;switch(t&&t.error&&t.error.code){case K.a.SMS_LIMIT_EXCEEDED:this.phoneNumberControl.setErrors({phoneError:K.a.SMS_LIMIT_EXCEEDED});break;case K.a.UNKNOWN:case K.a.SEND_SMS_EXCEPTION:this.popupService.create({text:"MICROCREDIT.UNKNOWN_ERROR",buttons:[U.d.OK]})}this.changeDetectorRef.detectChanges()},t.prototype.updateOtpFormStatus=function(e,t){var n=new Date(Date.now()+e).toISOString();this.cookiesService.setWithMaxAge(b,JSON.stringify({smsCountdownTimeEnd:n,otpSmsAttemptsCount:t,otpAttemptsLeft:3}),O),this.partnersLoanService.smsCountdown=e,this.partnersLoanService.otpSmsAttemptsCount=t,this.partnersLoanService.otpAttemptsLeft=3},t.prototype.showUnknownErrorPopup=function(){this.popupService.create({caption:"ERROR",text:"MICROCREDIT.PARTNERS_LOAN.UNKNOWN_ERROR",iconType:{src:"/assets/icons/icon-info.svg"},options:{showCloseButton:!1,overlayClickToCancel:!1}}).pipe(Object(j.a)(this.componentDestroyed$)).subscribe()},t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](i.FormBuilder),u["\u0275\u0275directiveInject"](d.d),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](y),u["\u0275\u0275directiveInject"](f.d),u["\u0275\u0275directiveInject"](G.a),u["\u0275\u0275directiveInject"](f.c),u["\u0275\u0275directiveInject"](W.b))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["pl-apply-for-loan"]],features:[u["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:3,consts:[[1,"apply-for-loan__container","position-relative","d-flex","flex-column","align-items-center","justify-content-center","pt-2"],["class","w-100",3,"formGroup","ngClass",4,"ngIf"],["class","loading loading-centered loading-sm",4,"ngIf"],[1,"recaptcha-info","mt-4"],["href","https://policies.google.com/privacy?hl=uk","target","_blank",1,"btn-link","btn-link-underlined","small"],["href","https://policies.google.com/terms?hl=uk","target","_blank",1,"btn-link","btn-link-underlined","small"],["fuibFacebookPixel",""],[3,"fuibGoogleReCaptcha"],[1,"w-100",3,"formGroup","ngClass"],[1,"form-group","mb-1"],["formControlName","sum",3,"min","max","step","label","valueMask"],[1,"form-group"],["for","phone"],[1,"input-group","input-phone",3,"ngClass"],[1,"input-group-prepend"],[1,"input-group-text"],["id","phone","type","phone","formControlName","phoneNumber","inputmode","tel","placeholder","(00) 000-0000","fuibIsFocused","",1,"form-control","phone",3,"textMask"],[1,"input-message-container"],["class","error-list",4,"ngIf"],["for","email"],["id","email","type","email","autocomplete","off","formControlName","mail","placeholder","my.email@example.com","fuibIsFocused","",1,"form-control","pl-3"],[1,"input-group","w-100",3,"ngClass"],["type","text","inputmode","decimal",1,"form-control","input-net-income",3,"formControlName","textMask","placeholder"],[1,"input-group-text","append","pl-1"],[1,"form-group","d-flex","pt-3","mb-3","my-1"],["for","privacyPolicy",1,"d-flex","position-relative","mb-2","fsz-1","color-grey-60"],["id","privacyPolicy","type","checkbox","formControlName","clientPermission",1,"mr-3",3,"change"],[1,"flex-grow-2","align-self-center"],["href","https://about.pumb.ua/info/personal_data","target","_blank",1,"btn-link","btn-link-underlined"],["id","submitBtn","type","button",1,"apply-for-loan__submit","btn","btn-block","btn-primary","btn-lg",3,"click"],[1,"error-list"],[4,"ngIf"],[1,"loading","loading-centered","loading-sm"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275template"](1,Re,46,47,"div",1),u["\u0275\u0275template"](2,Te,1,0,"fuib-digital-preloader",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275text"](4," \u0417\u0430\u0445\u0438\u0441\u0442 \u0432\u0456\u0434 \u0441\u043f\u0430\u043c\u0443 reCAPTCHA. "),u["\u0275\u0275elementStart"](5,"a",4),u["\u0275\u0275text"](6," \u041f\u043e\u043b\u0456\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0456\u0434\u0435\u043d\u0446\u0456\u0439\u043d\u043e\u0441\u0442\u0456 "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](7," \u0442\u0430 "),u["\u0275\u0275elementStart"](8,"a",5),u["\u0275\u0275text"](9," \u0423\u043c\u043e\u0432\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](10,"div",6),u["\u0275\u0275element"](11,"div",7)),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.form),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isLoading),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("fuibGoogleReCaptcha",t.siteKey))},directives:[o.t,pe.a,se.a,i.NgControlStatusGroup,i.FormGroupDirective,o.q,le.a,i.NgControlStatus,i.FormControlName,i.DefaultValueAccessor,Y.a,a.MaskedInputDirective,i.CheckboxControlValueAccessor,J.a],pipes:[Z.d],styles:[".dropdown-menu[_ngcontent-%COMP%]{z-index:1080}.apply-for-loan__container[_ngcontent-%COMP%]{max-width:460px;margin:0 auto}.apply-for-loan__container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{height:20px}.apply-for-loan__container[_ngcontent-%COMP%]   .form-control.phone[_ngcontent-%COMP%]{height:auto}.apply-for-loan__container[_ngcontent-%COMP%]   .input-net-income[_ngcontent-%COMP%]{height:inherit;border-right:0;background-image:none}.apply-for-loan__container[_ngcontent-%COMP%]   .input-net-income[_ngcontent-%COMP%]:focus, .apply-for-loan__container[_ngcontent-%COMP%]   .input-net-income[_ngcontent-%COMP%]:hover{box-shadow:none}.apply-for-loan__container[_ngcontent-%COMP%]   .append[_ngcontent-%COMP%]{border-left:0;border-radius:0 .5rem .5rem 0;color:#869fac;display:block;max-width:9rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.apply-for-loan__container[_ngcontent-%COMP%]   .append[_ngcontent-%COMP%]:focus, .apply-for-loan__container[_ngcontent-%COMP%]   .append[_ngcontent-%COMP%]:hover{box-shadow:none}@media (min-width:320px) and (max-width:768px){.apply-for-loan[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%], .apply-for-loan__personal-data[_ngcontent-%COMP%]{font-size:14px!important}}@media (min-width:320px) and (max-width:768px){.apply-for-loan__submit[_ngcontent-%COMP%]{height:40px}}.btn-link[_ngcontent-%COMP%]{cursor:pointer;color:#6d6d7a;font-size:1rem}.btn-link[_ngcontent-%COMP%]:hover{color:#f91f2b}.recaptcha-info[_ngcontent-%COMP%]{height:16px;font-family:gilroy;font-style:normal;font-weight:500;font-size:12px;line-height:16px;text-align:center;letter-spacing:.25px;color:#93939e;width:100%}.small[_ngcontent-%COMP%]{font-size:12px!important}.grey[_ngcontent-%COMP%]{color:#6d6d7a}#cfat[_ngcontent-%COMP%]{display:none;width:0;height:0}"],data:{animation:[V.f]},changeDetection:0}),t}(H.a),xe=n("PqYM"),Ne=n("Kqap"),Le=n("GJmQ"),ye=n("Ue6F");function Pe(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"fuib-countdown",23),u["\u0275\u0275listener"]("counterTimeIsOver",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).handleTimeIsOver()})),u["\u0275\u0275elementStart"](1,"span",24),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"span",25),u["\u0275\u0275text"](5," )"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var r=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("endMilliseconds",r.smsCountdown),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("( ",u["\u0275\u0275pipeBind1"](3,2,"MICROCREDIT.OTP_FORM.TIME_LEFT")," ")}}function Me(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",26),u["\u0275\u0275elementStart"](1,"button",27),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).getOtp()})),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275element"](3,"i",28),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("tooltip",u["\u0275\u0275pipeBind1"](2,1,"MICROCREDIT.OTP_FORM.RESEND_OTP")))}var De=function(){return{number:4}},we=function(e){return{attemptsLeft:e}};function ke(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ul",29),u["\u0275\u0275elementStart"](1,"li",30),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"li",30),u["\u0275\u0275text"](5),u["\u0275\u0275pipe"](6,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"li",30),u["\u0275\u0275text"](8),u["\u0275\u0275pipe"](9,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("hidden",!(null!=n.otpControl.errors&&n.otpControl.errors.required)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,6,"VALIDATIONS.REQUIRED")," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("hidden",!(null!=n.otpControl.errors&&n.otpControl.errors.pattern)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](6,8,"VALIDATIONS.CODE_SHOULD_CONSIST_DIGITS",u["\u0275\u0275pureFunction0"](14,De))," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("hidden",!(null!=n.otpControl.errors&&n.otpControl.errors.otpError)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](9,11,"VALIDATIONS.INVALID_OTP_PROVIDED",u["\u0275\u0275pureFunction1"](15,we,n.otpAttemptsLeft))," ")}}var je=function(e){return{"is-invalid":e}};function Be(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",15),u["\u0275\u0275elementStart"](1,"label",16),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275template"](4,Pe,6,4,"fuib-countdown",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",18),u["\u0275\u0275element"](6,"input",19),u["\u0275\u0275template"](7,Me,4,3,"div",20),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",21),u["\u0275\u0275template"](9,ke,10,17,"ul",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,6,"MICROCREDIT.OTP_FORM.OTP")," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",n.smsCountdown),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](8,je,n.isControlInvalid(n.otpControl))),u["\u0275\u0275advance"](1),u["\u0275\u0275attribute"]("data-fuib",n.otpControl.value),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.isResendOtpBtnAvailable),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",n.isControlInvalid(n.otpControl))}}function Fe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",31),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](2,1,n.errorMessage))}}function Ve(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",32),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().getOtp()})),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"BUTTONS.RESEND_OTP")," "))}function Ue(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",33),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().onSubmit()})),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"CONTINUE")," "))}function Ge(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",34),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.unexpectedErrorMessage," ")}}function He(e,t){1&e&&u["\u0275\u0275element"](0,"fuib-digital-preloader",35)}var qe=function(e){return{"filter-blur-3":e}},ze=function(e){function t(t,n,r,o,i,a){var c=e.call(this)||this;return c.formBuilder=t,c.router=n,c.changeDetectorRef=r,c.partnersLoanService=o,c.popupService=i,c.cookiesService=a,c.shakeAnimationState=V.a.still,c.phoneNumber=c.partnersLoanService.phoneNumber,c.smsCountdown=c.partnersLoanService.smsCountdown,c.otpSmsAttemptsCount=c.partnersLoanService.otpSmsAttemptsCount,c.otpAttemptsLeft=c.partnersLoanService.otpAttemptsLeft,c.timeIsOver=!1,c}return Object(D.d)(t,e),Object.defineProperty(t.prototype,"otpControl",{get:function(){return this.otpForm.controls.otp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextStepAvailable",{get:function(){return 0!==this.otpAttemptsLeft&&!this.timeIsOver&&!this.errorMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isResendOtpBtnAvailable",{get:function(){return this.otpSmsAttemptsCount>0},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.createForm(),this.otpAttemptsLeft<=0&&(this.errorMessage=this.isResendOtpBtnAvailable?"MICROCREDIT.OTP_FORM.INVALID_SMS_CODE_RETRIES_EXCEEDED":K.a.SMS_LIMIT_EXCEEDED)},t.prototype.ngOnDestroy=function(){e.prototype.destroy.call(this)},t.prototype.onSubmit=function(){this.formSubmitAttempt=!0,this.otpForm.valid&&this.sendOtp()},t.prototype.getOtp=function(){var e=this;this.isLoading=!0;var t={phoneNumber:"+"+this.phoneNumber.replace(/\D+/g,"")};this.partnersLoanService.getOtp(t).pipe(Object(I.a)((function(t){return e.resetForm(),e.handleError(t.error),Object(E.a)(t)})),Object(k.a)((function(){e.isLoading=!1,e.changeDetectorRef.detectChanges()})),Object(j.a)(this.componentDestroyed$)).subscribe((function(t){e.otpSmsAttemptsCount=t.attemptsCount,e.smsCountdown=1e3*t.otpTtl,e.otpAttemptsLeft=1,e.timeIsOver=!1,e.resetForm(),e.countdownComponent&&e.countdownComponent.restartCounter(),e.updateOtpFormStatus(e.smsCountdown,e.otpSmsAttemptsCount)}))},t.prototype.goToApplyForLoan=function(){this.router.navigate([g.c.PARTNERS_LOAN])},t.prototype.isControlInvalid=function(e){return e.invalid&&e.touched||e.untouched&&this.formSubmitAttempt},t.prototype.handleTimeIsOver=function(){this.isLoading||(this.resetForm(),this.timeIsOver=!0,this.errorMessage=this.isResendOtpBtnAvailable?K.a.SMS_TIME_EXCEEDED:K.a.SMS_LIMIT_EXCEEDED,this.changeDetectorRef.detectChanges())},t.prototype.applyShakeAnimationForAgreement=function(){var e=this;Object(xe.a)(0,3e3).pipe(Object(Ne.a)((function(e){return--e}),4),Object(Le.a)((function(t){return e.changeDetectorRef.detectChanges(),e.shakeAnimationState=V.a.shaking,e.changeDetectorRef.detectChanges(),t>=0})),Object(j.a)(this.componentDestroyed$)).subscribe((function(){return e.shakeAnimationState=V.a.still}))},t.prototype.createForm=function(){this.otpForm=this.formBuilder.group({otp:["",{validators:i.Validators.compose([i.Validators.required,i.Validators.pattern(/\d{4}/)]),updateOn:"blur"}]})},t.prototype.sendOtp=function(){var e=this;this.isLoading=!0,this.partnersLoanService.checkOtp({otp:this.otpControl.value}).pipe(Object(I.a)((function(t){return e.resetForm(),e.handleError(t.error),Object(E.a)(t)})),Object(k.a)((function(){e.isLoading=!1,e.changeDetectorRef.detectChanges()})),Object(j.a)(this.componentDestroyed$)).subscribe((function(t){e.otpAttemptsLeft=t.attemptsLeft,t.result?e.getNextPage():0===t.attemptsLeft?(e.errorMessage=e.isResendOtpBtnAvailable?"MICROCREDIT.OTP_FORM.INVALID_SMS_CODE_RETRIES_EXCEEDED":K.a.SMS_LIMIT_EXCEEDED,e.errorMessage===K.a.SMS_LIMIT_EXCEEDED&&e.applyShakeAnimationForAgreement()):(e.otpControl.setValue(""),e.otpControl.setErrors({otpError:!0})),e.updateOtpFormStatus(e.smsCountdown,e.otpSmsAttemptsCount,e.otpAttemptsLeft)}))},t.prototype.getNextPage=function(){this.partnersLoanService.routeIndex=N.SCAN_QR,this.router.navigate([g.c.PARTNERS_LOAN_SCAN_QR])},t.prototype.resetForm=function(){this.otpForm.reset(),this.errorMessage=null,this.unexpectedErrorMessage=null,this.formSubmitAttempt=!1},t.prototype.handleError=function(e){var t=this;if(e&&e.error&&e.error.code)switch(e.error.code){case K.a.SESSION_EXPIRED:this.popupService.createAndCallPopup(g.c.PARTNERS_LOAN,"MICROCREDIT.SESSION_EXPIRED");break;case K.a.SMS_LIMIT_EXCEEDED:this.errorMessage=e.error.code,this.otpAttemptsLeft=0,this.applyShakeAnimationForAgreement();break;case K.a.SEND_SMS_EXCEPTION:case K.a.UNKNOWN:this.popupService.create({text:"MICROCREDIT.UNKNOWN_ERROR",buttons:[U.d.OK]}).subscribe((function(){t.router.navigate([g.c.PARTNERS_LOAN])}))}},t.prototype.updateOtpFormStatus=function(e,t,n){void 0===n&&(n=3);var r=new Date(Date.now()+e).toISOString();this.cookiesService.setWithMaxAge(b,JSON.stringify({smsCountdownTimeEnd:r,otpSmsAttemptsCount:t,otpAttemptsLeft:n}),O)},t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](i.FormBuilder),u["\u0275\u0275directiveInject"](d.d),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](y),u["\u0275\u0275directiveInject"](G.a),u["\u0275\u0275directiveInject"](f.c))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["pl-check-otp"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275viewQuery"](X.g,!0),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.countdownComponent=n.first)},features:[u["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:18,consts:[[1,"position-relative","d-flex","flex-column","align-items-center","justify-content-center","mt-4"],[1,"otp-form-container","w-100","mt-3","mt-md-0",3,"formGroup","ngClass"],[1,"form-group","border-bottom","border-gray-2","pb-2","mb-3","mt-3","mt-md-2"],[1,"d-flex","justify-content-between","align-items-center"],["id","phoneStr",1,"font-weight-bold","text-nowrap"],["type","button",1,"btn","btn-hidden","btn-text-with-icon",3,"click"],[1,"d-none","d-md-inline"],[1,"i-edit"],["class","form-group",4,"ngIf"],["class","info-message mb-3",4,"ngIf"],["class","btn btn-block btn-outline-primary btn-lg mt-2 mt-md-4","type","button",3,"click",4,"ngIf"],["class","btn btn-block btn-primary btn-lg mt-2 mt-md-4","type","button",3,"click",4,"ngIf"],["class","error-message mt-4 mb-3",4,"ngIf"],["class","loading loading-centered loading-sm",4,"ngIf"],["fuibFacebookPixel",""],[1,"form-group"],["for","countdown"],["id","countdown","units","Minutes | Seconds","divider",":",3,"endMilliseconds","counterTimeIsOver",4,"ngIf"],[1,"input-group",3,"ngClass"],["type","text","formControlName","otp","maxlength","4","fuibIsFocused","",1,"form-control"],["class","input-group-append",4,"ngIf"],[1,"input-message-container"],["class","error-list",4,"ngIf"],["id","countdown","units","Minutes | Seconds","divider",":",3,"endMilliseconds","counterTimeIsOver"],[1,"before-countdown"],[1,"after-countdown"],[1,"input-group-append"],["type","button","container","body",1,"btn","input-group-text","input-group-icon",3,"tooltip","click"],[1,"i-refresh"],[1,"error-list"],[3,"hidden"],[1,"info-message","mb-3"],["type","button",1,"btn","btn-block","btn-outline-primary","btn-lg","mt-2","mt-md-4",3,"click"],["type","button",1,"btn","btn-block","btn-primary","btn-lg","mt-2","mt-md-4",3,"click"],[1,"error-message","mt-4","mb-3"],[1,"loading","loading-centered","loading-sm"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"label"),u["\u0275\u0275text"](4),u["\u0275\u0275pipe"](5,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",3),u["\u0275\u0275elementStart"](7,"div",4),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"button",5),u["\u0275\u0275listener"]("click",(function(){return t.goToApplyForLoan()})),u["\u0275\u0275elementStart"](10,"span",6),u["\u0275\u0275text"](11),u["\u0275\u0275pipe"](12,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](13,"i",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](14,Be,10,10,"div",8),u["\u0275\u0275template"](15,Fe,3,3,"div",9),u["\u0275\u0275template"](16,Ve,3,3,"button",10),u["\u0275\u0275template"](17,Ue,3,3,"button",11),u["\u0275\u0275template"](18,Ge,2,1,"div",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](19,He,1,0,"fuib-digital-preloader",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](20,"div",14)),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",t.otpForm)("ngClass",u["\u0275\u0275pureFunction1"](16,qe,t.isLoading)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](5,12,"MICROCREDIT.CREDIT_REQUEST_FORM.PHONE")),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"](" ",t.phoneNumber," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("@shake",t.shakeAnimationState),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](12,14,"BUTTONS.CHANGE")),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.isNextStepAvailable),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.errorMessage),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.isNextStepAvailable&&t.isResendOtpBtnAvailable),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isNextStepAvailable),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.unexpectedErrorMessage),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isLoading))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,o.q,o.t,pe.a,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName,i.MaxLengthValidator,Y.a,ye.a,p.l,J.a],pipes:[Z.d],styles:[".otp-form-container[_ngcontent-%COMP%]{max-width:460px}@media (min-width:320px) and (max-width:768px){.btn-block[_ngcontent-%COMP%]{height:40px}}"],data:{animation:[V.f]},changeDetection:0}),t}(H.a),Ke=function(e){return[e]};function Qe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",1),u["\u0275\u0275elementStart"](1,"div",2),u["\u0275\u0275element"](2,"img",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](3,"div",4),u["\u0275\u0275pipe"](4,"translate"),u["\u0275\u0275element"](5,"div",5),u["\u0275\u0275pipe"](6,"translate"),u["\u0275\u0275elementStart"](7,"button",6),u["\u0275\u0275text"](8),u["\u0275\u0275pipe"](9,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("src",n.iconSrc,u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("innerHtml",u["\u0275\u0275pipeBind1"](4,6,n.resultPageParams.caption),u["\u0275\u0275sanitizeHtml"]),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngClass",n.isRefusalPage?"is-refusal":"")("innerHtml",u["\u0275\u0275pipeBind2"](6,8,n.resultPageParams.body,n.bodyTranslateParams),u["\u0275\u0275sanitizeHtml"]),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("routerLink",u["\u0275\u0275pureFunction1"](13,Ke,n.resultPageParams.routeLink)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](9,11,n.resultPageParams.buttonCaption)," ")}}var Xe=function(){function e(e){this.route=e}return e.prototype.ngOnInit=function(){var e=this;this.route.data.subscribe((function(t){var n=t.resultType;e.resultPageParams=L[n],e.currentResultType=n}))},Object.defineProperty(e.prototype,"iconSrc",{get:function(){return"assets/icons/"+this.resultPageParams.icon+".svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRefusalPage",{get:function(){return this.currentResultType===A.REFUSAL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyTranslateParams",{get:function(){return this.resultPageParams.bodyTranslateParams?this.resultPageParams.bodyTranslateParams.reduce((function(e,t){var n;return Object(D.a)(Object(D.a)({},e),((n={})[t.name]=t.value,n))}),{}):{}},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["fuib-result-page"]],decls:1,vars:1,consts:[["class","d-flex flex-column justify-content-center align-items-center result-page__container mx-auto mt-4 pt-4",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","result-page__container","mx-auto","mt-4","pt-4"],[1,"d-flex","mb-3","mt-5","pt-4"],["alt","Icon Credit Succeeded",3,"src"],[1,"d-flex","h5","mx-auto","mb-3","result-page__title",3,"innerHtml"],[1,"d-flex","mb-4","tac","result-page__message",3,"ngClass","innerHtml"],["type","button",1,"btn","btn-primary","w-100","result-page__button","fsz-1-1",3,"routerLink"]],template:function(e,t){1&e&&u["\u0275\u0275template"](0,Qe,10,15,"div",0),2&e&&u["\u0275\u0275property"]("ngIf",t.resultPageParams)},directives:[o.t,o.q,d.e],pipes:[Z.d],styles:[".result-page__container[_ngcontent-%COMP%]{max-width:456px}.result-page__title[_ngcontent-%COMP%]{line-height:32px}@media (max-width:768px){.result-page__title[_ngcontent-%COMP%]{font-size:25px}}@media (max-width:768px){.result-page__message[_ngcontent-%COMP%]{font-size:14px}.result-page__message.is-refusal[_ngcontent-%COMP%]{font-size:16px}}.result-page__button[_ngcontent-%COMP%]{height:56px}@media (max-width:768px){.result-page__button[_ngcontent-%COMP%]{height:40px}}"],changeDetection:0}),e}(),We=n("XNiG"),Ye=n("VRyK"),$e=n("l5mm"),Je=n("IzEk"),Ze=n("5+tZ"),et=n("npuH");function tt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",8),u["\u0275\u0275elementStart"](1,"div",9),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,1,"MICROCREDIT.SHARED_DOCUMENTS_DIA.INTERNAL_ERROR_MESSAGE")," "))}function nt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275element"](1,"qrcode",21),u["\u0275\u0275elementContainerEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](4);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("qrdata",n.qrImage)("width",168)("errorCorrectionLevel","H")}}function rt(e,t){1&e&&u["\u0275\u0275element"](0,"img",22)}function ot(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,nt,2,3,"ng-container",19),u["\u0275\u0275template"](2,rt,1,0,"ng-template",null,20,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementContainerEnd"]()),2&e){var n=u["\u0275\u0275reference"](3),r=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",r.qrImage&&!r.timeIsOver)("ngIfElse",n)}}function it(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"fuib-countdown",25),u["\u0275\u0275listener"]("counterTimeIsOver",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](4).handleTimeIsOver()})),u["\u0275\u0275elementEnd"]()}if(2&e){var r=u["\u0275\u0275nextContext"](4);u["\u0275\u0275property"]("endMilliseconds",r.deepLinkCountdown)}}function at(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275template"](1,it,1,1,"fuib-countdown",24),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.deepLinkCountdown)}}function ct(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",26),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](3).getDeepLink()})),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"MICROCREDIT.SHARED_DOCUMENTS_DIA.GENERATE_NEW_QR")," "))}function pt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",12),u["\u0275\u0275template"](1,ot,4,2,"ng-container",17),u["\u0275\u0275template"](2,at,2,1,"div",18),u["\u0275\u0275template"](3,ct,3,3,"button",4),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.isMobile),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.qrImage&&!n.timeIsOver),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.timeIsOver&&!n.isMobile)}}var st=function(e){return{"filter-blur-3":e}};function lt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",10),u["\u0275\u0275template"](1,pt,4,3,"div",11),u["\u0275\u0275elementStart"](2,"div",12),u["\u0275\u0275elementStart"](3,"ol",13),u["\u0275\u0275elementStart"](4,"li",14),u["\u0275\u0275text"](5),u["\u0275\u0275pipe"](6,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](7,"li",15),u["\u0275\u0275pipe"](8,"translate"),u["\u0275\u0275element"](9,"li",16),u["\u0275\u0275pipe"](10,"translate"),u["\u0275\u0275elementStart"](11,"li"),u["\u0275\u0275text"](12),u["\u0275\u0275pipe"](13,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](14,st,n.isLoading)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.isLoading),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](6,6,"MICROCREDIT.SHARED_DOCUMENTS_DIA.INFORMATION_BLOCK_PHRASE_1")," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](8,8,"MICROCREDIT.SHARED_DOCUMENTS_DIA.INFORMATION_BLOCK_PHRASE_2"),u["\u0275\u0275sanitizeHtml"]),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](10,10,"MICROCREDIT.SHARED_DOCUMENTS_DIA.INFORMATION_BLOCK_PHRASE_4"),u["\u0275\u0275sanitizeHtml"]),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](13,12,"MICROCREDIT.SHARED_DOCUMENTS_DIA.INFORMATION_BLOCK_PHRASE_3")," ")}}function dt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",27),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().openDiia()})),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"MICROCREDIT.SHARED_DOCUMENTS_DIA.OPEN_DIIA")," "))}function ut(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",26),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().getDeepLink()})),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"MICROCREDIT.SHARED_DOCUMENTS_DIA.GENERATE_NEW_QR")," "))}function mt(e,t){1&e&&u["\u0275\u0275element"](0,"fuib-digital-preloader",28)}function gt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"fuib-dialog-loader",29),u["\u0275\u0275elementContainerStart"](1,30),u["\u0275\u0275elementStart"](2,"div",31),u["\u0275\u0275elementStart"](3,"b"),u["\u0275\u0275text"](4),u["\u0275\u0275pipe"](5,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"p",32),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("modalConfig",n.loaderModalConfig),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](5,3,"MICROCREDIT.LOADER.PROCESSING_YOUR_INFORMATION")),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](8,5,"MICROCREDIT.LOADER.ESTIMATED_WAIT_TIME"))}}var ht=function(e){function t(t,n,r,o,i,a){var c=e.call(this)||this;return c.partnersLoanService=t,c.router=n,c.changeDetectorRef=r,c.popupService=o,c.cookiesService=i,c.deviceService=a,c.hasExtractingError=!1,c.isShowLoaderModal=!1,c.loaderModalConfig={dialogStyle:{width:"474px"},body:"mt-1 py-3",hiddenHeader:!0},c.isLoading=!1,c.timeIsOver=!1,c.deepLinkCountdown=c.partnersLoanService.deepLinkCountdown,c.qrImage=c.partnersLoanService.qrImage,c.newDeepLinkGenerated$=new We.a,c}return Object(D.d)(t,e),Object.defineProperty(t.prototype,"isMobile",{get:function(){return this.deviceService.isMobile()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){!this.deepLinkCountdown||this.deepLinkCountdown<0?this.getDeepLink():this.handleShareDocuments()},t.prototype.ngOnDestroy=function(){e.prototype.destroy.call(this)},t.prototype.getDeepLink=function(){var e=this;this.isLoading=!0,this.partnersLoanService.getSteps().pipe(Object(I.a)((function(t){return e.handleError(t.error),Object(E.a)(t)})),Object(Je.a)(1)).subscribe((function(t){var n=t.clientStep;n===x.VERIFIED_OTP||n===x.GENERATE_DEEPLINK?(e.timeIsOver=!0,e.hasExtractingError=!1,e.partnersLoanService.getDeeplink().pipe(Object(I.a)((function(t){return e.handleError(t.error),Object(E.a)(t)})),Object(k.a)((function(){e.isLoading=!1,e.changeDetectorRef.detectChanges()})),Object(j.a)(e.componentDestroyed$)).subscribe((function(t){e.qrImage=t.deeplink,e.deepLinkCountdown=9e4,e.timeIsOver=!1,e.stopRequestsStep(),e.updateDeepLinkFormStatus(),e.handleShareDocuments()}))):e.handleShareDocResult(n)}))},t.prototype.handleTimeIsOver=function(){this.isLoading||(this.timeIsOver=!0,this.errorMessage=Q.e.REGISTRATION_OTP_TIME_OUT,this.changeDetectorRef.detectChanges())},t.prototype.openDiia=function(){window.open(this.qrImage)},t.prototype.handleShareDocuments=function(){var e=this;this.newDeepLinkGenerated$=new We.a;var t=Object(Ye.a)(this.componentDestroyed$,this.newDeepLinkGenerated$);Object($e.a)(5e3).pipe(Object(Ze.b)((function(){return e.partnersLoanService.getSteps()})),Object(j.a)(t)).subscribe((function(t){e.handleShareDocResult(t.clientStep)}))},t.prototype.handleShareDocResult=function(e){var t=this;switch(e){case x.AVAILABLE_LIMIT:this.goToNextPage(g.c.PARTNERS_LOAN_LIMIT_IS_AGREED);break;case x.AVAILABLE_LIMIT_BANK_CLIENT:this.goToNextPage(g.c.PARTNERS_LOAN_LIMIT_IS_AGREED_CLIENT);break;case x.APPROVED_S1_NOT_BANK_CLIENT:this.goToNextPage(g.c.PARTNERS_LOAN_AVAILABLE);break;case x.APPROVED_S1_BANK_CLIENT:this.goToNextPage(g.c.PARTNERS_LOAN_AVAILABLE_CLIENT);break;case x.IDENT_DATE:this.goToNextPage(g.c.PARTNERS_LOAN_IDENT_DATE);break;case x.RM:case x.CREATED:case x.DIIA_DOCUMENTS_SHARED_ID_CARD:case x.DIIA_DOCUMENTS_SHARED_FOREIGN_PASSPORT:if(!1===this.isShowLoaderModal){this.isShowLoaderModal=!0;var n=Object(Ye.a)(this.componentDestroyed$,this.newDeepLinkGenerated$);Object(xe.a)(12e4).pipe(Object(j.a)(n)).subscribe((function(){t.stopRequestsStep(),t.goToNextPage(g.c.PARTNERS_LOAN_APPLICATION_SUBMITTED)}))}break;case x.CLIENT_IS_NOT_A_FOP:case x.REJ_BANK:this.goToNextPage(g.c.PARTNERS_LOAN_NOT_A_FOP);break;case x.ERROR:this.goToNextPage(g.c.PARTNERS_LOAN_TECHNICAL_ERROR);break;case x.ERROR_DIIA:this.isShowLoaderModal=!1,this.hasExtractingError=!0,this.timeIsOver=!0,this.stopRequestsStep();break;case x.REJ_S1:case x.NEGATIVE_LIMIT:case x.NEGATIVE_CLIENT:this.goToNextPage(g.c.PARTNERS_LOAN_REFUSAL);break;case x.PROCESSING_LIMIT:this.goToNextPage(g.c.PARTNERS_LOAN_PROCESSING)}},t.prototype.goToNextPage=function(e){this.isShowLoaderModal=!1,this.cookiesService.delete(b),this.goToNextPageWithoutClearLoanForm(e)},t.prototype.goToNextPageWithoutClearLoanForm=function(e){this.partnersLoanService.routeIndex=N.RESULT_PAGE,this.cookiesService.delete(R),this.router.navigate([e])},t.prototype.stopRequestsStep=function(){this.newDeepLinkGenerated$&&(this.newDeepLinkGenerated$.next(null),this.newDeepLinkGenerated$.unsubscribe(),this.newDeepLinkGenerated$=null)},t.prototype.handleError=function(e){var t=this;switch(e&&e.error&&e.error.code){case K.a.SESSION_EXPIRED:this.popupService.create({text:"MICROCREDIT.SESSION_EXPIRED",buttons:[U.d.OK]}).subscribe((function(){t.goToNextPageWithoutClearLoanForm(g.c.PARTNERS_LOAN)}));break;case K.a.UNKNOWN:this.popupService.create({text:"MICROCREDIT.UNKNOWN_ERROR",buttons:[U.d.OK]}).subscribe((function(){t.goToNextPageWithoutClearLoanForm(g.c.PARTNERS_LOAN)}))}},t.prototype.updateDeepLinkFormStatus=function(){var e=new Date(Date.now()+this.deepLinkCountdown).toISOString();this.cookiesService.setWithMaxAge(R,JSON.stringify({deepLinkCountdown:e,qrImage:this.qrImage}),O)},t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](y),u["\u0275\u0275directiveInject"](d.d),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](G.a),u["\u0275\u0275directiveInject"](f.c),u["\u0275\u0275directiveInject"](W.b))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["pl-microcredit-scan-qr"]],features:[u["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:6,consts:[[1,"d-flex","flex-column","position-relative","align-items-center","justify-content-center","w-100","mt-4","pt-1"],["class","scan-qr-container internal-error py-3 pl-3 pr-5 mb-4 mt-2",4,"ngIf"],["class","scan-qr-container d-flex pr-5",3,"ngClass",4,"ngIf"],["class","btn btn-block btn-primary btn-lg mt-2 mt-md-4","type","button",3,"click",4,"ngIf"],["class","btn btn-primary mr-4 btn-regenerate-qr","type","button",3,"click",4,"ngIf"],["class","loading loading-centered loading-sm",4,"ngIf"],[3,"modalConfig",4,"ngIf"],["fuibFacebookPixel",""],[1,"scan-qr-container","internal-error","py-3","pl-3","pr-5","mb-4","mt-2"],[1,"internal-error__message"],[1,"scan-qr-container","d-flex","pr-5",3,"ngClass"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column"],[1,"information-block","fsz-0-8-75","ml-4"],[1,"big-screen"],[1,"big-screen",3,"innerHTML"],[1,"small-screen",3,"innerHTML"],[4,"ngIf"],["class","d-none d-md-flex btn scan-qr__timer mr-4",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultQRRef",""],[1,"mb-4","mr-4",3,"qrdata","width","errorCorrectionLevel"],["loading","lazy","src","../../../../../../../assets/images/disabled-qr.webp","alt","QR image disabled",1,"d-flex","mb-4","mr-4"],[1,"d-none","d-md-flex","btn","scan-qr__timer","mr-4"],["id","countdown","units","Minutes | Seconds","divider",":",3,"endMilliseconds","counterTimeIsOver",4,"ngIf"],["id","countdown","units","Minutes | Seconds","divider",":",3,"endMilliseconds","counterTimeIsOver"],["type","button",1,"btn","btn-primary","mr-4","btn-regenerate-qr",3,"click"],["type","button",1,"btn","btn-block","btn-primary","btn-lg","mt-2","mt-md-4",3,"click"],[1,"loading","loading-centered","loading-sm"],[3,"modalConfig"],["message",""],[1,"w-100","tac","mt-4"],[1,"fsz-1","check-you-data"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275template"](1,tt,4,3,"div",1),u["\u0275\u0275template"](2,lt,14,16,"div",2),u["\u0275\u0275template"](3,dt,3,3,"button",3),u["\u0275\u0275template"](4,ut,3,3,"button",4),u["\u0275\u0275template"](5,mt,1,0,"fuib-digital-preloader",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](6,gt,9,7,"fuib-dialog-loader",6),u["\u0275\u0275element"](7,"div",7)),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.hasExtractingError),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.isLoading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.isLoading&&t.isMobile&&!t.timeIsOver),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.timeIsOver&&t.isMobile),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isLoading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.isShowLoaderModal))},directives:[o.t,pe.a,o.q,c.a,ye.a,J.a,et.a],pipes:[Z.d],styles:['@charset "UTF-8";.dropdown-menu[_ngcontent-%COMP%]{z-index:1080}[_nghost-%COMP%] {min-height:200px;display:flex}[_nghost-%COMP%]  canvas{position:relative;top:5px;transform:scale(1.14)}[_nghost-%COMP%]  img{max-width:168px;min-height:168px}[_nghost-%COMP%]  .scan-qr-container{max-width:460px}[_nghost-%COMP%]  .scan-qr__info{font-size:.875rem;color:#93939e}[_nghost-%COMP%]  .scan-qr__timer{height:40px;background:transparent;border:2px solid #e1e1e8;cursor:progress}[_nghost-%COMP%]  .scan-qr__timer .countdown:after, [_nghost-%COMP%]  .scan-qr__timer fuib-countdown .measurements-number{font-weight:700;color:#f91f2b}.btn-regenerate-qr[_ngcontent-%COMP%]{min-width:168px;font-size:.875rem;line-height:1.25rem}@media (max-width:768px){.btn-regenerate-qr[_ngcontent-%COMP%]{height:40px!important}}.icon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:3.5rem}.internal-error[_ngcontent-%COMP%]{background-color:#ffeddd;border-radius:8px;max-width:460px}.internal-error__message[_ngcontent-%COMP%]{font-size:.875rem;line-height:20px;color:#f57f17;position:relative;display:flex}.internal-error__message[_ngcontent-%COMP%]:before{content:"\ue940";font-family:project-icons;font-size:.75rem;margin-right:.5rem;display:inline-block}.information-block[_ngcontent-%COMP%]{line-height:20px}@media (max-width:768px){.btn-block[_ngcontent-%COMP%]{height:40px!important}}@media (max-width:768px){.big-screen[_ngcontent-%COMP%]{display:none}}.small-screen[_ngcontent-%COMP%]{display:none}@media (max-width:768px){.small-screen[_ngcontent-%COMP%]{display:list-item}}.check-you-data[_ngcontent-%COMP%]{line-height:24px;font-family:gilroy;font-weight:500;letter-spacing:.25px}'],changeDetection:0}),t}(H.a),ft=n("quSY");function Et(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",8),u["\u0275\u0275elementStart"](1,"p",9),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",10),u["\u0275\u0275element"](5,"img",11),u["\u0275\u0275elementStart"](6,"p",12),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](9,"img",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,2,"MICROCREDIT.PARTNERS_LOAN.PARTNER_PROGRAM")," "),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](8,4,"MICROCREDIT.PARTNERS_LOAN.AND")))}function It(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"p",17),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](2,1,n.subCaption))}}function Ct(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",14),u["\u0275\u0275elementStart"](1,"h4",15),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](4,It,3,3,"p",16),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](3,2,n.caption)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",n.subCaption)}}var St=[{path:"",component:function(){function e(e,t,n){this.route=e,this.router=t,this.sharedService=n,this.subscriptions=new ft.a,this.steps=3}return Object.defineProperty(e.prototype,"isResultPage",{get:function(){return this.route.firstChild.snapshot.data.routeIndex===M.a.RESULT_PAGE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPartnersBlock",{get:function(){return 1===this.routeIndex},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.checkProgressLine(),this.subscriptions.add(this.router.events.subscribe((function(t){t instanceof d.b&&e.checkProgressLine()})))},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe(),this.sharedService.disableProgressLine()},e.prototype.checkProgressLine=function(){if(this.isResultPage)this.sharedService.disableProgressLine();else{var e=this.getRouteIndex(this.route.firstChild.snapshot.data.routeIndex);this.sharedService.emitProgressLine({totalSteps:this.steps,currentStep:e})}},e.prototype.onActivateRoute=function(){this.routeIndex=this.getRouteIndex(this.route.firstChild.snapshot.data.routeIndex),this.caption=this.route.firstChild.snapshot.data.caption,this.subCaption=this.route.firstChild.snapshot.data.subCaption||""},e.prototype.getRouteIndex=function(e){switch(e){case M.a.CREDIT_REQUEST_FORM:return 1;case M.a.OTP:return 2;case M.a.SCAN_QR:return 3}},e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](d.d),u["\u0275\u0275directiveInject"](f.i))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["fuib-partners-loan"]],decls:8,vars:2,consts:[[1,"container","position-relative","pb-4"],[1,"form-wrap","mx-auto"],[1,"form-wrap-inner"],["class","partners d-flex flex-column align-items-center text-center",4,"ngIf"],["class","d-flex flex-column align-items-center text-center pt-1",4,"ngIf"],[1,"position-relative","pb-2"],[1,"outlet-wrap"],[3,"activate"],[1,"partners","d-flex","flex-column","align-items-center","text-center"],[1,"partners-caption","p3"],[1,"logos-container"],["src","./assets/svg/pumb-icon-new.svg","width","40px","height","40px","alt","Logo \u041f\u0423\u041c\u0411 \u0411\u0456\u0437\u043d\u0435\u0441"],[1,"logo-and"],["src","./assets/svg/epicenter-logo.svg","alt","Logo \u041f\u0423\u041c\u0411 \u0411\u0456\u0437\u043d\u0435\u0441"],[1,"d-flex","flex-column","align-items-center","text-center","pt-1"],[1,"h4","non-responsive","mb-0"],["class","text-grey-50",4,"ngIf"],[1,"text-grey-50"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"section",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275template"](3,Et,10,6,"div",3),u["\u0275\u0275template"](4,Ct,5,4,"div",4),u["\u0275\u0275elementStart"](5,"div",5),u["\u0275\u0275elementStart"](6,"div",6),u["\u0275\u0275elementStart"](7,"router-outlet",7),u["\u0275\u0275listener"]("activate",(function(){return t.onActivateRoute()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.showPartnersBlock),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.isResultPage))},directives:[o.t,d.i],pipes:[Z.d],styles:[".dropdown-menu[_ngcontent-%COMP%]{z-index:1080}[_nghost-%COMP%] {display:flex;flex-direction:column;margin-top:70px;min-height:calc(100vh - 118px)}[_nghost-%COMP%]  .container{padding-right:0;padding-left:0}[_nghost-%COMP%]  section{height:100%}[_nghost-%COMP%]  section.form-wrap{width:100%;min-width:200px}[_nghost-%COMP%]  section .form-wrap-inner{max-width:960px;height:100%}[_nghost-%COMP%]  section .form-wrap-inner .partners{border:1px solid #e1e1e8;border-radius:20px;max-width:460px;margin:43px auto 0}[_nghost-%COMP%]  section .form-wrap-inner .partners-caption{margin-top:13px;margin-bottom:0;color:#93939e}[_nghost-%COMP%]  section .form-wrap-inner .partners .logos-container{display:flex;align-items:center;margin-top:8px;margin-bottom:15px}[_nghost-%COMP%]  section .form-wrap-inner .partners .logos-container .logo-and{margin:0 15px;color:#93939e}[_nghost-%COMP%]  section .form-wrap-inner .h4{max-width:460px;margin-top:27px}[_nghost-%COMP%]  section .form-wrap-inner .text-grey-50{max-width:460px;margin-top:16px;margin-bottom:0;letter-spacing:.25px;line-height:20px}[_nghost-%COMP%]  section .form-wrap-inner .outlet-wrap{height:100%}[_nghost-%COMP%]  .wizard-indicator-step:not(:first-child):after{margin-left:.489rem}[_nghost-%COMP%]  h1{transition:all .3s ease}[_nghost-%COMP%]  .wizard-indicator-step.prev{position:relative;width:1rem;height:1rem}[_nghost-%COMP%]  .wizard-indicator-step.prev:before{content:url(icon-togle-checked.7fe015d8ba223ab4d6b6.svg);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .3s ease-in-out}"],data:{animation:[V.h]},changeDetection:0}),e}(),children:[{path:"",redirectTo:"apply-for-loan",pathMatch:"full"},{path:"apply-for-loan",component:Ae,data:{routeIndex:M.a.CREDIT_REQUEST_FORM,caption:"MICROCREDIT.CREDIT_REQUEST_FORM.CREDIT_REQUEST"}},{path:"check-otp",component:ze,canActivate:[P],data:{routeIndex:M.a.OTP,caption:"MICROCREDIT.OTP_FORM.ENTER_VERIFICATION_CODE"}},{path:"scan-qr",component:ht,canActivate:[P],data:{routeIndex:M.a.SCAN_QR,caption:"MICROCREDIT.SHARED_DOCUMENTS_DIA.SHARE_DOCUMENTS"}},{path:"application-submitted",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.APPLICATION_SUBMITTED}},{path:"available",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.AVAILABLE}},{path:"available-client",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.AVAILABLE_CLIENT}},{path:"limit-is-agreed",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.LIMIT_IS_AGREED}},{path:"limit-is-agreed-client",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.LIMIT_IS_AGREED_CLIENT}},{path:"refusal",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.REFUSAL}},{path:"processing",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.PROCESSING}},{path:"not-a-fop",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.NOT_A_FOP}},{path:"technical-error",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.TECHNICAL_ERROR}},{path:"ident-date",component:Xe,canActivate:[P],data:{routeIndex:M.a.RESULT_PAGE,resultType:A.IDENT_DATE}}]}],_t=function(){function e(){}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[d.h.forChild(St)],d.h]}),e}(),Ot=function(){function e(){}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[y,P],imports:[[o.c,i.FormsModule,i.ReactiveFormsModule,l.a,p.m.forRoot(),_t,s.a.forRoot(),p.k.forRoot(),a.TextMaskModule,c.b,m]]}),e}()}}]);