(self.webpackChunkmerch_store=self.webpackChunkmerch_store||[]).push([[997],{997:(s,l,e)=>{"use strict";e.r(l),e.d(l,{default:()=>P});var r=e(1635);var d=e(8070),x=e.n(d),n=e(4438),i=e(2864),g=e(727),v=e(1626);let c=class{ENV=(0,n.WQX)(g.Km);http=(0,n.WQX)(v.Qq);getOrdersList(t,a,o=0){return this.http.get(this.ENV.remoteApi+"/user/orders",{params:{page:t,pageSize:a,skipCount:o}})}getOrderDetails(t){return this.http.get(this.ENV.remoteApi+`/orders/${t}`)}};c=(0,r.Cg)([(0,n._qm)({providedIn:"root"})],c);var b=e(9529),f=e(9948),y=e(177),O=e(9213),D=e(4823),S=e(7514),A=e(5152),m=e(6697),u=e(1716);let h=class{userService=(0,n.WQX)(A.DL);accountDataService=(0,n.WQX)(c);initialLoader=(0,n.vPA)(!1);orders=(0,n.vPA)([]);total=(0,n.vPA)(0);pageCount=(0,n.vPA)(0);pageSize=10;currentPage=(0,n.vPA)(0);expandedOrderDetails=(0,n.vPA)(null);displayedOrdersCount=(0,n.EWP)(()=>this.pageSize*this.currentPage());expandedActiveStep=(0,n.vPA)(null);balance=this.userService.balance;productCard=(0,n.EWP)(()=>({subtotalPoints:this.expandedOrderDetails().total?.subtotalPoints,subtotalPrice:this.expandedOrderDetails().total?.subtotalPrice,totalPoints:this.expandedOrderDetails().total?.totalPoints,totalPrice:this.expandedOrderDetails().total?.totalPrice,tax:this.expandedOrderDetails().total?.tax,isPromo:!1,products:this.expandedOrderDetails().products}));skeletonService=(0,n.WQX)(S.Rm);ngOnInit(){this.initialLoader.set(!0),this.accountDataService.getOrdersList(1,this.pageSize).pipe((0,m.s)(1)).subscribe(t=>{this.orders.set(t.items),this.total.set(t.totalCount),this.currentPage.set(t.currentPage),this.pageCount.set(t.pageCount),this.initialLoader.set(!1)})}setExpandedActiveStep(t,a){t===this.expandedActiveStep()?this.closeAllTabs():this.fetchOrderDetails(t,a)}seeMoreItems(){this.currentPage()+1>this.pageCount()||this.accountDataService.getOrdersList(this.currentPage()+1,this.pageSize).pipe((0,m.s)(1)).subscribe(t=>{this.orders.update(a=>[...a,...t.items]),this.total.set(t.totalCount),this.currentPage.set(t.currentPage),this.pageCount.set(t.pageCount)})}fetchOrderDetails(t,a){this.expandedActiveStep.set(t),this.expandedOrderDetails.set(null),this.accountDataService.getOrderDetails(a.id).pipe((0,m.s)(1)).subscribe(o=>this.expandedOrderDetails.set(o))}closeAllTabs(){this.expandedActiveStep.set(null)}};h=(0,r.Cg)([(0,n.uAl)({selector:"app-orders-list",standalone:!0,imports:[y.MD,b.bU,O.m_,D.uc,f.w,i._0,i.Yh,i.GV,i.Y0,i.QS,u.nj],template:'<div class="wrapper">\n  <div class="table">\n    <header class="table__title">\n      <p class="table__title-column body-0" style="padding-left: 29px">DATE ORDERED</p>\n      <p class="table__title-column body-0">Confirmation #</p>\n      <p class="table__title-column body-0">Total amount</p>\n      <p class="table__title-column body-0">Order status</p>\n    </header>\n    @if (initialLoader()) {\n      <section class="orders-list-skeleton">\n        <ng-container *ngTemplateOutlet="skeletonService.rectangleTemplate()"></ng-container>\n      </section>\n    } @else {\n      <section class="table__content">\n        <cdk-accordion class="accordion">\n          @for (order of orders(); track order; let index = $index) {\n            <cdk-accordion-item\n              class="accordion-item"\n              [expanded]="index === expandedActiveStep()"\n              [ngClass]="{ expanded: expandedActiveStep() === index }"\n            >\n              <div\n                class="accordion-item-header"\n                (libAccessibleClick)="setExpandedActiveStep(index, order)"\n                trackClick\n                [trackClick]="{\n                  item: expandedActiveStep() === index ? \'collapse\' : \'expand\',\n                  order: order.confirmationNumber,\n                  orderStatus: order.orderStatus,\n                }"\n              >\n                <div class="column" [ngClass]="{ expanded: expandedActiveStep() === index }">\n                  <mat-icon svgIcon="ico_accordion_caret_right"></mat-icon>\n                  <p class="cta">{{ order.dateOrdered | date }}</p>\n                </div>\n                <p class="body-0 column">{{ order.confirmationNumber }}</p>\n                <p class="body-0 column">{{ order.totalAmount | appDigitsGrouping }}</p>\n                <p class="body-0 column">{{ order.orderStatus }}</p>\n              </div>\n              <div\n                class="accordion-item-body"\n                role="region"\n                [style.display]="index === expandedActiveStep() ? \'\' : \'none\'"\n              >\n                @if (expandedOrderDetails()) {\n                  <app-order-shipping-info\n                    [dateOrdered]="expandedOrderDetails().dateOrdered"\n                    [trackingNumber]="expandedOrderDetails().tracking?.trackingNumber"\n                    [state]="expandedOrderDetails().tracking?.status"\n                  ></app-order-shipping-info>\n\n                  <app-checkout-order-review\n                    [productCard]="productCard()"\n                    [shippingInfo]="expandedOrderDetails().shipping"\n                    [pointsRedeem]="0"\n                    [pointsAvailable]="balance()?.points"\n                    [conversionRate]="balance()?.conversionRate"\n                    [hidePaymentDetails]="true"\n                    [hideActionButton]="true"\n                    [amountLabel]="\'Amount paid\'"\n                    [totalLabel]="\'Total amount\'"\n                  >\n                    <div class="payment-info-wrapper">\n                      <p class="cta">Payment details</p>\n                      <div class="payment-info-wrapper__content">\n                        <div class="payment-info-wrapper__content-row">\n                          <p class="label">Points redeemed</p>\n                          <p class="body-1 label">\n                            {{ expandedOrderDetails()?.paymentDetails?.pointsRedeemed | appDigitsGrouping }} pts\n                          </p>\n                        </div>\n                        <div class="payment-info-wrapper__content-row">\n                          <p style="display: flex; gap: 0.5rem" class="label">\n                            <span>Billed to card</span>\n                            <mat-icon\n                              tabindex="0"\n                              role="button"\n                              aria-label="Info"\n                              [attr.aria-hidden]="false"\n                              matTooltip="Statement descriptor"\n                              svgIcon="ico_info"\n                            ></mat-icon>\n                          </p>\n                          <div>\n                            <app-partial-hidden-credit-card\n                              [cardType]="expandedOrderDetails()?.paymentDetails?.card?.cardType"\n                              [lastFourDigits]="expandedOrderDetails()?.paymentDetails?.card?.lastFourDigits"\n                            ></app-partial-hidden-credit-card>\n                          </div>\n                          <p class="body-1 label">\n                            {{ expandedOrderDetails()?.total?.totalPrice | currency }}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </app-checkout-order-review>\n                } @else {\n                  <div class="accordion-item-body--skeleton">\n                    <ng-container *ngTemplateOutlet="skeletonService.rectangleTemplate()"></ng-container>\n                  </div>\n                }\n              </div>\n            </cdk-accordion-item>\n          }\n        </cdk-accordion>\n        <app-see-more-items-button\n          (loadMore)="seeMoreItems()"\n          [displayedCount]="displayedOrdersCount()"\n          [totalCount]="total()"\n        ></app-see-more-items-button>\n      </section>\n    }\n  </div>\n</div>\n',changeDetection:n.Ngq.OnPush,providers:[{provide:u.YE,useValue:u.v.OrderDetails}],styles:[x()]})],h);const P=h},8070:(s,l,e)=>{var r=e(8564),d=e(8557)(r);d.push([s.id,":host {\n  width: 100%;\n  max-width: 1440px;\n}\n\n.wrapper {\n  padding: 0 24px;\n}\n.wrapper .table {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.wrapper .table__title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 24px;\n}\n@media (min-width: 0px) and (max-width: 1024px) {\n  .wrapper .table__title {\n    display: none;\n  }\n}\n.wrapper .table__title-column {\n  width: 25%;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n.accordion {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: 100%;\n  border-radius: 8px;\n}\n@media (min-width: 1024px) and (max-width: 19000px) {\n  .accordion {\n    gap: 24px;\n  }\n}\n\n.accordion-item {\n  display: block;\n  border-radius: 8px;\n  padding: 0;\n}\n.accordion-item.expanded .accordion-item-header {\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.accordion-item.expanded .accordion-item-body {\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n}\n.accordion-item.expanded .accordion-item-body--skeleton {\n  width: 100%;\n  height: 500px;\n}\n\n.accordion-item-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: #ffffff;\n  padding: 16px 24px;\n  border-radius: 8px;\n}\n@media (min-width: 0) and (max-width: 480px) {\n  .accordion-item-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  .accordion-item-header .column {\n    width: 100%;\n  }\n  .accordion-item-header .column:first-child {\n    padding-bottom: 16px;\n  }\n}\n.accordion-item-header .column:first-child {\n  display: flex;\n  flex-wrap: nowrap;\n  gap: 0.5rem;\n  align-items: center;\n}\n.accordion-item-header .column:first-child.expanded .mat-icon {\n  transform: rotate(90deg);\n}\n.accordion-item-header:hover {\n  cursor: pointer;\n  background-color: #ffffff;\n}\n.accordion-item-header .mat-icon {\n  display: block;\n}\n\n.accordion-item-body {\n  padding: 24px;\n}\n\n.column {\n  width: 25%;\n}\n\n.payment-info-wrapper {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n@media (min-width: 0px) and (max-width: 1024px) {\n  .payment-info-wrapper {\n    border-top: 1px solid rgba(204, 206, 208, 0.25);\n    margin-top: 24px;\n    padding-top: 24px;\n  }\n}\n.payment-info-wrapper .only-mobile {\n  display: none;\n}\n@media (min-width: 0) and (max-width: 480px) {\n  .payment-info-wrapper .only-mobile {\n    display: block;\n  }\n}\n.payment-info-wrapper__content {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n.payment-info-wrapper__content-row {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  gap: 20px;\n}\n\n.orders-list-skeleton {\n  width: 100%;\n  height: 700px;\n}",""]),s.exports=d.toString()}}]);