(self.webpackChunkmerch_store=self.webpackChunkmerch_store||[]).push([[338],{5634:(n,g,e)=>{var r=e(8524),a=e(7445)(r);a.push([n.id,":host {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2rem;\n}\n@media (min-width: 0) and (max-width: 480px) {\n  :host {\n    padding: 0.5rem;\n  }\n}",""]),n.exports=a.toString()},4338:(n,g,e)=>{"use strict";e.r(g),e.d(g,{default:()=>X});var r=e(1635);var a=e(5634),b=e.n(a),p=e(6206),i=e(32),t=e(4438),l=e(7602),h=e(5006),R=e(8841),c=e(9079),v=e(6661),C=e(2504),y=e(4421);let P=class{api=(0,t.WQX)(i.Gf);route=(0,t.WQX)(v.nX);getFilterOptions(){return{brand:this.getBrandOptions(),gender:this.getGenderOptions(),sorting:this.getSortingOptions()}}getBrandOptions(){return this.api.get("BrandCategory/GetCategoryBrands",{categoryId:this.route.snapshot.params.id}).pipe((0,h.T)(s=>s.map(o=>({label:o.name,value:o.id}))))}getGenderOptions(){return(0,y.of)(C.nL.map(s=>({label:s,value:s})))}getSortingOptions(){return(0,y.of)(C.JH)}};P=(0,r.Cg)([(0,t._qm)({providedIn:"root"})],P);var O=e(5020);let m=class{productDataService=(0,t.WQX)(O.D);destroyRef=(0,t.WQX)(t.abz);route=(0,t.WQX)(v.nX);isTablet=(0,t.WQX)(i.RL).isTablet;currCategoryId=(0,t.EWP)(()=>[...this.categories()].pop()?.id);currCategoryName=(0,t.EWP)(()=>[...this.categories()].pop()?.name);title=this.currCategoryName;subtitle=(0,t.vPA)("");filters=(0,t.vPA)(["brand","sorting","isAvailablePointsRange"]);products=(0,t.vPA)([]);isLoading=(0,t.vPA)(!1);totalCount=(0,t.vPA)(0);lastReceivedPageNumber=(0,t.vPA)(0);productsPerPage=(0,t.EWP)(()=>this.isTablet()?12:16);productsOffset=(0,t.vPA)(this.productsPerPage());filterState=(0,t.vPA)({});cachedFilter={};categories=(0,c.ot)(this.route.queryParams.pipe((0,h.T)(s=>s.data?JSON.parse(s.data):[])));getProducts(s){this.isLoading.set(!0);const o=JSON.stringify(this.cachedFilter)!==JSON.stringify(s);o&&(this.lastReceivedPageNumber.set(0),this.cachedFilter=s);const{sorting:A,...W}=s;this.productDataService.getProducts({...W,brandIds:W.brand??[],categoryIds:this.currCategoryId()?[this.currCategoryId()]:[],sortBy:A,page:o?1:Math.min(this.lastReceivedPageNumber()+1,this.totalCount()),pageSize:this.productsPerPage()}).pipe((0,c.pQ)(this.destroyRef)).subscribe(d=>{this.products.update(I=>o?d.items:[...I,...d.items]),this.totalCount.set(d.totalCount),this.lastReceivedPageNumber.set(d.currentPage),this.isLoading.set(!1)})}seeMoreProducts(){this.getProducts(this.cachedFilter||{})}};m=(0,r.Cg)([(0,t._qm)({providedIn:"root"})],m);var Q=e(177);let S=class{productService=(0,t.WQX)(i.bk);cartService=(0,t.WQX)(i.mx);route=(0,t.WQX)(v.nX);breadcrumbsService=(0,t.WQX)(p.EH);wishlistService=(0,t.WQX)(i.FQ);productListService=(0,t.WQX)(l.I);destroyRef=(0,t.WQX)(t.abz);categories=(0,c.ot)(this.route.queryParams.pipe((0,h.T)(s=>s.data?JSON.parse(s.data):[])));constructor(){(0,t.QZP)(()=>{this.breadcrumbsService.set(this.categories())},{allowSignalWrites:!0})}ngOnInit(){this.route.params.pipe((0,R.M)(()=>this.productListService.getProducts({})),(0,c.pQ)(this.destroyRef)).subscribe()}toggleWishlist(s){this.wishlistService.toggleWishlist(s)}addToCart(s){this.cartService.addCartProduct(s)}onShowProduct(s){this.productService.goToProductDetails(s)}static ctorParameters=()=>[]};S=(0,r.Cg)([(0,t.uAl)({selector:"app-category-products",template:'<app-breadcrumbs></app-breadcrumbs>\n<app-product-list\n  (onShowProduct)="onShowProduct($event)"\n  (toggleWishlist)="toggleWishlist($event)"\n  (addToCart)="addToCart($event)"\n></app-product-list>\n',standalone:!0,changeDetection:t.Ngq.OnPush,imports:[Q.MD,p.m6,l.t],providers:[O.D,{provide:p.xs,useClass:P},{provide:l.I,useClass:m}],styles:[b()]}),(0,r.Sn)("design:paramtypes",[])],S);const X=S}}]);